!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=21)}([function(e,t){e.exports=React},function(e,t){e.exports=ReactBootstrap},function(e,t){e.exports=PropTypes},function(e,t){e.exports=Sentry},function(e,t,n){"use strict";function r(e){return"[object String]"===Object.prototype.toString.call(e)}function o(e){return"[object RegExp]"===Object.prototype.toString.call(e)}n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o}))},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));n(4);function r(e,t){var n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);var o=Math.max(t-60,0);o<5&&(o=0);var i=Math.min(o+140,r);return i>r-5&&(i=r),i===r&&(o=Math.max(i-140,0)),n=n.slice(o,i),o>0&&(n="'{snip} "+n),i<r&&(n+=" {snip}"),n}},function(e,t){e.exports=ReactDOM},function(e,t){e.exports=LogRocket},function(e,t){e.exports=Sentry.Integrations},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){o({ResponderEventPlugin:{extractEvents:function(e,t,n,r){try{if("click"!==e||!n||!r)return;for(var o=n,i=[];o;){var a="function"==typeof o.elementType&&o.elementType.displayName;a&&i.push(a),o=o.return}r.__lrName=i}catch(e){console.error("logrocket-react caught an error while hooking into React. Please make sure you are using the correct version of logrocket-react for your version of react-dom.")}}}})};var r=n(6),o=void 0,i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;o=i&&i.Events&&i.Events[3]?i.Events[3]:function(){console.warn("logrocket-react does not work with this version of React")},e.exports=t.default},function(e,t,n){"use strict";var r=n(16),o={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};function u(e){return r.isMemo(e)?a:c[e.$$typeof]||o}c[r.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},c[r.Memo]=a;var l=Object.defineProperty,s=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,p=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,m=Object.prototype;e.exports=function e(t,n,r){if("string"!=typeof n){if(m){var o=d(n);o&&o!==m&&e(t,o,r)}var a=s(n);f&&(a=a.concat(f(n)));for(var c=u(t),y=u(n),h=0;h<a.length;++h){var v=a[h];if(!(i[v]||r&&r[v]||y&&y[v]||c&&c[v])){var b=p(n,v);try{l(t,v,b)}catch(e){}}}}return t}},,function(e,t,n){var r=n(13),o=n(14);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};r(o,i);e.exports=o.locals||{}},function(e,t,n){"use strict";var r,o=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),a=[];function c(e){for(var t=-1,n=0;n<a.length;n++)if(a[n].identifier===e){t=n;break}return t}function u(e,t){for(var n={},r=[],o=0;o<e.length;o++){var i=e[o],u=t.base?i[0]+t.base:i[0],l=n[u]||0,s="".concat(u," ").concat(l);n[u]=l+1;var f=c(s),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(a[f].references++,a[f].updater(p)):a.push({identifier:s,updater:h(p,t),references:1}),r.push(s)}return r}function l(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var o=n.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var s,f=(s=[],function(e,t){return s[e]=t,s.filter(Boolean).join("\n")});function p(e,t,n,r){var o=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function d(e,t,n){var r=n.css,o=n.media,i=n.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,y=0;function h(e,t){var n,r,o;if(t.singleton){var i=y++;n=m||(m=l(t)),r=p.bind(null,n,i,!1),o=p.bind(null,n,i,!0)}else n=l(t),r=d.bind(null,n,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var n=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var o=c(n[r]);a[o].references--}for(var i=u(e,t),l=0;l<n.length;l++){var s=c(n[l]);0===a[s].references&&(a[s].updater(),a.splice(s,1))}n=i}}}},function(e,t,n){},function(e,t){e.exports=ml5},function(e,t,n){"use strict";e.exports=n(17)},function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var r="function"==typeof Symbol&&Symbol.for,o=r?Symbol.for("react.element"):60103,i=r?Symbol.for("react.portal"):60106,a=r?Symbol.for("react.fragment"):60107,c=r?Symbol.for("react.strict_mode"):60108,u=r?Symbol.for("react.profiler"):60114,l=r?Symbol.for("react.provider"):60109,s=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,p=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,m=r?Symbol.for("react.suspense"):60113,y=r?Symbol.for("react.suspense_list"):60120,h=r?Symbol.for("react.memo"):60115,v=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.block"):60121,g=r?Symbol.for("react.fundamental"):60117,w=r?Symbol.for("react.responder"):60118,S=r?Symbol.for("react.scope"):60119;function O(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case o:switch(e=e.type){case f:case p:case a:case u:case c:case m:return e;default:switch(e=e&&e.$$typeof){case s:case d:case v:case h:case l:return e;default:return t}}case i:return t}}}function j(e){return O(e)===p}t.AsyncMode=f,t.ConcurrentMode=p,t.ContextConsumer=s,t.ContextProvider=l,t.Element=o,t.ForwardRef=d,t.Fragment=a,t.Lazy=v,t.Memo=h,t.Portal=i,t.Profiler=u,t.StrictMode=c,t.Suspense=m,t.isAsyncMode=function(e){return j(e)||O(e)===f},t.isConcurrentMode=j,t.isContextConsumer=function(e){return O(e)===s},t.isContextProvider=function(e){return O(e)===l},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===o},t.isForwardRef=function(e){return O(e)===d},t.isFragment=function(e){return O(e)===a},t.isLazy=function(e){return O(e)===v},t.isMemo=function(e){return O(e)===h},t.isPortal=function(e){return O(e)===i},t.isProfiler=function(e){return O(e)===u},t.isStrictMode=function(e){return O(e)===c},t.isSuspense=function(e){return O(e)===m},t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===a||e===p||e===u||e===c||e===m||e===y||"object"==typeof e&&null!==e&&(e.$$typeof===v||e.$$typeof===h||e.$$typeof===l||e.$$typeof===s||e.$$typeof===d||e.$$typeof===g||e.$$typeof===w||e.$$typeof===S||e.$$typeof===b)},t.typeOf=O},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var u,l=[],s=!1,f=-1;function p(){s&&u&&(s=!1,u.length?l=u.concat(l):f=-1,l.length&&d())}function d(){if(!s){var e=c(p);s=!0;for(var t=l.length;t;){for(u=l,l=[];++f<t;)u&&u[f].run();f=-1,t=l.length}u=null,s=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new m(e,t)),1!==l.length||s||c(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=y,o.addListener=y,o.once=y,o.off=y,o.removeListener=y,o.removeAllListeners=y,o.emit=y,o.prependListener=y,o.prependOnceListener=y,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(6),a=n(3),c=n(8),u=n(7),l=n.n(u),s=n(9),f=n.n(s);n(12);function p(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=p(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var d=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=p(e))&&(r&&(r+=" "),r+=t);return r},m=function(){return console},y=n(1),h=function(e,t){return(h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function v(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}var b=n(24),g=(n(10),{id:"Tracing"}),w=null;!function(e){function t(t){var n=e.call(this,t)||this;n._mountActivity=null,n._mountSpan=void 0;var r=n.props,o=r.name,i=r.disabled;if(void 0!==i&&i)return n;if(w||(w=Object(a.getCurrentHub)().getIntegration(g)))n._mountActivity=function(e,t){return null===w?null:w.constructor.pushActivity(e,{description:"<"+e+">",op:"react."+t})}(o,"mount");else{var c=S();c&&(n._mountSpan=c.startChild({description:"<"+o+">",op:"react.mount"}))}return n}(function(e,t){function n(){this.constructor=e}h(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)})(t,e),t.prototype.componentDidMount=function(){var e;this._mountSpan?this._mountSpan.finish():(this._mountSpan=function(e){if(null!==e&&null!==w)return w.constructor.getActivitySpan(e)}(this._mountActivity),null!==(e=this._mountActivity)&&null!==w&&w.constructor.popActivity(e),this._mountActivity=null)},t.prototype.componentDidUpdate=function(e){var t=this,n=e.updateProps,r=e.includeUpdates;if((void 0===r||r)&&this._mountSpan&&n!==this.props.updateProps){var o=Object.keys(n).filter((function(e){return n[e]!==t.props.updateProps[e]}));if(o.length>0){var i=Object(b.a)();this._mountSpan.startChild({data:{changedProps:o},description:"<"+this.props.name+">",endTimestamp:i,op:"react.update",startTimestamp:i})}}},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.name,n=e.includeRender,r=void 0===n||n;this._mountSpan&&r&&this._mountSpan.startChild({description:"<"+t+">",endTimestamp:Object(b.a)(),op:"react.render",startTimestamp:this._mountSpan.endTimestamp})},t.prototype.render=function(){return this.props.children},t.defaultProps={disabled:!1,includeRender:!0,includeUpdates:!0}}(r.Component);function S(e){if(void 0===e&&(e=Object(a.getCurrentHub)()),e){var t=e.getScope();if(t)return t.getTransaction()}}n(15);var O=["A","B♭","B","C","C♯","D","D♯","E","F","F♯","G","G♯"],j=function(e){return 440*Math.pow((e-69)/12,2)},E=function(e){return 69+12*Math.log2(e/440)},x=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._freq=t,this.note=Math.round(E(t)),this.frequency=j(this.note),this.name=function(e){return O[(e-21)%12]}(this.note),this.octave=function(e){return Math.floor(e/12-1)}(this.note)},T=function(e){if(null==e)return null;var t,n,r=new x(e);return{frequency:e,target:r,note:E(e),diff:(t=r.frequency,n=e,1200*Math.log2(n/t))}},_=function(e){return this instanceof _?(this.v=e,this):new _(e)},C=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||[]),i=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(e){o[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||c(e,t)}))})}function c(e,t){try{(n=o[e](t)).value instanceof _?Promise.resolve(n.value.v).then(u,l):s(i[0][2],n)}catch(e){s(i[0][3],e)}var n}function u(e){c("next",e)}function l(e){c("throw",e)}function s(e,t){e(t),i.shift(),i.length&&c(i[0][0],i[0][1])}},P=m(),A="https://cdn.jsdelivr.net/gh/ml5js/ml5-data-and-models/models/pitch-detection/crepe/";function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $=function(e){var t=M(Object(r.useState)(!1),2),n=t[0],o=t[1],i=M(Object(r.useState)(),2),a=i[0],c=i[1];return Object(r.useEffect)((function(){var t=!0;return e.generator.next().then((function(e){!e.done&&t&&(c(e.value||void 0),o(!n))})),function(){t=!1}}),[n]),Object(r.useEffect)((function(){e.onTick&&a&&e.onTick(a)}),[a]),"function"==typeof e.children?e.children(a):e.children};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var N=m();function L(e){var t=e.pitchGenerator,n=e.timeoutMs,i=e.onFinish,a=R(Object(r.useState)([]),2),c=a[0],u=a[1],l=R(Object(r.useState)(!1),2),s=l[0],f=l[1],p=R(Object(r.useState)(!1),2),d=p[0],m=p[1];Object(r.useEffect)((function(){if(!s)return function(){};N.info("Setting up the timeout.");var e=setTimeout((function(){m(!0),f(!1)}),n);return N.info("Set up timer %d for %d ms.",e,n),function(){N.info("Clearing out the timeout %d.",e),clearTimeout(e)}}),[s]),Object(r.useEffect)((function(){d&&(N.info("Finishing recording."),i(c))}),[d,c]);var h=s?o.a.createElement(y.Spinner,{animation:"grow",variant:"danger"}):o.a.createElement("span",null,"sing now!");return t?o.a.createElement($,{generator:t,onTick:function(e){var t=c.concat([e]);u(t),s||f(!0)}},o.a.createElement("h3",null,h)):o.a.createElement(y.Spinner,{animation:"border",variant:"primary"})}var z=n(2),D=n.n(z);function F(){return(F=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var U=Object(r.forwardRef)((function(e,t){var n=e.color,r=e.size,i=B(e,["color","size"]);return o.a.createElement("svg",F({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o.a.createElement("path",{d:"M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"}))}));U.propTypes={color:D.a.string,size:D.a.oneOfType([D.a.string,D.a.number])},U.defaultProps={color:"currentColor",size:"1em"};var q=U;function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function H(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var W=Object(r.forwardRef)((function(e,t){var n=e.color,r=e.size,i=H(e,["color","size"]);return o.a.createElement("svg",G({ref:t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",width:r,height:r,fill:n},i),o.a.createElement("path",{fillRule:"evenodd",d:"M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"}))}));W.propTypes={color:D.a.string,size:D.a.oneOfType([D.a.string,D.a.number])},W.defaultProps={color:"currentColor",size:"1em"};var J=W;function V(e){for(var t=e.no,n=e.of,r=[],i=0;i<n;i+=1)r.push(i<=t?o.a.createElement(q,null):o.a.createElement(J,null));return o.a.createElement("div",{className:d("text-primary","display-3")},r)}var Y=function(e,t){return e+t},K=function(e){var t,n=e.recording,r=e.reference,i=n.filter((function(e){return!!e})),a=i.map((function(e){return e.frequency-r.frequency})).reduce(Y,0)/i.length,c=i.map((function(e){return Math.abs(e.note-r.note)})).reduce(Y,0)/i.length;return t=c<=.5?5:c<=1?4:c<=2?3:c<=4?2:c<=7?1:0,o.a.createElement(y.Container,null,o.a.createElement(y.Row,null,o.a.createElement(y.Col,{className:"pb-3"},o.a.createElement(V,{no:t,of:5}))),o.a.createElement(y.Row,null,o.a.createElement(y.Col,{className:d("col-md-6","offset-md-3")},o.a.createElement(y.Alert,{variant:"success"},"Received ",i.length," sample(s) averaging to ",a," from C",o.a.createElement("sub",null,"4"),"."))))};function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Z=m(),ee=function(){!function(e,t){void 0===t&&(t={disabled:!1,hasRenderSpan:!0});var n=v(r.useState((function(){if(!t||!t.disabled){var n=S();return n?n.startChild({description:"<"+e+">",op:"react.mount"}):void 0}})),1)[0];r.useEffect((function(){return n&&n.finish(),function(){n&&t.hasRenderSpan&&n.startChild({description:"<"+e+">",endTimestamp:Object(b.a)(),op:"react.render",startTimestamp:n.endTimestamp})}}),[])}("PitchDetection");var e=Q(Object(r.useState)(!1),2),t=e[0],n=e[1],i=window.AudioContext||window.webkitAudioContext,a=Q(Object(r.useState)(new i),1)[0],c=Q(Object(r.useState)(),2),u=c[0],l=c[1],s=Q(Object(r.useState)(),2),f=s[0],p=s[1],d=Q(Object(r.useState)(),2),m=d[0],h=d[1];if(Object(r.useEffect)((function(){t&&(Z.info("Acquiring microphone."),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((function(e){Z.debug("Microphone initialized with stream: %j, active?, %s, state: %s.",e,e.active,e.getAudioTracks()[0].readyState),l(e)})))}),[t]),Object(r.useEffect)((function(){return t&&void 0!==u?(Z.info("Setting up the context %j and stream %j",a,u),a.createMediaStreamSource(u),Z.info("Initialized audio."),p(function(e,t){return C(this,arguments,regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=ml5.pitchDetection(A,e,t),P.info("Created pitch detection.",r),n.next=4,_(r.ready);case 4:P.info("Initialized the model.");case 5:if(!t.active||"running"!==e.state){n.next=19;break}return n.next=8,_(r.getPitch());case 8:if(null!==(o=n.sent)){n.next=13;break}P.debug("Skipping"),n.next=17;break;case 13:return n.next=15,_(T(o));case 15:return n.next=17,n.sent;case 17:n.next=5;break;case 19:case"end":return n.stop()}}),n)})))}(a,u)),a.resume(),function(){Z.info("Cleanup the audio settings"),Z.debug("Stop all tracks in the stream %j.",u),null==u||u.getTracks().forEach((function(e){return e.stop()})),Z.debug("Suspend audio context %j.",a),a.suspend()}):function(){}}),[u,t]),void 0!==m){var g=T(j(60));return o.a.createElement(K,{recording:m,reference:g})}return t&&f?o.a.createElement(L,{onFinish:function(e){Z.info("Result, %j",e),h(e),n(!1)},pitchGenerator:f,timeoutMs:5e3}):o.a.createElement(y.Button,{onClick:function(){return n(!0)},variant:"outline-primary",size:"lg"},"click to start")},te=m(),ne=function(){return te.info("Starting app."),o.a.createElement(y.Container,null,o.a.createElement("header",{className:d("text-center","mt-5")},o.a.createElement("h1",{className:d("display-1","text-primary","title")},"vocally"),o.a.createElement("h2",{className:"text-secondary"},"sing C",o.a.createElement("sub",null,"4"),"!")),o.a.createElement("main",{className:d("text-center","py-5"),role:"main"},o.a.createElement(ee,null)),o.a.createElement("footer",{className:d("py-3","border-top","text-muted")},o.a.createElement(y.Container,null,o.a.createElement("p",null,"vocally.app 2020"))))};a.init({dsn:"https://ffe439ac65b84889a37518037a23a7b1@o433557.ingest.sentry.io/5388917",release:"testing",environment:"testing",integrations:[new c.CaptureConsole({levels:["info"]}),new a.Integrations.BrowserTracing]}),l.a.init("6ayqi7/vocallytest",{release:"testing"}),f()(l.a),i.render(r.createElement(ne,null),document.getElementById("app"))},,,function(e,t,n){"use strict";(function(e,r,o){n.d(t,"a",(function(){return p}));n(4),n(5);function i(){return"[object process]"===Object.prototype.toString.call(void 0!==e?e:0)}var a={};function c(){return i()?r:"undefined"!=typeof window?window:"undefined"!=typeof self?self:a}var u=Date.now(),l=0,s={now:function(){var e=Date.now()-u;return e<l&&(e=l),l=e,e},timeOrigin:u},f=function(){if(i())try{return(e="perf_hooks",o.require(e)).performance}catch(e){return s}var e,t=c().performance;return t&&t.now?(void 0===t.timeOrigin&&(t.timeOrigin=t.timing&&t.timing.navigationStart||u),t):s}();function p(){return(f.timeOrigin+f.now())/1e3}}).call(this,n(18),n(19),n(20)(e))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdEJvb3RzdHJhcFwiIiwid2VicGFjazovLy9leHRlcm5hbCBcIlByb3BUeXBlc1wiIiwid2VicGFjazovLy9leHRlcm5hbCBcIlNlbnRyeVwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ac2VudHJ5L3V0aWxzL2VzbS9pcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS91dGlscy9lc20vc3RyaW5nLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIlJlYWN0RE9NXCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiTG9nUm9ja2V0XCIiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiU2VudHJ5LkludGVncmF0aW9uc1wiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9sb2dyb2NrZXQtcmVhY3QvZGlzdC9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvaG9pc3Qtbm9uLXJlYWN0LXN0YXRpY3MvZGlzdC9ob2lzdC1ub24tcmVhY3Qtc3RhdGljcy5janMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC5jc3MiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3N0eWxlLWxvYWRlci9kaXN0L3J1bnRpbWUvaW5qZWN0U3R5bGVzSW50b1N0eWxlVGFnLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIm1sNVwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1pcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtaXMvY2pzL3JlYWN0LWlzLnByb2R1Y3Rpb24ubWluLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9ub2RlLWxpYnMtYnJvd3Nlci9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8od2VicGFjaykvYnVpbGRpbi9nbG9iYWwuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2hhcm1vbnktbW9kdWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9jbHN4L2Rpc3QvY2xzeC5tLmpzIiwid2VicGFjazovLy8uL3NyYy9sb2cudGVzdGluZy50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQHNlbnRyeS9yZWFjdC9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ac2VudHJ5L3JlYWN0L2VzbS9wcm9maWxlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcGl0Y2gvbm90ZXMudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BpdGNoL3BpdGNoLnRzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL0dlbmVyYXRvckNvbXBvbmVudC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUGl0Y2hSZWNvcmRlci50c3giLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC1pY29ucy9kaXN0L2ljb25zL3N0YXItZmlsbC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwLWljb25zL2Rpc3QvaWNvbnMvc3Rhci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9TdW1tYXJ5LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9QaXRjaERldGVjdGlvbi50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2luaXQudGVzdGluZy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHN4Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9Ac2VudHJ5L3V0aWxzL2VzbS9taXNjLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiUmVhY3QiLCJSZWFjdEJvb3RzdHJhcCIsIlByb3BUeXBlcyIsIlNlbnRyeSIsImlzU3RyaW5nIiwid2F0IiwidG9TdHJpbmciLCJpc1JlZ0V4cCIsInNuaXBMaW5lIiwibGluZSIsImNvbG5vIiwibmV3TGluZSIsImxsIiwibGVuZ3RoIiwic3RhcnQiLCJNYXRoIiwibWF4IiwiZW5kIiwibWluIiwic2xpY2UiLCJSZWFjdERPTSIsIkxvZ1JvY2tldCIsIkludGVncmF0aW9ucyIsImRlZmF1bHQiLCJpbmplY3RFdmVudFBsdWdpbnNCeU5hbWUiLCJSZXNwb25kZXJFdmVudFBsdWdpbiIsImV4dHJhY3RFdmVudHMiLCJ0b3BMZXZlbFR5cGUiLCJ0YXJnZXRJbnN0IiwiZmliZXJOb2RlIiwibmF0aXZlRXZlbnQiLCJjdXJyZW50RWxlbWVudCIsIm5hbWVzIiwiZWxlbWVudFR5cGUiLCJkaXNwbGF5TmFtZSIsInB1c2giLCJyZXR1cm4iLCJfX2xyTmFtZSIsImVycm9yIiwiY29uc29sZSIsIl9yZWFjdERvbSIsInNlY3JldCIsIl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEIiwiRXZlbnRzIiwid2FybiIsInJlYWN0SXMiLCJSRUFDVF9TVEFUSUNTIiwiY2hpbGRDb250ZXh0VHlwZXMiLCJjb250ZXh0VHlwZSIsImNvbnRleHRUeXBlcyIsImRlZmF1bHRQcm9wcyIsImdldERlZmF1bHRQcm9wcyIsImdldERlcml2ZWRTdGF0ZUZyb21FcnJvciIsImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsIm1peGlucyIsInByb3BUeXBlcyIsInR5cGUiLCJLTk9XTl9TVEFUSUNTIiwiY2FsbGVyIiwiY2FsbGVlIiwiYXJndW1lbnRzIiwiYXJpdHkiLCJNRU1PX1NUQVRJQ1MiLCJjb21wYXJlIiwiVFlQRV9TVEFUSUNTIiwiZ2V0U3RhdGljcyIsImNvbXBvbmVudCIsImlzTWVtbyIsIkZvcndhcmRSZWYiLCJyZW5kZXIiLCJNZW1vIiwiZ2V0T3duUHJvcGVydHlOYW1lcyIsImdldE93blByb3BlcnR5U3ltYm9scyIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImdldFByb3RvdHlwZU9mIiwib2JqZWN0UHJvdG90eXBlIiwiaG9pc3ROb25SZWFjdFN0YXRpY3MiLCJ0YXJnZXRDb21wb25lbnQiLCJzb3VyY2VDb21wb25lbnQiLCJibGFja2xpc3QiLCJpbmhlcml0ZWRDb21wb25lbnQiLCJrZXlzIiwiY29uY2F0IiwidGFyZ2V0U3RhdGljcyIsInNvdXJjZVN0YXRpY3MiLCJkZXNjcmlwdG9yIiwiZSIsImFwaSIsImNvbnRlbnQiLCJvcHRpb25zIiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwid2luZG93IiwiZG9jdW1lbnQiLCJhbGwiLCJhdG9iIiwiZ2V0VGFyZ2V0IiwidGFyZ2V0Iiwic3R5bGVUYXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwiSFRNTElGcmFtZUVsZW1lbnQiLCJjb250ZW50RG9jdW1lbnQiLCJoZWFkIiwic3R5bGVzSW5Eb20iLCJnZXRJbmRleEJ5SWRlbnRpZmllciIsImlkZW50aWZpZXIiLCJyZXN1bHQiLCJtb2R1bGVzVG9Eb20iLCJsaXN0IiwiaWRDb3VudE1hcCIsImlkZW50aWZpZXJzIiwiaXRlbSIsImlkIiwiYmFzZSIsImNvdW50IiwiaW5kZXgiLCJvYmoiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInJlZmVyZW5jZXMiLCJ1cGRhdGVyIiwiYWRkU3R5bGUiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZSIsImNyZWF0ZUVsZW1lbnQiLCJhdHRyaWJ1dGVzIiwibm9uY2UiLCJmb3JFYWNoIiwic2V0QXR0cmlidXRlIiwiaW5zZXJ0IiwiRXJyb3IiLCJhcHBlbmRDaGlsZCIsInRleHRTdG9yZSIsInJlcGxhY2VUZXh0IiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJqb2luIiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsInJlbW92ZSIsInN0eWxlU2hlZXQiLCJjc3NUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsIm5ld0xhc3RJZGVudGlmaWVycyIsIl9pIiwiX2luZGV4Iiwic3BsaWNlIiwibWw1IiwiYiIsImZvciIsImYiLCJnIiwiaCIsImsiLCJxIiwidiIsInciLCJ4IiwieSIsInoiLCJhIiwidSIsIiQkdHlwZW9mIiwiQSIsIkFzeW5jTW9kZSIsIkNvbmN1cnJlbnRNb2RlIiwiQ29udGV4dENvbnN1bWVyIiwiQ29udGV4dFByb3ZpZGVyIiwiRWxlbWVudCIsIkZyYWdtZW50IiwiTGF6eSIsIlBvcnRhbCIsIlByb2ZpbGVyIiwiU3RyaWN0TW9kZSIsIlN1c3BlbnNlIiwiaXNBc3luY01vZGUiLCJpc0NvbmN1cnJlbnRNb2RlIiwiaXNDb250ZXh0Q29uc3VtZXIiLCJpc0NvbnRleHRQcm92aWRlciIsImlzRWxlbWVudCIsImlzRm9yd2FyZFJlZiIsImlzRnJhZ21lbnQiLCJpc0xhenkiLCJpc1BvcnRhbCIsImlzUHJvZmlsZXIiLCJpc1N0cmljdE1vZGUiLCJpc1N1c3BlbnNlIiwiaXNWYWxpZEVsZW1lbnRUeXBlIiwidHlwZU9mIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsInByb2Nlc3MiLCJkZWZhdWx0U2V0VGltb3V0IiwiZGVmYXVsdENsZWFyVGltZW91dCIsInJ1blRpbWVvdXQiLCJmdW4iLCJzZXRUaW1lb3V0IiwidGhpcyIsImNsZWFyVGltZW91dCIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiZHJhaW5pbmciLCJxdWV1ZUluZGV4IiwiY2xlYW5VcE5leHRUaWNrIiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJsZW4iLCJydW4iLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJub29wIiwibmV4dFRpY2siLCJhcmdzIiwiQXJyYXkiLCJhcHBseSIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsIkZ1bmN0aW9uIiwib3JpZ2luYWxNb2R1bGUiLCJ3ZWJwYWNrUG9seWZpbGwiLCJjaGlsZHJlbiIsInRvVmFsIiwibWl4Iiwic3RyIiwiaXNBcnJheSIsInRtcCIsImV4dGVuZFN0YXRpY3MiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIl9fcmVhZCIsIml0ZXJhdG9yIiwiYXIiLCJuZXh0IiwiZG9uZSIsIlRSQUNJTkdfR0VUVEVSIiwiZ2xvYmFsVHJhY2luZ0ludGVncmF0aW9uIiwiX3N1cGVyIiwicHJvcHMiLCJfdGhpcyIsIl9tb3VudEFjdGl2aXR5IiwiX21vdW50U3BhbiIsInVuZGVmaW5lZCIsIl9hIiwiX2IiLCJkaXNhYmxlZCIsImdldEludGVncmF0aW9uIiwib3AiLCJjb25zdHJ1Y3RvciIsInB1c2hBY3Rpdml0eSIsImRlc2NyaXB0aW9uIiwiYWN0aXZlVHJhbnNhY3Rpb24iLCJnZXRBY3RpdmVUcmFuc2FjdGlvbiIsInN0YXJ0Q2hpbGQiLCJfXyIsIl9fZXh0ZW5kcyIsImNvbXBvbmVudERpZE1vdW50IiwiYWN0aXZpdHkiLCJmaW5pc2giLCJnZXRBY3Rpdml0eVNwYW4iLCJwb3BBY3Rpdml0eSIsImNvbXBvbmVudERpZFVwZGF0ZSIsInVwZGF0ZVByb3BzIiwiaW5jbHVkZVVwZGF0ZXMiLCJjaGFuZ2VkUHJvcHMiLCJub3ciLCJkYXRhIiwiZW5kVGltZXN0YW1wIiwic3RhcnRUaW1lc3RhbXAiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImluY2x1ZGVSZW5kZXIiLCJodWIiLCJzY29wZSIsImdldFNjb3BlIiwiZ2V0VHJhbnNhY3Rpb24iLCJub3RlcyIsIm5vdGVUb0ZyZXEiLCJub3RlIiwiZnJlcVRvTm90ZSIsImZyZXEiLCJsb2cyIiwiTm90ZSIsIl9mcmVxIiwicm91bmQiLCJmcmVxdWVuY3kiLCJvY3RhdmUiLCJmbG9vciIsImRpZmYiLCJMT0ciLCJNT0RFTF9VUkwiLCJmbGFnIiwic2V0RmxhZyIsImN1cnJlbnRWYWx1ZSIsInNldEN1cnJlbnRWYWx1ZSIsIm1vdW50ZWQiLCJnZW5lcmF0b3IiLCJ0aGVuIiwib25UaWNrIiwiUGl0Y2hSZWNvcmRlciIsInBpdGNoR2VuZXJhdG9yIiwidGltZW91dE1zIiwib25GaW5pc2giLCJyZWNvcmRpbmciLCJzZXRSZWNvcmRpbmciLCJzdGFydGVkIiwic2V0U3RhcnRlZCIsImZpbmlzaGVkIiwic2V0RmluaXNoZWQiLCJpbmZvIiwibGFiZWwiLCJhbmltYXRpb24iLCJ2YXJpYW50IiwibmV3UmVjb3JkaW5nIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJzb3VyY2UiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMiLCJleGNsdWRlZCIsInNvdXJjZUtleXMiLCJpbmRleE9mIiwiX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UiLCJzb3VyY2VTeW1ib2xLZXlzIiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJTdGFyRmlsbCIsIl9yZWYiLCJyZWYiLCJjb2xvciIsInNpemUiLCJyZXN0IiwieG1sbnMiLCJ2aWV3Qm94Iiwid2lkdGgiLCJoZWlnaHQiLCJmaWxsIiwic3RyaW5nIiwib25lT2ZUeXBlIiwibnVtYmVyIiwiU3RhciIsImZpbGxSdWxlIiwiUmF0aW5nIiwibm8iLCJvZiIsInN0YXJzIiwiY2xhc3NOYW1lIiwic3VtIiwic3RhckNvdW50IiwicmVmZXJlbmNlIiwibm9uRW1wdHkiLCJmcmVxUmVzdWx0IiwibWFwIiwicmVkdWNlIiwibWlkaVJlc3VsdCIsImFicyIsImhhc1JlbmRlclNwYW4iLCJtb3VudFNwYW4iLCJzZXRJc1N0YXJ0ZWQiLCJBdWRpb0N0eCIsIkF1ZGlvQ29udGV4dCIsIndlYmtpdEF1ZGlvQ29udGV4dCIsImF1ZGlvQ29udGV4dCIsInN0cmVhbSIsInNldFN0cmVhbSIsInBpdGNoRGV0ZWN0aW9uR2VuZXJhdG9yIiwic2V0UGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IiLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJhdWRpbyIsInZpZGVvIiwibmV3U3RyZWFtIiwiZGVidWciLCJhY3RpdmUiLCJnZXRBdWRpb1RyYWNrcyIsInJlYWR5U3RhdGUiLCJjcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSIsImN0eCIsInBpdGNoRGV0ZWN0aW9uIiwicmVhZHkiLCJzdGF0ZSIsImdldFBpdGNoIiwicGl0Y2giLCJtbDVQaXRjaERldGVjdGlvbiIsInJlc3VtZSIsImdldFRyYWNrcyIsInN0b3AiLCJzdXNwZW5kIiwicmVmZXJlbmNlUGl0Y2giLCJTdW1tYXJ5Iiwib25DbGljayIsInJvbGUiLCJkc24iLCJyZWxlYXNlIiwiZW52aXJvbm1lbnQiLCJpbnRlZ3JhdGlvbnMiLCJsZXZlbHMiLCJCcm93c2VyVHJhY2luZyIsImluaXQiLCJnZXRFbGVtZW50QnlJZCIsImlzTm9kZUVudiIsImZhbGxiYWNrR2xvYmFsT2JqZWN0IiwiZ2V0R2xvYmFsT2JqZWN0IiwiZ2xvYmFsIiwic2VsZiIsIklOSVRJQUxfVElNRSIsIkRhdGUiLCJwcmV2Tm93IiwicGVyZm9ybWFuY2VGYWxsYmFjayIsInRpbWVPcmlnaW4iLCJjcm9zc1BsYXRmb3JtUGVyZm9ybWFuY2UiLCJyZXF1ZXN0IiwicmVxdWlyZSIsInBlcmZvcm1hbmNlIiwiXyIsInRpbWluZyIsIm5hdmlnYXRpb25TdGFydCIsInRpbWVzdGFtcFdpdGhNcyJdLCJtYXBwaW5ncyI6ImFBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBS2ZGLEVBQW9CUSxFQUFJRixFQUd4Qk4sRUFBb0JTLEVBQUlWLEVBR3hCQyxFQUFvQlUsRUFBSSxTQUFTUixFQUFTUyxFQUFNQyxHQUMzQ1osRUFBb0JhLEVBQUVYLEVBQVNTLElBQ2xDRyxPQUFPQyxlQUFlYixFQUFTUyxFQUFNLENBQUVLLFlBQVksRUFBTUMsSUFBS0wsS0FLaEVaLEVBQW9Ca0IsRUFBSSxTQUFTaEIsR0FDWCxvQkFBWGlCLFFBQTBCQSxPQUFPQyxhQUMxQ04sT0FBT0MsZUFBZWIsRUFBU2lCLE9BQU9DLFlBQWEsQ0FBRUMsTUFBTyxXQUU3RFAsT0FBT0MsZUFBZWIsRUFBUyxhQUFjLENBQUVtQixPQUFPLEtBUXZEckIsRUFBb0JzQixFQUFJLFNBQVNE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LEVBQXNCLENBQ3RCN0ksSUFBSyxXQUNELElBQUlBLEVBQU0ySSxLQUFLM0ksTUFBUTBJLEVBS3ZCLE9BSkkxSSxFQUFNNEksSUFDTjVJLEVBQU00SSxHQUVWQSxFQUFVNUksRUFDSEEsR0FFWDhJLFdBQVlKLEdBRUxLLEVBQTJCLFdBQ2xDLEdBQUlWLElBQ0EsSUFFSSxPQWpSd0JXLEVBZ1JlLGFBQVJyZSxFQTlRNUJzZSxRQUFRRCxJQStRTUUsWUFFckIsTUFBT0MsR0FDSCxPQUFPTixFQXBSWixJQUE2QkcsRUF1UjVCRSxFQUFjWCxJQUFrQlcsWUFDcEMsT0FBS0EsR0FBZ0JBLEVBQVlsSixVQU9GdkIsSUFBM0J5SyxFQUFZSixhQUtaSSxFQUFZSixXQUFjSSxFQUFZRSxRQUFVRixFQUFZRSxPQUFPQyxpQkFBb0JYLEdBRXBGUSxHQWJJTCxFQVp1QixHQThCL0IsU0FBU1MsSUFDWixPQUFRUCxFQUF5QkQsV0FBYUMsRUFBeUIvSSxPQUFTLE8iLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAyMSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0OyIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3RCb290c3RyYXA7IiwibW9kdWxlLmV4cG9ydHMgPSBQcm9wVHlwZXM7IiwibW9kdWxlLmV4cG9ydHMgPSBTZW50cnk7IiwiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqL1xuLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlcyAqL1xuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgb25lIG9mIGEgZmV3IEVycm9yIG9yIEVycm9yLWxpa2VcbiAqIHtAbGluayBpc0Vycm9yfS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRXJyb3Iod2F0KSB7XG4gICAgc3dpdGNoIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2F0KSkge1xuICAgICAgICBjYXNlICdbb2JqZWN0IEVycm9yXSc6XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgY2FzZSAnW29iamVjdCBFeGNlcHRpb25dJzpcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICBjYXNlICdbb2JqZWN0IERPTUV4Y2VwdGlvbl0nOlxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gaXNJbnN0YW5jZU9mKHdhdCwgRXJyb3IpO1xuICAgIH1cbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIEVycm9yRXZlbnRcbiAqIHtAbGluayBpc0Vycm9yRXZlbnR9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFcnJvckV2ZW50KHdhdCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2F0KSA9PT0gJ1tvYmplY3QgRXJyb3JFdmVudF0nO1xufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgRE9NRXJyb3JcbiAqIHtAbGluayBpc0RPTUVycm9yfS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRE9NRXJyb3Iod2F0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3YXQpID09PSAnW29iamVjdCBET01FcnJvcl0nO1xufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgRE9NRXhjZXB0aW9uXG4gKiB7QGxpbmsgaXNET01FeGNlcHRpb259LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNET01FeGNlcHRpb24od2F0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3YXQpID09PSAnW29iamVjdCBET01FeGNlcHRpb25dJztcbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGEgc3RyaW5nXG4gKiB7QGxpbmsgaXNTdHJpbmd9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcod2F0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3YXQpID09PSAnW29iamVjdCBTdHJpbmddJztcbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyBpcyBhIHByaW1pdGl2ZSAodW5kZWZpbmVkLCBudWxsLCBudW1iZXIsIGJvb2xlYW4sIHN0cmluZylcbiAqIHtAbGluayBpc1ByaW1pdGl2ZX0uXG4gKlxuICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1ByaW1pdGl2ZSh3YXQpIHtcbiAgICByZXR1cm4gd2F0ID09PSBudWxsIHx8ICh0eXBlb2Ygd2F0ICE9PSAnb2JqZWN0JyAmJiB0eXBlb2Ygd2F0ICE9PSAnZnVuY3Rpb24nKTtcbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUncyB0eXBlIGlzIGFuIG9iamVjdCBsaXRlcmFsXG4gKiB7QGxpbmsgaXNQbGFpbk9iamVjdH0uXG4gKlxuICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHdhdCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2F0KSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG59XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBFdmVudCBpbnN0YW5jZVxuICoge0BsaW5rIGlzRXZlbnR9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNFdmVudCh3YXQpIHtcbiAgICByZXR1cm4gdHlwZW9mIEV2ZW50ICE9PSAndW5kZWZpbmVkJyAmJiBpc0luc3RhbmNlT2Yod2F0LCBFdmVudCk7XG59XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhbiBFbGVtZW50IGluc3RhbmNlXG4gKiB7QGxpbmsgaXNFbGVtZW50fS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEByZXR1cm5zIEEgYm9vbGVhbiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzRWxlbWVudCh3YXQpIHtcbiAgICByZXR1cm4gdHlwZW9mIEVsZW1lbnQgIT09ICd1bmRlZmluZWQnICYmIGlzSW5zdGFuY2VPZih3YXQsIEVsZW1lbnQpO1xufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gcmVnZXhwXG4gKiB7QGxpbmsgaXNSZWdFeHB9LlxuICpcbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNSZWdFeHAod2F0KSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3YXQpID09PSAnW29iamVjdCBSZWdFeHBdJztcbn1cbi8qKlxuICogQ2hlY2tzIHdoZXRoZXIgZ2l2ZW4gdmFsdWUgaGFzIGEgdGhlbiBmdW5jdGlvbi5cbiAqIEBwYXJhbSB3YXQgQSB2YWx1ZSB0byBiZSBjaGVja2VkLlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNUaGVuYWJsZSh3YXQpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVuc2FmZS1tZW1iZXItYWNjZXNzXG4gICAgcmV0dXJuIEJvb2xlYW4od2F0ICYmIHdhdC50aGVuICYmIHR5cGVvZiB3YXQudGhlbiA9PT0gJ2Z1bmN0aW9uJyk7XG59XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIGdpdmVuIHZhbHVlJ3MgdHlwZSBpcyBhIFN5bnRoZXRpY0V2ZW50XG4gKiB7QGxpbmsgaXNTeW50aGV0aWNFdmVudH0uXG4gKlxuICogQHBhcmFtIHdhdCBBIHZhbHVlIHRvIGJlIGNoZWNrZWQuXG4gKiBAcmV0dXJucyBBIGJvb2xlYW4gcmVwcmVzZW50aW5nIHRoZSByZXN1bHQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1N5bnRoZXRpY0V2ZW50KHdhdCkge1xuICAgIHJldHVybiBpc1BsYWluT2JqZWN0KHdhdCkgJiYgJ25hdGl2ZUV2ZW50JyBpbiB3YXQgJiYgJ3ByZXZlbnREZWZhdWx0JyBpbiB3YXQgJiYgJ3N0b3BQcm9wYWdhdGlvbicgaW4gd2F0O1xufVxuLyoqXG4gKiBDaGVja3Mgd2hldGhlciBnaXZlbiB2YWx1ZSdzIHR5cGUgaXMgYW4gaW5zdGFuY2Ugb2YgcHJvdmlkZWQgY29uc3RydWN0b3IuXG4gKiB7QGxpbmsgaXNJbnN0YW5jZU9mfS5cbiAqXG4gKiBAcGFyYW0gd2F0IEEgdmFsdWUgdG8gYmUgY2hlY2tlZC5cbiAqIEBwYXJhbSBiYXNlIEEgY29uc3RydWN0b3IgdG8gYmUgdXNlZCBpbiBhIGNoZWNrLlxuICogQHJldHVybnMgQSBib29sZWFuIHJlcHJlc2VudGluZyB0aGUgcmVzdWx0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gaXNJbnN0YW5jZU9mKHdhdCwgYmFzZSkge1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiB3YXQgaW5zdGFuY2VvZiBiYXNlO1xuICAgIH1cbiAgICBjYXRjaCAoX2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWlzLmpzLm1hcCIsImltcG9ydCB7IGlzUmVnRXhwLCBpc1N0cmluZyB9IGZyb20gJy4vaXMnO1xuLyoqXG4gKiBUcnVuY2F0ZXMgZ2l2ZW4gc3RyaW5nIHRvIHRoZSBtYXhpbXVtIGNoYXJhY3RlcnMgY291bnRcbiAqXG4gKiBAcGFyYW0gc3RyIEFuIG9iamVjdCB0aGF0IGNvbnRhaW5zIHNlcmlhbGl6YWJsZSB2YWx1ZXNcbiAqIEBwYXJhbSBtYXggTWF4aW11bSBudW1iZXIgb2YgY2hhcmFjdGVycyBpbiB0cnVuY2F0ZWQgc3RyaW5nXG4gKiBAcmV0dXJucyBzdHJpbmcgRW5jb2RlZFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ1bmNhdGUoc3RyLCBtYXgpIHtcbiAgICBpZiAobWF4ID09PSB2b2lkIDApIHsgbWF4ID0gMDsgfVxuICAgIGlmICh0eXBlb2Ygc3RyICE9PSAnc3RyaW5nJyB8fCBtYXggPT09IDApIHtcbiAgICAgICAgcmV0dXJuIHN0cjtcbiAgICB9XG4gICAgcmV0dXJuIHN0ci5sZW5ndGggPD0gbWF4ID8gc3RyIDogc3RyLnN1YnN0cigwLCBtYXgpICsgXCIuLi5cIjtcbn1cbi8qKlxuICogVGhpcyBpcyBiYXNpY2FsbHkganVzdCBgdHJpbV9saW5lYCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ2V0c2VudHJ5L3NlbnRyeS9ibG9iL21hc3Rlci9zcmMvc2VudHJ5L2xhbmcvamF2YXNjcmlwdC9wcm9jZXNzb3IucHkjTDY3XG4gKlxuICogQHBhcmFtIHN0ciBBbiBvYmplY3QgdGhhdCBjb250YWlucyBzZXJpYWxpemFibGUgdmFsdWVzXG4gKiBAcGFyYW0gbWF4IE1heGltdW0gbnVtYmVyIG9mIGNoYXJhY3RlcnMgaW4gdHJ1bmNhdGVkIHN0cmluZ1xuICogQHJldHVybnMgc3RyaW5nIEVuY29kZWRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNuaXBMaW5lKGxpbmUsIGNvbG5vKSB7XG4gICAgdmFyIG5ld0xpbmUgPSBsaW5lO1xuICAgIHZhciBsbCA9IG5ld0xpbmUubGVuZ3RoO1xuICAgIGlmIChsbCA8PSAxNTApIHtcbiAgICAgICAgcmV0dXJuIG5ld0xpbmU7XG4gICAgfVxuICAgIGlmIChjb2xubyA+IGxsKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1wYXJhbS1yZWFzc2lnblxuICAgICAgICBjb2xubyA9IGxsO1xuICAgIH1cbiAgICB2YXIgc3RhcnQgPSBNYXRoLm1heChjb2xubyAtIDYwLCAwKTtcbiAgICBpZiAoc3RhcnQgPCA1KSB7XG4gICAgICAgIHN0YXJ0ID0gMDtcbiAgICB9XG4gICAgdmFyIGVuZCA9IE1hdGgubWluKHN0YXJ0ICsgMTQwLCBsbCk7XG4gICAgaWYgKGVuZCA+IGxsIC0gNSkge1xuICAgICAgICBlbmQgPSBsbDtcbiAgICB9XG4gICAgaWYgKGVuZCA9PT0gbGwpIHtcbiAgICAgICAgc3RhcnQgPSBNYXRoLm1heChlbmQgLSAxNDAsIDApO1xuICAgIH1cbiAgICBuZXdMaW5lID0gbmV3TGluZS5zbGljZShzdGFydCwgZW5kKTtcbiAgICBpZiAoc3RhcnQgPiAwKSB7XG4gICAgICAgIG5ld0xpbmUgPSBcIid7c25pcH0gXCIgKyBuZXdMaW5lO1xuICAgIH1cbiAgICBpZiAoZW5kIDwgbGwpIHtcbiAgICAgICAgbmV3TGluZSArPSAnIHtzbmlwfSc7XG4gICAgfVxuICAgIHJldHVybiBuZXdMaW5lO1xufVxuLyoqXG4gKiBKb2luIHZhbHVlcyBpbiBhcnJheVxuICogQHBhcmFtIGlucHV0IGFycmF5IG9mIHZhbHVlcyB0byBiZSBqb2luZWQgdG9nZXRoZXJcbiAqIEBwYXJhbSBkZWxpbWl0ZXIgc3RyaW5nIHRvIGJlIHBsYWNlZCBpbi1iZXR3ZWVuIHZhbHVlc1xuICogQHJldHVybnMgSm9pbmVkIHZhbHVlc1xuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZXhwb3J0IGZ1bmN0aW9uIHNhZmVKb2luKGlucHV0LCBkZWxpbWl0ZXIpIHtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG4gICAgdmFyIG91dHB1dCA9IFtdO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvcHJlZmVyLWZvci1vZlxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaW5wdXRbaV07XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBvdXRwdXQucHVzaChTdHJpbmcodmFsdWUpKTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgb3V0cHV0LnB1c2goJ1t2YWx1ZSBjYW5ub3QgYmUgc2VyaWFsaXplZF0nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb3V0cHV0LmpvaW4oZGVsaW1pdGVyKTtcbn1cbi8qKlxuICogQ2hlY2tzIGlmIHRoZSB2YWx1ZSBtYXRjaGVzIGEgcmVnZXggb3IgaW5jbHVkZXMgdGhlIHN0cmluZ1xuICogQHBhcmFtIHZhbHVlIFRoZSBzdHJpbmcgdmFsdWUgdG8gYmUgY2hlY2tlZCBhZ2FpbnN0XG4gKiBAcGFyYW0gcGF0dGVybiBFaXRoZXIgYSByZWdleCBvciBhIHN0cmluZyB0aGF0IG11c3QgYmUgY29udGFpbmVkIGluIHZhbHVlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc01hdGNoaW5nUGF0dGVybih2YWx1ZSwgcGF0dGVybikge1xuICAgIGlmICghaXNTdHJpbmcodmFsdWUpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKGlzUmVnRXhwKHBhdHRlcm4pKSB7XG4gICAgICAgIHJldHVybiBwYXR0ZXJuLnRlc3QodmFsdWUpO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHBhdHRlcm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZS5pbmRleE9mKHBhdHRlcm4pICE9PSAtMTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3RyaW5nLmpzLm1hcCIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3RET007IiwibW9kdWxlLmV4cG9ydHMgPSBMb2dSb2NrZXQ7IiwibW9kdWxlLmV4cG9ydHMgPSBTZW50cnkuSW50ZWdyYXRpb25zOyIsIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG4gIHZhbHVlOiB0cnVlXG59KTtcbmV4cG9ydHMuZGVmYXVsdCA9IHNldHVwUmVhY3Q7XG5cbnZhciBfcmVhY3REb20gPSByZXF1aXJlKCdyZWFjdC1kb20nKTtcblxudmFyIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSA9IHZvaWQgMDtcbi8vIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvdjE2LjUuMS9wYWNrYWdlcy9yZWFjdC1kb20vc3JjL2NsaWVudC9SZWFjdERPTS5qcyNMNzUwXG52YXIgc2VjcmV0ID0gX3JlYWN0RG9tLl9fU0VDUkVUX0lOVEVSTkFMU19ET19OT1RfVVNFX09SX1lPVV9XSUxMX0JFX0ZJUkVEO1xuaWYgKHNlY3JldCAmJiBzZWNyZXQuRXZlbnRzICYmIHNlY3JldC5FdmVudHNbM10pIHtcbiAgaW5qZWN0RXZlbnRQbHVnaW5zQnlOYW1lID0gc2VjcmV0LkV2ZW50c1szXTtcbn0gZWxzZSB7XG4gIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSA9IGZ1bmN0aW9uIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSgpIHtcbiAgICBjb25zb2xlLndhcm4oJ2xvZ3JvY2tldC1yZWFjdCBkb2VzIG5vdCB3b3JrIHdpdGggdGhpcyB2ZXJzaW9uIG9mIFJlYWN0Jyk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNldHVwUmVhY3QoKSB7XG4gIGluamVjdEV2ZW50UGx1Z2luc0J5TmFtZSh7XG4gICAgUmVzcG9uZGVyRXZlbnRQbHVnaW46IHtcbiAgICAgIGV4dHJhY3RFdmVudHM6IGZ1bmN0aW9uIGxvZ1JvY2tldFJlYWN0RXZlbnRIb29rKHRvcExldmVsVHlwZSwgdGFyZ2V0SW5zdCwgZmliZXJOb2RlLCBuYXRpdmVFdmVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGlmICh0b3BMZXZlbFR5cGUgIT09ICdjbGljaycgfHwgIWZpYmVyTm9kZSB8fCAhbmF0aXZlRXZlbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgY3VycmVudEVsZW1lbnQgPSBmaWJlck5vZGU7XG5cbiAgICAgICAgICB2YXIgbmFtZXMgPSBbXTtcbiAgICAgICAgICB3aGlsZSAoY3VycmVudEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHZhciBuYW1lID0gdHlwZW9mIGN1cnJlbnRFbGVtZW50LmVsZW1lbnRUeXBlID09PSAnZnVuY3Rpb24nICYmIGN1cnJlbnRFbGVtZW50LmVsZW1lbnRUeXBlLmRpc3BsYXlOYW1lO1xuICAgICAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgICAgbmFtZXMucHVzaChuYW1lKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJlbnRFbGVtZW50ID0gY3VycmVudEVsZW1lbnQucmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICBuYXRpdmVFdmVudC5fX2xyTmFtZSA9IG5hbWVzO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ2xvZ3JvY2tldC1yZWFjdCBjYXVnaHQgYW4gZXJyb3Igd2hpbGUgaG9va2luZyBpbnRvIFJlYWN0LiBQbGVhc2UgbWFrZSBzdXJlIHlvdSBhcmUgdXNpbmcgdGhlIGNvcnJlY3QgdmVyc2lvbiBvZiBsb2dyb2NrZXQtcmVhY3QgZm9yIHlvdXIgdmVyc2lvbiBvZiByZWFjdC1kb20uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufVxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzWydkZWZhdWx0J107IiwiJ3VzZSBzdHJpY3QnO1xuXG52YXIgcmVhY3RJcyA9IHJlcXVpcmUoJ3JlYWN0LWlzJyk7XG5cbi8qKlxuICogQ29weXJpZ2h0IDIwMTUsIFlhaG9vISBJbmMuXG4gKiBDb3B5cmlnaHRzIGxpY2Vuc2VkIHVuZGVyIHRoZSBOZXcgQlNEIExpY2Vuc2UuIFNlZSB0aGUgYWNjb21wYW55aW5nIExJQ0VOU0UgZmlsZSBmb3IgdGVybXMuXG4gKi9cbnZhciBSRUFDVF9TVEFUSUNTID0ge1xuICBjaGlsZENvbnRleHRUeXBlczogdHJ1ZSxcbiAgY29udGV4dFR5cGU6IHRydWUsXG4gIGNvbnRleHRUeXBlczogdHJ1ZSxcbiAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgZ2V0RGVmYXVsdFByb3BzOiB0cnVlLFxuICBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3I6IHRydWUsXG4gIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wczogdHJ1ZSxcbiAgbWl4aW5zOiB0cnVlLFxuICBwcm9wVHlwZXM6IHRydWUsXG4gIHR5cGU6IHRydWVcbn07XG52YXIgS05PV05fU1RBVElDUyA9IHtcbiAgbmFtZTogdHJ1ZSxcbiAgbGVuZ3RoOiB0cnVlLFxuICBwcm90b3R5cGU6IHRydWUsXG4gIGNhbGxlcjogdHJ1ZSxcbiAgY2FsbGVlOiB0cnVlLFxuICBhcmd1bWVudHM6IHRydWUsXG4gIGFyaXR5OiB0cnVlXG59O1xudmFyIEZPUldBUkRfUkVGX1NUQVRJQ1MgPSB7XG4gICckJHR5cGVvZic6IHRydWUsXG4gIHJlbmRlcjogdHJ1ZSxcbiAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgcHJvcFR5cGVzOiB0cnVlXG59O1xudmFyIE1FTU9fU1RBVElDUyA9IHtcbiAgJyQkdHlwZW9mJzogdHJ1ZSxcbiAgY29tcGFyZTogdHJ1ZSxcbiAgZGVmYXVsdFByb3BzOiB0cnVlLFxuICBkaXNwbGF5TmFtZTogdHJ1ZSxcbiAgcHJvcFR5cGVzOiB0cnVlLFxuICB0eXBlOiB0cnVlXG59O1xudmFyIFRZUEVfU1RBVElDUyA9IHt9O1xuVFlQRV9TVEFUSUNTW3JlYWN0SXMuRm9yd2FyZFJlZl0gPSBGT1JXQVJEX1JFRl9TVEFUSUNTO1xuVFlQRV9TVEFUSUNTW3JlYWN0SXMuTWVtb10gPSBNRU1PX1NUQVRJQ1M7XG5cbmZ1bmN0aW9uIGdldFN0YXRpY3MoY29tcG9uZW50KSB7XG4gIC8vIFJlYWN0IHYxNi4xMSBhbmQgYmVsb3dcbiAgaWYgKHJlYWN0SXMuaXNNZW1vKGNvbXBvbmVudCkpIHtcbiAgICByZXR1cm4gTUVNT19TVEFUSUNTO1xuICB9IC8vIFJlYWN0IHYxNi4xMiBhbmQgYWJvdmVcblxuXG4gIHJldHVybiBUWVBFX1NUQVRJQ1NbY29tcG9uZW50WyckJHR5cGVvZiddXSB8fCBSRUFDVF9TVEFUSUNTO1xufVxuXG52YXIgZGVmaW5lUHJvcGVydHkgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgZ2V0T3duUHJvcGVydHlOYW1lcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzO1xudmFyIGdldE93blByb3BlcnR5U3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcjtcbnZhciBnZXRQcm90b3R5cGVPZiA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcbnZhciBvYmplY3RQcm90b3R5cGUgPSBPYmplY3QucHJvdG90eXBlO1xuZnVuY3Rpb24gaG9pc3ROb25SZWFjdFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50LCBzb3VyY2VDb21wb25lbnQsIGJsYWNrbGlzdCkge1xuICBpZiAodHlwZW9mIHNvdXJjZUNvbXBvbmVudCAhPT0gJ3N0cmluZycpIHtcbiAgICAvLyBkb24ndCBob2lzdCBvdmVyIHN0cmluZyAoaHRtbCkgY29tcG9uZW50c1xuICAgIGlmIChvYmplY3RQcm90b3R5cGUpIHtcbiAgICAgIHZhciBpbmhlcml0ZWRDb21wb25lbnQgPSBnZXRQcm90b3R5cGVPZihzb3VyY2VDb21wb25lbnQpO1xuXG4gICAgICBpZiAoaW5oZXJpdGVkQ29tcG9uZW50ICYmIGluaGVyaXRlZENvbXBvbmVudCAhPT0gb2JqZWN0UHJvdG90eXBlKSB7XG4gICAgICAgIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKHRhcmdldENvbXBvbmVudCwgaW5oZXJpdGVkQ29tcG9uZW50LCBibGFja2xpc3QpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBrZXlzID0gZ2V0T3duUHJvcGVydHlOYW1lcyhzb3VyY2VDb21wb25lbnQpO1xuXG4gICAgaWYgKGdldE93blByb3BlcnR5U3ltYm9scykge1xuICAgICAga2V5cyA9IGtleXMuY29uY2F0KGdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2VDb21wb25lbnQpKTtcbiAgICB9XG5cbiAgICB2YXIgdGFyZ2V0U3RhdGljcyA9IGdldFN0YXRpY3ModGFyZ2V0Q29tcG9uZW50KTtcbiAgICB2YXIgc291cmNlU3RhdGljcyA9IGdldFN0YXRpY3Moc291cmNlQ29tcG9uZW50KTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7ICsraSkge1xuICAgICAgdmFyIGtleSA9IGtleXNbaV07XG5cbiAgICAgIGlmICghS05PV05fU1RBVElDU1trZXldICYmICEoYmxhY2tsaXN0ICYmIGJsYWNrbGlzdFtrZXldKSAmJiAhKHNvdXJjZVN0YXRpY3MgJiYgc291cmNlU3RhdGljc1trZXldKSAmJiAhKHRhcmdldFN0YXRpY3MgJiYgdGFyZ2V0U3RhdGljc1trZXldKSkge1xuICAgICAgICB2YXIgZGVzY3JpcHRvciA9IGdldE93blByb3BlcnR5RGVzY3JpcHRvcihzb3VyY2VDb21wb25lbnQsIGtleSk7XG5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAvLyBBdm9pZCBmYWlsdXJlcyBmcm9tIHJlYWQtb25seSBwcm9wZXJ0aWVzXG4gICAgICAgICAgZGVmaW5lUHJvcGVydHkodGFyZ2V0Q29tcG9uZW50LCBrZXksIGRlc2NyaXB0b3IpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXRDb21wb25lbnQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaG9pc3ROb25SZWFjdFN0YXRpY3M7XG4iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL0FwcC5jc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIm1vZHVsZS5leHBvcnRzID0gbWw1OyIsIid1c2Ugc3RyaWN0JztcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1pcy5wcm9kdWN0aW9uLm1pbi5qcycpO1xufSBlbHNlIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKCcuL2Nqcy9yZWFjdC1pcy5kZXZlbG9wbWVudC5qcycpO1xufVxuIiwiLyoqIEBsaWNlbnNlIFJlYWN0IHYxNi4xMy4xXG4gKiByZWFjdC1pcy5wcm9kdWN0aW9uLm1pbi5qc1xuICpcbiAqIENvcHlyaWdodCAoYykgRmFjZWJvb2ssIEluYy4gYW5kIGl0cyBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICovXG5cbid1c2Ugc3RyaWN0Jzt2YXIgYj1cImZ1bmN0aW9uXCI9PT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuZm9yLGM9Yj9TeW1ib2wuZm9yKFwicmVhY3QuZWxlbWVudFwiKTo2MDEwMyxkPWI/U3ltYm9sLmZvcihcInJlYWN0LnBvcnRhbFwiKTo2MDEwNixlPWI/U3ltYm9sLmZvcihcInJlYWN0LmZyYWdtZW50XCIpOjYwMTA3LGY9Yj9TeW1ib2wuZm9yKFwicmVhY3Quc3RyaWN0X21vZGVcIik6NjAxMDgsZz1iP1N5bWJvbC5mb3IoXCJyZWFjdC5wcm9maWxlclwiKTo2MDExNCxoPWI/U3ltYm9sLmZvcihcInJlYWN0LnByb3ZpZGVyXCIpOjYwMTA5LGs9Yj9TeW1ib2wuZm9yKFwicmVhY3QuY29udGV4dFwiKTo2MDExMCxsPWI/U3ltYm9sLmZvcihcInJlYWN0LmFzeW5jX21vZGVcIik6NjAxMTEsbT1iP1N5bWJvbC5mb3IoXCJyZWFjdC5jb25jdXJyZW50X21vZGVcIik6NjAxMTEsbj1iP1N5bWJvbC5mb3IoXCJyZWFjdC5mb3J3YXJkX3JlZlwiKTo2MDExMixwPWI/U3ltYm9sLmZvcihcInJlYWN0LnN1c3BlbnNlXCIpOjYwMTEzLHE9Yj9cblN5bWJvbC5mb3IoXCJyZWFjdC5zdXNwZW5zZV9saXN0XCIpOjYwMTIwLHI9Yj9TeW1ib2wuZm9yKFwicmVhY3QubWVtb1wiKTo2MDExNSx0PWI/U3ltYm9sLmZvcihcInJlYWN0LmxhenlcIik6NjAxMTYsdj1iP1N5bWJvbC5mb3IoXCJyZWFjdC5ibG9ja1wiKTo2MDEyMSx3PWI/U3ltYm9sLmZvcihcInJlYWN0LmZ1bmRhbWVudGFsXCIpOjYwMTE3LHg9Yj9TeW1ib2wuZm9yKFwicmVhY3QucmVzcG9uZGVyXCIpOjYwMTE4LHk9Yj9TeW1ib2wuZm9yKFwicmVhY3Quc2NvcGVcIik6NjAxMTk7XG5mdW5jdGlvbiB6KGEpe2lmKFwib2JqZWN0XCI9PT10eXBlb2YgYSYmbnVsbCE9PWEpe3ZhciB1PWEuJCR0eXBlb2Y7c3dpdGNoKHUpe2Nhc2UgYzpzd2l0Y2goYT1hLnR5cGUsYSl7Y2FzZSBsOmNhc2UgbTpjYXNlIGU6Y2FzZSBnOmNhc2UgZjpjYXNlIHA6cmV0dXJuIGE7ZGVmYXVsdDpzd2l0Y2goYT1hJiZhLiQkdHlwZW9mLGEpe2Nhc2UgazpjYXNlIG46Y2FzZSB0OmNhc2UgcjpjYXNlIGg6cmV0dXJuIGE7ZGVmYXVsdDpyZXR1cm4gdX19Y2FzZSBkOnJldHVybiB1fX19ZnVuY3Rpb24gQShhKXtyZXR1cm4geihhKT09PW19ZXhwb3J0cy5Bc3luY01vZGU9bDtleHBvcnRzLkNvbmN1cnJlbnRNb2RlPW07ZXhwb3J0cy5Db250ZXh0Q29uc3VtZXI9aztleHBvcnRzLkNvbnRleHRQcm92aWRlcj1oO2V4cG9ydHMuRWxlbWVudD1jO2V4cG9ydHMuRm9yd2FyZFJlZj1uO2V4cG9ydHMuRnJhZ21lbnQ9ZTtleHBvcnRzLkxhenk9dDtleHBvcnRzLk1lbW89cjtleHBvcnRzLlBvcnRhbD1kO1xuZXhwb3J0cy5Qcm9maWxlcj1nO2V4cG9ydHMuU3RyaWN0TW9kZT1mO2V4cG9ydHMuU3VzcGVuc2U9cDtleHBvcnRzLmlzQXN5bmNNb2RlPWZ1bmN0aW9uKGEpe3JldHVybiBBKGEpfHx6KGEpPT09bH07ZXhwb3J0cy5pc0NvbmN1cnJlbnRNb2RlPUE7ZXhwb3J0cy5pc0NvbnRleHRDb25zdW1lcj1mdW5jdGlvbihhKXtyZXR1cm4geihhKT09PWt9O2V4cG9ydHMuaXNDb250ZXh0UHJvdmlkZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk9PT1ofTtleHBvcnRzLmlzRWxlbWVudD1mdW5jdGlvbihhKXtyZXR1cm5cIm9iamVjdFwiPT09dHlwZW9mIGEmJm51bGwhPT1hJiZhLiQkdHlwZW9mPT09Y307ZXhwb3J0cy5pc0ZvcndhcmRSZWY9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk9PT1ufTtleHBvcnRzLmlzRnJhZ21lbnQ9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk9PT1lfTtleHBvcnRzLmlzTGF6eT1mdW5jdGlvbihhKXtyZXR1cm4geihhKT09PXR9O1xuZXhwb3J0cy5pc01lbW89ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk9PT1yfTtleHBvcnRzLmlzUG9ydGFsPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpPT09ZH07ZXhwb3J0cy5pc1Byb2ZpbGVyPWZ1bmN0aW9uKGEpe3JldHVybiB6KGEpPT09Z307ZXhwb3J0cy5pc1N0cmljdE1vZGU9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk9PT1mfTtleHBvcnRzLmlzU3VzcGVuc2U9ZnVuY3Rpb24oYSl7cmV0dXJuIHooYSk9PT1wfTtcbmV4cG9ydHMuaXNWYWxpZEVsZW1lbnRUeXBlPWZ1bmN0aW9uKGEpe3JldHVyblwic3RyaW5nXCI9PT10eXBlb2YgYXx8XCJmdW5jdGlvblwiPT09dHlwZW9mIGF8fGE9PT1lfHxhPT09bXx8YT09PWd8fGE9PT1mfHxhPT09cHx8YT09PXF8fFwib2JqZWN0XCI9PT10eXBlb2YgYSYmbnVsbCE9PWEmJihhLiQkdHlwZW9mPT09dHx8YS4kJHR5cGVvZj09PXJ8fGEuJCR0eXBlb2Y9PT1ofHxhLiQkdHlwZW9mPT09a3x8YS4kJHR5cGVvZj09PW58fGEuJCR0eXBlb2Y9PT13fHxhLiQkdHlwZW9mPT09eHx8YS4kJHR5cGVvZj09PXl8fGEuJCR0eXBlb2Y9PT12KX07ZXhwb3J0cy50eXBlT2Y9ejtcbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9yaWdpbmFsTW9kdWxlKSB7XG5cdGlmICghb3JpZ2luYWxNb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XG5cdFx0dmFyIG1vZHVsZSA9IE9iamVjdC5jcmVhdGUob3JpZ2luYWxNb2R1bGUpO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdGlmICghbW9kdWxlLmNoaWxkcmVuKSBtb2R1bGUuY2hpbGRyZW4gPSBbXTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImxvYWRlZFwiLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Z2V0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIG1vZHVsZS5sO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShtb2R1bGUsIFwiaWRcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZSxcblx0XHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBtb2R1bGUuaTtcblx0XHRcdH1cblx0XHR9KTtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobW9kdWxlLCBcImV4cG9ydHNcIiwge1xuXHRcdFx0ZW51bWVyYWJsZTogdHJ1ZVxuXHRcdH0pO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59O1xuIiwiZnVuY3Rpb24gdG9WYWwobWl4KSB7XG5cdHZhciBrLCB5LCBzdHI9Jyc7XG5cblx0aWYgKHR5cGVvZiBtaXggPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBtaXggPT09ICdudW1iZXInKSB7XG5cdFx0c3RyICs9IG1peDtcblx0fSBlbHNlIGlmICh0eXBlb2YgbWl4ID09PSAnb2JqZWN0Jykge1xuXHRcdGlmIChBcnJheS5pc0FycmF5KG1peCkpIHtcblx0XHRcdGZvciAoaz0wOyBrIDwgbWl4Lmxlbmd0aDsgaysrKSB7XG5cdFx0XHRcdGlmIChtaXhba10pIHtcblx0XHRcdFx0XHRpZiAoeSA9IHRvVmFsKG1peFtrXSkpIHtcblx0XHRcdFx0XHRcdHN0ciAmJiAoc3RyICs9ICcgJyk7XG5cdFx0XHRcdFx0XHRzdHIgKz0geTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yIChrIGluIG1peCkge1xuXHRcdFx0XHRpZiAobWl4W2tdKSB7XG5cdFx0XHRcdFx0c3RyICYmIChzdHIgKz0gJyAnKTtcblx0XHRcdFx0XHRzdHIgKz0gaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBzdHI7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcblx0dmFyIGk9MCwgdG1wLCB4LCBzdHI9Jyc7XG5cdHdoaWxlIChpIDwgYXJndW1lbnRzLmxlbmd0aCkge1xuXHRcdGlmICh0bXAgPSBhcmd1bWVudHNbaSsrXSkge1xuXHRcdFx0aWYgKHggPSB0b1ZhbCh0bXApKSB7XG5cdFx0XHRcdHN0ciAmJiAoc3RyICs9ICcgJyk7XG5cdFx0XHRcdHN0ciArPSB4XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdHJldHVybiBzdHI7XG59XG4iLCJleHBvcnQgZGVmYXVsdCAoKSA9PiBjb25zb2xlO1xuIiwiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIiwiaW1wb3J0IHsgX19hc3NpZ24sIF9fZXh0ZW5kcywgX19yZWFkIH0gZnJvbSBcInRzbGliXCI7XG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG5pbXBvcnQgeyBnZXRDdXJyZW50SHViIH0gZnJvbSAnQHNlbnRyeS9icm93c2VyJztcbmltcG9ydCB7IHRpbWVzdGFtcFdpdGhNcyB9IGZyb20gJ0BzZW50cnkvdXRpbHMnO1xuaW1wb3J0IGhvaXN0Tm9uUmVhY3RTdGF0aWNzIGZyb20gJ2hvaXN0LW5vbi1yZWFjdC1zdGF0aWNzJztcbmltcG9ydCAqIGFzIFJlYWN0IGZyb20gJ3JlYWN0JztcbmV4cG9ydCB2YXIgVU5LTk9XTl9DT01QT05FTlQgPSAndW5rbm93bic7XG52YXIgVFJBQ0lOR19HRVRURVIgPSB7XG4gICAgaWQ6ICdUcmFjaW5nJyxcbn07XG52YXIgZ2xvYmFsVHJhY2luZ0ludGVncmF0aW9uID0gbnVsbDtcbi8qKiBAZGVwcmVjYXRlZCByZW1vdmUgd2hlbiBAc2VudHJ5L2FwbSBubyBsb25nZXIgdXNlZCAqL1xudmFyIGdldFRyYWNpbmdJbnRlZ3JhdGlvbiA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoZ2xvYmFsVHJhY2luZ0ludGVncmF0aW9uKSB7XG4gICAgICAgIHJldHVybiBnbG9iYWxUcmFjaW5nSW50ZWdyYXRpb247XG4gICAgfVxuICAgIGdsb2JhbFRyYWNpbmdJbnRlZ3JhdGlvbiA9IGdldEN1cnJlbnRIdWIoKS5nZXRJbnRlZ3JhdGlvbihUUkFDSU5HX0dFVFRFUik7XG4gICAgcmV0dXJuIGdsb2JhbFRyYWNpbmdJbnRlZ3JhdGlvbjtcbn07XG4vKipcbiAqIHB1c2hBY3Rpdml0eSBjcmVhdGVzIGFuIG5ldyByZWFjdCBhY3Rpdml0eS5cbiAqIElzIGEgbm8tb3AgaWYgVHJhY2luZyBpbnRlZ3JhdGlvbiBpcyBub3QgdmFsaWRcbiAqIEBwYXJhbSBuYW1lIGRpc3BsYXlOYW1lIG9mIGNvbXBvbmVudCB0aGF0IHN0YXJ0ZWQgYWN0aXZpdHlcbiAqIEBkZXByZWNhdGVkIHJlbW92ZSB3aGVuIEBzZW50cnkvYXBtIG5vIGxvbmdlciB1c2VkXG4gKi9cbmZ1bmN0aW9uIHB1c2hBY3Rpdml0eShuYW1lLCBvcCkge1xuICAgIGlmIChnbG9iYWxUcmFjaW5nSW50ZWdyYXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBnbG9iYWxUcmFjaW5nSW50ZWdyYXRpb24uY29uc3RydWN0b3IucHVzaEFjdGl2aXR5KG5hbWUsIHtcbiAgICAgICAgZGVzY3JpcHRpb246IFwiPFwiICsgbmFtZSArIFwiPlwiLFxuICAgICAgICBvcDogXCJyZWFjdC5cIiArIG9wLFxuICAgIH0pO1xufVxuLyoqXG4gKiBwb3BBY3Rpdml0eSByZW1vdmVzIGEgUmVhY3QgYWN0aXZpdHkuXG4gKiBJcyBhIG5vLW9wIGlmIFRyYWNpbmcgaW50ZWdyYXRpb24gaXMgbm90IHZhbGlkLlxuICogQHBhcmFtIGFjdGl2aXR5IGlkIG9mIGFjdGl2aXR5IHRoYXQgaXMgYmVpbmcgcG9wcGVkXG4gKiBAZGVwcmVjYXRlZCByZW1vdmUgd2hlbiBAc2VudHJ5L2FwbSBubyBsb25nZXIgdXNlZFxuICovXG5mdW5jdGlvbiBwb3BBY3Rpdml0eShhY3Rpdml0eSkge1xuICAgIGlmIChhY3Rpdml0eSA9PT0gbnVsbCB8fCBnbG9iYWxUcmFjaW5nSW50ZWdyYXRpb24gPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBnbG9iYWxUcmFjaW5nSW50ZWdyYXRpb24uY29uc3RydWN0b3IucG9wQWN0aXZpdHkoYWN0aXZpdHkpO1xufVxuLyoqXG4gKiBPYnRhaW4gYSBzcGFuIGdpdmVuIGFuIGFjdGl2aXR5IGlkLlxuICogSXMgYSBuby1vcCBpZiBUcmFjaW5nIGludGVncmF0aW9uIGlzIG5vdCB2YWxpZC5cbiAqIEBwYXJhbSBhY3Rpdml0eSBhY3Rpdml0eSBpZCBhc3NvY2lhdGVkIHdpdGggb2J0YWluZWQgc3BhblxuICogQGRlcHJlY2F0ZWQgcmVtb3ZlIHdoZW4gQHNlbnRyeS9hcG0gbm8gbG9uZ2VyIHVzZWRcbiAqL1xuZnVuY3Rpb24gZ2V0QWN0aXZpdHlTcGFuKGFjdGl2aXR5KSB7XG4gICAgaWYgKGFjdGl2aXR5ID09PSBudWxsIHx8IGdsb2JhbFRyYWNpbmdJbnRlZ3JhdGlvbiA9PT0gbnVsbCkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH1cbiAgICByZXR1cm4gZ2xvYmFsVHJhY2luZ0ludGVncmF0aW9uLmNvbnN0cnVjdG9yLmdldEFjdGl2aXR5U3BhbihhY3Rpdml0eSk7XG59XG4vKipcbiAqIFRoZSBQcm9maWxlciBjb21wb25lbnQgbGV2ZXJhZ2VzIFNlbnRyeSdzIFRyYWNpbmcgaW50ZWdyYXRpb24gdG8gZ2VuZXJhdGVcbiAqIHNwYW5zIGJhc2VkIG9uIGNvbXBvbmVudCBsaWZlY3ljbGVzLlxuICovXG52YXIgUHJvZmlsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XG4gICAgX19leHRlbmRzKFByb2ZpbGVyLCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIFByb2ZpbGVyKHByb3BzKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHByb3BzKSB8fCB0aGlzO1xuICAgICAgICAvLyBUaGUgYWN0aXZpdHkgcmVwcmVzZW50aW5nIGhvdyBsb25nIGl0IHRha2VzIHRvIG1vdW50IGEgY29tcG9uZW50LlxuICAgICAgICBfdGhpcy5fbW91bnRBY3Rpdml0eSA9IG51bGw7XG4gICAgICAgIC8vIFRoZSBzcGFuIG9mIHRoZSBtb3VudCBhY3Rpdml0eVxuICAgICAgICBfdGhpcy5fbW91bnRTcGFuID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgX2EgPSBfdGhpcy5wcm9wcywgbmFtZSA9IF9hLm5hbWUsIF9iID0gX2EuZGlzYWJsZWQsIGRpc2FibGVkID0gX2IgPT09IHZvaWQgMCA/IGZhbHNlIDogX2I7XG4gICAgICAgIGlmIChkaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgICAgICB9XG4gICAgICAgIC8vIElmIHRoZXkgYXJlIHVzaW5nIEBzZW50cnkvYXBtLCB3ZSBuZWVkIHRvIHB1c2gvcG9wIGFjdGl2aXRpZXNcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICAgIGlmIChnZXRUcmFjaW5nSW50ZWdyYXRpb24oKSkge1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICAgICAgICBfdGhpcy5fbW91bnRBY3Rpdml0eSA9IHB1c2hBY3Rpdml0eShuYW1lLCAnbW91bnQnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciBhY3RpdmVUcmFuc2FjdGlvbiA9IGdldEFjdGl2ZVRyYW5zYWN0aW9uKCk7XG4gICAgICAgICAgICBpZiAoYWN0aXZlVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgICAgICBfdGhpcy5fbW91bnRTcGFuID0gYWN0aXZlVHJhbnNhY3Rpb24uc3RhcnRDaGlsZCh7XG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIjxcIiArIG5hbWUgKyBcIj5cIixcbiAgICAgICAgICAgICAgICAgICAgb3A6ICdyZWFjdC5tb3VudCcsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIF90aGlzO1xuICAgIH1cbiAgICAvLyBJZiBhIGNvbXBvbmVudCBtb3VudGVkLCB3ZSBjYW4gZmluaXNoIHRoZSBtb3VudCBhY3Rpdml0eS5cbiAgICBQcm9maWxlci5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0aGlzLl9tb3VudFNwYW4pIHtcbiAgICAgICAgICAgIHRoaXMuX21vdW50U3Bhbi5maW5pc2goKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvblxuICAgICAgICAgICAgdGhpcy5fbW91bnRTcGFuID0gZ2V0QWN0aXZpdHlTcGFuKHRoaXMuX21vdW50QWN0aXZpdHkpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGRlcHJlY2F0aW9uL2RlcHJlY2F0aW9uXG4gICAgICAgICAgICBwb3BBY3Rpdml0eSh0aGlzLl9tb3VudEFjdGl2aXR5KTtcbiAgICAgICAgICAgIHRoaXMuX21vdW50QWN0aXZpdHkgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBQcm9maWxlci5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlID0gZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciB1cGRhdGVQcm9wcyA9IF9hLnVwZGF0ZVByb3BzLCBfYiA9IF9hLmluY2x1ZGVVcGRhdGVzLCBpbmNsdWRlVXBkYXRlcyA9IF9iID09PSB2b2lkIDAgPyB0cnVlIDogX2I7XG4gICAgICAgIC8vIE9ubHkgZ2VuZXJhdGUgYW4gdXBkYXRlIHNwYW4gaWYgaGFzVXBkYXRlU3BhbiBpcyB0cnVlLCBpZiB0aGVyZSBpcyBhIHZhbGlkIG1vdW50U3BhbixcbiAgICAgICAgLy8gYW5kIGlmIHRoZSB1cGRhdGVQcm9wcyBoYXZlIGNoYW5nZWQuIEl0IGlzIG9rIHRvIG5vdCBkbyBhIGRlZXAgZXF1YWxpdHkgY2hlY2sgaGVyZSBhcyBpdCBpcyBleHBlbnNpdmUuXG4gICAgICAgIC8vIFdlIGFyZSBqdXN0IHRyeWluZyB0byBnaXZlIGJhc2VsaW5lIGNsdWVzIGZvciBmdXJ0aGVyIGludmVzdGlnYXRpb24uXG4gICAgICAgIGlmIChpbmNsdWRlVXBkYXRlcyAmJiB0aGlzLl9tb3VudFNwYW4gJiYgdXBkYXRlUHJvcHMgIT09IHRoaXMucHJvcHMudXBkYXRlUHJvcHMpIHtcbiAgICAgICAgICAgIC8vIFNlZSB3aGF0IHByb3BzIGhhdmVkIGNoYW5nZWQgYmV0d2VlbiB0aGUgcHJldmlvdXMgcHJvcHMsIGFuZCB0aGUgY3VycmVudCBwcm9wcy4gVGhpcyBpc1xuICAgICAgICAgICAgLy8gc2V0IGFzIGRhdGEgb24gdGhlIHNwYW4uIFdlIGp1c3Qgc3RvcmUgdGhlIHByb3Aga2V5cyBhcyB0aGUgdmFsdWVzIGNvdWxkIGJlIHBvdGVuaWFsbHkgdmVyeSBsYXJnZS5cbiAgICAgICAgICAgIHZhciBjaGFuZ2VkUHJvcHMgPSBPYmplY3Qua2V5cyh1cGRhdGVQcm9wcykuZmlsdGVyKGZ1bmN0aW9uIChrKSB7IHJldHVybiB1cGRhdGVQcm9wc1trXSAhPT0gX3RoaXMucHJvcHMudXBkYXRlUHJvcHNba107IH0pO1xuICAgICAgICAgICAgaWYgKGNoYW5nZWRQcm9wcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhlIHVwZGF0ZSBzcGFuIGlzIGEgcG9pbnQgaW4gdGltZSBzcGFuIHdpdGggMCBkdXJhdGlvbiwganVzdCBzaWduaWZ5aW5nIHRoYXQgdGhlIGNvbXBvbmVudFxuICAgICAgICAgICAgICAgIC8vIGhhcyBiZWVuIHVwZGF0ZWQuXG4gICAgICAgICAgICAgICAgdmFyIG5vdyA9IHRpbWVzdGFtcFdpdGhNcygpO1xuICAgICAgICAgICAgICAgIHRoaXMuX21vdW50U3Bhbi5zdGFydENoaWxkKHtcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlZFByb3BzOiBjaGFuZ2VkUHJvcHMsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIjxcIiArIHRoaXMucHJvcHMubmFtZSArIFwiPlwiLFxuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IG5vdyxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwicmVhY3QudXBkYXRlXCIsXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiBub3csXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIElmIGEgY29tcG9uZW50IGlzIHVubW91bnRlZCwgd2UgY2FuIHNheSBpdCBpcyBubyBsb25nZXIgb24gdGhlIHNjcmVlbi5cbiAgICAvLyBUaGlzIG1lYW5zIHdlIGNhbiBmaW5pc2ggdGhlIHNwYW4gcmVwcmVzZW50aW5nIHRoZSBjb21wb25lbnQgcmVuZGVyLlxuICAgIFByb2ZpbGVyLnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgbmFtZSA9IF9hLm5hbWUsIF9iID0gX2EuaW5jbHVkZVJlbmRlciwgaW5jbHVkZVJlbmRlciA9IF9iID09PSB2b2lkIDAgPyB0cnVlIDogX2I7XG4gICAgICAgIGlmICh0aGlzLl9tb3VudFNwYW4gJiYgaW5jbHVkZVJlbmRlcikge1xuICAgICAgICAgICAgLy8gSWYgd2Ugd2VyZSBhYmxlIHRvIG9idGFpbiB0aGUgc3BhbklkIG9mIHRoZSBtb3VudCBhY3Rpdml0eSwgd2Ugc2hvdWxkIHNldCB0aGVcbiAgICAgICAgICAgIC8vIG5leHQgYWN0aXZpdHkgYXMgYSBjaGlsZCB0byB0aGUgY29tcG9uZW50IG1vdW50IGFjdGl2aXR5LlxuICAgICAgICAgICAgdGhpcy5fbW91bnRTcGFuLnN0YXJ0Q2hpbGQoe1xuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIjxcIiArIG5hbWUgKyBcIj5cIixcbiAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IHRpbWVzdGFtcFdpdGhNcygpLFxuICAgICAgICAgICAgICAgIG9wOiBcInJlYWN0LnJlbmRlclwiLFxuICAgICAgICAgICAgICAgIHN0YXJ0VGltZXN0YW1wOiB0aGlzLl9tb3VudFNwYW4uZW5kVGltZXN0YW1wLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIFByb2ZpbGVyLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmNoaWxkcmVuO1xuICAgIH07XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9tZW1iZXItb3JkZXJpbmdcbiAgICBQcm9maWxlci5kZWZhdWx0UHJvcHMgPSB7XG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgaW5jbHVkZVJlbmRlcjogdHJ1ZSxcbiAgICAgICAgaW5jbHVkZVVwZGF0ZXM6IHRydWUsXG4gICAgfTtcbiAgICByZXR1cm4gUHJvZmlsZXI7XG59KFJlYWN0LkNvbXBvbmVudCkpO1xuLyoqXG4gKiB3aXRoUHJvZmlsZXIgaXMgYSBoaWdoZXIgb3JkZXIgY29tcG9uZW50IHRoYXQgd3JhcHMgYVxuICogY29tcG9uZW50IGluIGEge0BsaW5rIFByb2ZpbGVyfSBjb21wb25lbnQuIEl0IGlzIHJlY29tbWVuZGVkIHRoYXRcbiAqIHRoZSBoaWdoZXIgb3JkZXIgY29tcG9uZW50IGJlIHVzZWQgb3ZlciB0aGUgcmVndWxhciB7QGxpbmsgUHJvZmlsZXJ9IGNvbXBvbmVudC5cbiAqXG4gKiBAcGFyYW0gV3JhcHBlZENvbXBvbmVudCBjb21wb25lbnQgdGhhdCBpcyB3cmFwcGVkIGJ5IFByb2ZpbGVyXG4gKiBAcGFyYW0gb3B0aW9ucyB0aGUge0BsaW5rIFByb2ZpbGVyUHJvcHN9IHlvdSBjYW4gcGFzcyBpbnRvIHRoZSBQcm9maWxlclxuICovXG5mdW5jdGlvbiB3aXRoUHJvZmlsZXIoV3JhcHBlZENvbXBvbmVudCwgXG4vLyBXZSBkbyBub3Qgd2FudCB0byBoYXZlIGB1cGRhdGVQcm9wc2AgZ2l2ZW4gaW4gb3B0aW9ucywgaXQgaXMgaW5zdGVhZCBmaWxsZWQgdGhyb3VnaCB0aGUgSE9DLlxub3B0aW9ucykge1xuICAgIHZhciBjb21wb25lbnREaXNwbGF5TmFtZSA9IChvcHRpb25zICYmIG9wdGlvbnMubmFtZSkgfHwgV3JhcHBlZENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBXcmFwcGVkQ29tcG9uZW50Lm5hbWUgfHwgVU5LTk9XTl9DT01QT05FTlQ7XG4gICAgdmFyIFdyYXBwZWQgPSBmdW5jdGlvbiAocHJvcHMpIHsgcmV0dXJuIChSZWFjdC5jcmVhdGVFbGVtZW50KFByb2ZpbGVyLCBfX2Fzc2lnbih7fSwgb3B0aW9ucywgeyBuYW1lOiBjb21wb25lbnREaXNwbGF5TmFtZSwgdXBkYXRlUHJvcHM6IHByb3BzIH0pLFxuICAgICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFdyYXBwZWRDb21wb25lbnQsIF9fYXNzaWduKHt9LCBwcm9wcykpKSk7IH07XG4gICAgV3JhcHBlZC5kaXNwbGF5TmFtZSA9IFwicHJvZmlsZXIoXCIgKyBjb21wb25lbnREaXNwbGF5TmFtZSArIFwiKVwiO1xuICAgIC8vIENvcHkgb3ZlciBzdGF0aWMgbWV0aG9kcyBmcm9tIFdyYXBwZWQgY29tcG9uZW50IHRvIFByb2ZpbGVyIEhPQ1xuICAgIC8vIFNlZTogaHR0cHM6Ly9yZWFjdGpzLm9yZy9kb2NzL2hpZ2hlci1vcmRlci1jb21wb25lbnRzLmh0bWwjc3RhdGljLW1ldGhvZHMtbXVzdC1iZS1jb3BpZWQtb3ZlclxuICAgIGhvaXN0Tm9uUmVhY3RTdGF0aWNzKFdyYXBwZWQsIFdyYXBwZWRDb21wb25lbnQpO1xuICAgIHJldHVybiBXcmFwcGVkO1xufVxuLyoqXG4gKlxuICogYHVzZVByb2ZpbGVyYCBpcyBhIFJlYWN0IGhvb2sgdGhhdCBwcm9maWxlcyBhIFJlYWN0IGNvbXBvbmVudC5cbiAqXG4gKiBSZXF1aXJlcyBSZWFjdCAxNi44IG9yIGFib3ZlLlxuICogQHBhcmFtIG5hbWUgZGlzcGxheU5hbWUgb2YgY29tcG9uZW50IGJlaW5nIHByb2ZpbGVkXG4gKi9cbmZ1bmN0aW9uIHVzZVByb2ZpbGVyKG5hbWUsIG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7XG4gICAgICAgIGRpc2FibGVkOiBmYWxzZSxcbiAgICAgICAgaGFzUmVuZGVyU3BhbjogdHJ1ZSxcbiAgICB9OyB9XG4gICAgdmFyIF9hID0gX19yZWFkKFJlYWN0LnVzZVN0YXRlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5kaXNhYmxlZCkge1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgYWN0aXZlVHJhbnNhY3Rpb24gPSBnZXRBY3RpdmVUcmFuc2FjdGlvbigpO1xuICAgICAgICBpZiAoYWN0aXZlVHJhbnNhY3Rpb24pIHtcbiAgICAgICAgICAgIHJldHVybiBhY3RpdmVUcmFuc2FjdGlvbi5zdGFydENoaWxkKHtcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCI8XCIgKyBuYW1lICsgXCI+XCIsXG4gICAgICAgICAgICAgICAgb3A6ICdyZWFjdC5tb3VudCcsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgIH0pLCAxKSwgbW91bnRTcGFuID0gX2FbMF07XG4gICAgUmVhY3QudXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKG1vdW50U3Bhbikge1xuICAgICAgICAgICAgbW91bnRTcGFuLmZpbmlzaCgpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobW91bnRTcGFuICYmIG9wdGlvbnMuaGFzUmVuZGVyU3Bhbikge1xuICAgICAgICAgICAgICAgIG1vdW50U3Bhbi5zdGFydENoaWxkKHtcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IFwiPFwiICsgbmFtZSArIFwiPlwiLFxuICAgICAgICAgICAgICAgICAgICBlbmRUaW1lc3RhbXA6IHRpbWVzdGFtcFdpdGhNcygpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJyZWFjdC5yZW5kZXJcIixcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRUaW1lc3RhbXA6IG1vdW50U3Bhbi5lbmRUaW1lc3RhbXAsXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIFdlIG9ubHkgd2FudCB0aGlzIHRvIHJ1biBvbmNlLlxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcmVhY3QtaG9va3MvZXhoYXVzdGl2ZS1kZXBzXG4gICAgfSwgW10pO1xufVxuZXhwb3J0IHsgd2l0aFByb2ZpbGVyLCBQcm9maWxlciwgdXNlUHJvZmlsZXIgfTtcbi8qKiBHcmFicyBhY3RpdmUgdHJhbnNhY3Rpb24gb2ZmIHNjb3BlICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QWN0aXZlVHJhbnNhY3Rpb24oaHViKSB7XG4gICAgaWYgKGh1YiA9PT0gdm9pZCAwKSB7IGh1YiA9IGdldEN1cnJlbnRIdWIoKTsgfVxuICAgIGlmIChodWIpIHtcbiAgICAgICAgdmFyIHNjb3BlID0gaHViLmdldFNjb3BlKCk7XG4gICAgICAgIGlmIChzY29wZSkge1xuICAgICAgICAgICAgcmV0dXJuIHNjb3BlLmdldFRyYW5zYWN0aW9uKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbn1cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXByb2ZpbGVyLmpzLm1hcCIsImNvbnN0IG5vdGVzOiBzdHJpbmdbXSA9IFtcbiAgXCJBXCIsIC8vIDIxXG4gIFwiQuKZrVwiLCAvLyAyMlxuICBcIkJcIiwgLy8gMjNcbiAgXCJDXCIsIC8vIDI0XG4gIFwiQ+KZr1wiLCAvLyAyNVxuICBcIkRcIiwgLy8gMjZcbiAgXCJE4pmvXCIsIC8vIDI3XG4gIFwiRVwiLCAvLyAyOFxuICBcIkZcIiwgLy8gMjlcbiAgXCJG4pmvXCIsIC8vIDMwXG4gIFwiR1wiLCAvLyAzMVxuICBcIkfima9cIiwgLy8gMzJcbl07XG5jb25zdCBuYW1lID0gKG5vdGU6IG51bWJlcik6IHN0cmluZyA9PiBub3Rlc1sobm90ZSAtIDIxKSAlIDEyXTtcbmNvbnN0IG9jdGF2ZSA9IChub3RlOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5mbG9vcihub3RlIC8gMTIgLSAxKTtcblxuY29uc3Qgbm90ZVRvRnJlcSA9IChub3RlOiBudW1iZXIpOiBudW1iZXIgPT4gNDQwICogKChub3RlIC0gNjkpIC8gMTIpICoqIDI7XG5cbmNvbnN0IGZyZXFUb05vdGUgPSAoZnJlcTogbnVtYmVyKTogbnVtYmVyID0+IDY5ICsgMTIgKiBNYXRoLmxvZzIoZnJlcSAvIDQ0MCk7XG5cbmNvbnN0IGRpZmYgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgPT4gMTIwMCAqIE1hdGgubG9nMihiIC8gYSk7XG5cbmNsYXNzIE5vdGUge1xuICByZWFkb25seSBmcmVxdWVuY3k6IG51bWJlcjtcblxuICByZWFkb25seSBub3RlOiBudW1iZXI7XG5cbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuXG4gIHJlYWRvbmx5IG9jdGF2ZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgX2ZyZXE6IG51bWJlcikge1xuICAgIHRoaXMubm90ZSA9IE1hdGgucm91bmQoZnJlcVRvTm90ZShfZnJlcSkpO1xuXG4gICAgdGhpcy5mcmVxdWVuY3kgPSBub3RlVG9GcmVxKHRoaXMubm90ZSk7XG4gICAgdGhpcy5uYW1lID0gbmFtZSh0aGlzLm5vdGUpO1xuICAgIHRoaXMub2N0YXZlID0gb2N0YXZlKHRoaXMubm90ZSk7XG4gIH1cbn1cblxudHlwZSBQaXRjaCA9IHtcbiAgdGFyZ2V0OiBOb3RlO1xuICBub3RlOiBudW1iZXI7XG4gIGZyZXF1ZW5jeTogbnVtYmVyO1xuICBkaWZmOiBudW1iZXI7XG59O1xuXG5jb25zdCBub3RlID0gKGZyZXE/OiBudW1iZXIgfCBudWxsKTogUGl0Y2ggfCBudWxsID0+IHtcbiAgaWYgKGZyZXEgPT09IHVuZGVmaW5lZCB8fCBmcmVxID09PSBudWxsKSByZXR1cm4gbnVsbDtcblxuICBjb25zdCBuID0gbmV3IE5vdGUoZnJlcSk7XG4gIHJldHVybiB7XG4gICAgZnJlcXVlbmN5OiBmcmVxLFxuICAgIHRhcmdldDogbixcbiAgICBub3RlOiBmcmVxVG9Ob3RlKGZyZXEpLFxuICAgIGRpZmY6IGRpZmYobi5mcmVxdWVuY3ksIGZyZXEpLFxuICB9O1xufTtcblxuZXhwb3J0IHsgbmFtZSwgb2N0YXZlLCBub3RlLCBOb3RlLCBQaXRjaCwgZnJlcVRvTm90ZSwgbm90ZVRvRnJlcSwgZGlmZiB9O1xuIiwiaW1wb3J0IFwibWw1XCI7XG5cbmltcG9ydCB7IG5vdGUsIFBpdGNoIH0gZnJvbSBcInBpdGNoL25vdGVzXCI7XG5pbXBvcnQgZ2V0TG9nZ2VyIGZyb20gXCJsb2dcIjtcblxuY29uc3QgTE9HID0gZ2V0TG9nZ2VyKCk7XG5cbmV4cG9ydCB0eXBlIFNhbXBsZSA9IFBpdGNoIHwgbnVsbDtcbmV4cG9ydCB0eXBlIFJlY29yZGluZyA9IFNhbXBsZVtdO1xuXG50eXBlIFBpdGNoR2VuZXJhdG9yID0gQXN5bmNHZW5lcmF0b3I8U2FtcGxlPjtcblxuY29uc3QgTU9ERUxfVVJMID1cbiAgXCJodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvZ2gvbWw1anMvbWw1LWRhdGEtYW5kLW1vZGVscy9tb2RlbHMvcGl0Y2gtZGV0ZWN0aW9uL2NyZXBlL1wiO1xuXG5hc3luYyBmdW5jdGlvbiogbWw1UGl0Y2hEZXRlY3Rpb24oXG4gIGN0eDogQXVkaW9Db250ZXh0LFxuICBzdHJlYW06IE1lZGlhU3RyZWFtXG4pOiBQaXRjaEdlbmVyYXRvciB7XG4gIGNvbnN0IHBpdGNoRGV0ZWN0aW9uOiBhbnkgPSBtbDUucGl0Y2hEZXRlY3Rpb24oTU9ERUxfVVJMLCBjdHgsIHN0cmVhbSk7XG4gIExPRy5pbmZvKFwiQ3JlYXRlZCBwaXRjaCBkZXRlY3Rpb24uXCIsIHBpdGNoRGV0ZWN0aW9uKTtcblxuICBhd2FpdCBwaXRjaERldGVjdGlvbi5yZWFkeTtcbiAgTE9HLmluZm8oXCJJbml0aWFsaXplZCB0aGUgbW9kZWwuXCIpO1xuXG4gIHdoaWxlIChzdHJlYW0uYWN0aXZlICYmIGN0eC5zdGF0ZSA9PT0gXCJydW5uaW5nXCIpIHtcbiAgICAvLyBUaGlzIGlzIGZpbmUgYXMgdGhpcyBpcyBhIGdlbmVyYXRvciBjb2RlLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1hd2FpdC1pbi1sb29wXG4gICAgY29uc3QgcGl0Y2ggPSBhd2FpdCBwaXRjaERldGVjdGlvbi5nZXRQaXRjaCgpO1xuICAgIGlmIChwaXRjaCA9PT0gbnVsbCkge1xuICAgICAgTE9HLmRlYnVnKFwiU2tpcHBpbmdcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHlpZWxkIG5vdGUocGl0Y2gpO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgeyBQaXRjaEdlbmVyYXRvciwgbWw1UGl0Y2hEZXRlY3Rpb24gfTtcbiIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUgfSBmcm9tIFwicmVhY3RcIjtcblxudHlwZSBHZW5lcmF0b3JDb21wb25lbnRQcm9wczxUPiA9IHtcbiAgZ2VuZXJhdG9yOiBBc3luY0dlbmVyYXRvcjxUIHwgbnVsbCwgYW55LCBhbnk+O1xuICBjaGlsZHJlbjogYW55O1xuICBvblRpY2s/OiAodDogVCB8IG51bGwpID0+IHZvaWQ7XG59O1xuXG5mdW5jdGlvbiBHZW5lcmF0b3JDb21wb25lbnQ8VD4ocHJvcHM6IEdlbmVyYXRvckNvbXBvbmVudFByb3BzPFQ+KSB7XG4gIGNvbnN0IFtmbGFnLCBzZXRGbGFnXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2N1cnJlbnRWYWx1ZSwgc2V0Q3VycmVudFZhbHVlXSA9IHVzZVN0YXRlPFQgfCB1bmRlZmluZWQ+KCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBsZXQgbW91bnRlZCA9IHRydWU7XG5cbiAgICBwcm9wcy5nZW5lcmF0b3IubmV4dCgpLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgaWYgKHJlc3VsdC5kb25lIHx8ICFtb3VudGVkKSByZXR1cm47XG5cbiAgICAgIHNldEN1cnJlbnRWYWx1ZShyZXN1bHQudmFsdWUgfHwgdW5kZWZpbmVkKTtcbiAgICAgIHNldEZsYWcoIWZsYWcpO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIG1vdW50ZWQgPSBmYWxzZTtcbiAgICB9O1xuICB9LCBbZmxhZ10pO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKHByb3BzLm9uVGljayAmJiBjdXJyZW50VmFsdWUpIHtcbiAgICAgIHByb3BzLm9uVGljayhjdXJyZW50VmFsdWUpO1xuICAgIH1cbiAgfSwgW2N1cnJlbnRWYWx1ZV0pO1xuXG4gIGlmICh0eXBlb2YgcHJvcHMuY2hpbGRyZW4gPT09IFwiZnVuY3Rpb25cIikge1xuICAgIHJldHVybiBwcm9wcy5jaGlsZHJlbihjdXJyZW50VmFsdWUpO1xuICB9XG4gIHJldHVybiBwcm9wcy5jaGlsZHJlbjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgR2VuZXJhdG9yQ29tcG9uZW50O1xuIiwiaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tIFwicmVhY3RcIjtcblxuaW1wb3J0IHsgUGl0Y2hHZW5lcmF0b3IsIFNhbXBsZSB9IGZyb20gXCJwaXRjaC9waXRjaFwiO1xuXG5pbXBvcnQgZ2V0TG9nZ2VyIGZyb20gXCJsb2dcIjtcbmltcG9ydCB7IFNwaW5uZXIgfSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQgR2VuZXJhdG9yQ29tcG9uZW50IGZyb20gXCIuL0dlbmVyYXRvckNvbXBvbmVudFwiO1xuXG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcblxudHlwZSBSZWNvcmRpbmcgPSBTYW1wbGVbXTtcbnR5cGUgUGl0Y2hSZWNvcmRlclByb3BzID0ge1xuICBwaXRjaEdlbmVyYXRvcjogUGl0Y2hHZW5lcmF0b3I7XG4gIHRpbWVvdXRNczogbnVtYmVyO1xuICBvbkZpbmlzaDogKHNhbXBsZXM6IFJlY29yZGluZykgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIFBpdGNoUmVjb3JkZXIoe1xuICBwaXRjaEdlbmVyYXRvcixcbiAgdGltZW91dE1zLFxuICBvbkZpbmlzaCxcbn06IFBpdGNoUmVjb3JkZXJQcm9wcykge1xuICBjb25zdCBbcmVjb3JkaW5nLCBzZXRSZWNvcmRpbmddID0gdXNlU3RhdGU8UmVjb3JkaW5nPihbXSk7XG4gIGNvbnN0IFtzdGFydGVkLCBzZXRTdGFydGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZpbmlzaGVkLCBzZXRGaW5pc2hlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgIHJldHVybiAoKSA9PiB7fTtcbiAgICB9XG4gICAgTE9HLmluZm8oXCJTZXR0aW5nIHVwIHRoZSB0aW1lb3V0LlwiKTtcbiAgICBjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRGaW5pc2hlZCh0cnVlKTtcbiAgICAgIHNldFN0YXJ0ZWQoZmFsc2UpO1xuICAgIH0sIHRpbWVvdXRNcyk7XG5cbiAgICBMT0cuaW5mbyhcIlNldCB1cCB0aW1lciAlZCBmb3IgJWQgbXMuXCIsIHQsIHRpbWVvdXRNcyk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgTE9HLmluZm8oXCJDbGVhcmluZyBvdXQgdGhlIHRpbWVvdXQgJWQuXCIsIHQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgIH07XG4gIH0sIFtzdGFydGVkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgIExPRy5pbmZvKFwiRmluaXNoaW5nIHJlY29yZGluZy5cIik7XG4gICAgICBvbkZpbmlzaChyZWNvcmRpbmcpO1xuICAgIH1cbiAgfSwgW2ZpbmlzaGVkLCByZWNvcmRpbmddKTtcblxuICBjb25zdCBhZGRTYW1wbGUgPSAocDogU2FtcGxlKSA9PiB7XG4gICAgY29uc3QgbmV3UmVjb3JkaW5nID0gcmVjb3JkaW5nLmNvbmNhdChbcF0pO1xuICAgIHNldFJlY29yZGluZyhuZXdSZWNvcmRpbmcpO1xuICAgIGlmICghc3RhcnRlZCkge1xuICAgICAgc2V0U3RhcnRlZCh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbGFiZWwgPSAhc3RhcnRlZCA/IChcbiAgICA8c3Bhbj5zaW5nIG5vdyE8L3NwYW4+XG4gICkgOiAoXG4gICAgPFNwaW5uZXIgYW5pbWF0aW9uPVwiZ3Jvd1wiIHZhcmlhbnQ9XCJkYW5nZXJcIiAvPlxuICApO1xuXG4gIHJldHVybiBwaXRjaEdlbmVyYXRvciA/IChcbiAgICA8R2VuZXJhdG9yQ29tcG9uZW50IGdlbmVyYXRvcj17cGl0Y2hHZW5lcmF0b3J9IG9uVGljaz17YWRkU2FtcGxlfT5cbiAgICAgIDxoMz57bGFiZWx9PC9oMz5cbiAgICA8L0dlbmVyYXRvckNvbXBvbmVudD5cbiAgKSA6IChcbiAgICA8U3Bpbm5lciBhbmltYXRpb249XCJib3JkZXJcIiB2YXJpYW50PVwicHJpbWFyeVwiIC8+XG4gICk7XG59XG4iLCJmdW5jdGlvbiBfZXh0ZW5kcygpIHsgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHsgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHsgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTsgZm9yICh2YXIga2V5IGluIHNvdXJjZSkgeyBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkgeyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gfSByZXR1cm4gdGFyZ2V0OyB9OyByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXMoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpOyB2YXIga2V5LCBpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgc291cmNlU3ltYm9sS2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoc291cmNlKTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZVN5bWJvbEtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlU3ltYm9sS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgaWYgKCFPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwoc291cmNlLCBrZXkpKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSB9IHJldHVybiB0YXJnZXQ7IH1cblxuZnVuY3Rpb24gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCkgeyBpZiAoc291cmNlID09IG51bGwpIHJldHVybiB7fTsgdmFyIHRhcmdldCA9IHt9OyB2YXIgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7IHZhciBrZXksIGk7IGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7IGtleSA9IHNvdXJjZUtleXNbaV07IGlmIChleGNsdWRlZC5pbmRleE9mKGtleSkgPj0gMCkgY29udGludWU7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5pbXBvcnQgUmVhY3QsIHsgZm9yd2FyZFJlZiB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCBQcm9wVHlwZXMgZnJvbSAncHJvcC10eXBlcyc7XG52YXIgU3RhckZpbGwgPSBmb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmLCByZWYpIHtcbiAgdmFyIGNvbG9yID0gX3JlZi5jb2xvcixcbiAgICAgIHNpemUgPSBfcmVmLnNpemUsXG4gICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzKF9yZWYsIFtcImNvbG9yXCIsIFwic2l6ZVwiXSk7XG5cbiAgcmV0dXJuIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzdmdcIiwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmLFxuICAgIHhtbG5zOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsXG4gICAgdmlld0JveDogXCIwIDAgMTYgMTZcIixcbiAgICB3aWR0aDogc2l6ZSxcbiAgICBoZWlnaHQ6IHNpemUsXG4gICAgZmlsbDogY29sb3JcbiAgfSwgcmVzdCksIFJlYWN0LmNyZWF0ZUVsZW1lbnQoXCJwYXRoXCIsIHtcbiAgICBkOiBcIk0zLjYxMiAxNS40NDNjLS4zODYuMTk4LS44MjQtLjE0OS0uNzQ2LS41OTJsLjgzLTQuNzNMLjE3MyA2Ljc2NWMtLjMyOS0uMzE0LS4xNTgtLjg4OC4yODMtLjk1bDQuODk4LS42OTZMNy41MzguNzkyYy4xOTctLjM5LjczLS4zOS45MjcgMGwyLjE4NCA0LjMyNyA0Ljg5OC42OTZjLjQ0MS4wNjIuNjEyLjYzNi4yODMuOTVsLTMuNTIzIDMuMzU2LjgzIDQuNzNjLjA3OC40NDMtLjM2Ljc5LS43NDYuNTkyTDggMTMuMTg3bC00LjM4OSAyLjI1NnpcIlxuICB9KSk7XG59KTtcblN0YXJGaWxsLnByb3BUeXBlcyA9IHtcbiAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHNpemU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKVxufTtcblN0YXJGaWxsLmRlZmF1bHRQcm9wcyA9IHtcbiAgY29sb3I6ICdjdXJyZW50Q29sb3InLFxuICBzaXplOiAnMWVtJ1xufTtcbmV4cG9ydCBkZWZhdWx0IFN0YXJGaWxsOyIsImZ1bmN0aW9uIF9leHRlbmRzKCkgeyBfZXh0ZW5kcyA9IE9iamVjdC5hc3NpZ24gfHwgZnVuY3Rpb24gKHRhcmdldCkgeyBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykgeyB2YXIgc291cmNlID0gYXJndW1lbnRzW2ldOyBmb3IgKHZhciBrZXkgaW4gc291cmNlKSB7IGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoc291cmNlLCBrZXkpKSB7IHRhcmdldFtrZXldID0gc291cmNlW2tleV07IH0gfSB9IHJldHVybiB0YXJnZXQ7IH07IHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOyB9XG5cbmZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2Uoc291cmNlLCBleGNsdWRlZCk7IHZhciBrZXksIGk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBzb3VyY2VTeW1ib2xLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzb3VyY2UpOyBmb3IgKGkgPSAwOyBpIDwgc291cmNlU3ltYm9sS2V5cy5sZW5ndGg7IGkrKykgeyBrZXkgPSBzb3VyY2VTeW1ib2xLZXlzW2ldOyBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlOyBpZiAoIU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChzb3VyY2UsIGtleSkpIGNvbnRpbnVlOyB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldOyB9IH0gcmV0dXJuIHRhcmdldDsgfVxuXG5mdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7IGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9OyB2YXIgdGFyZ2V0ID0ge307IHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTsgdmFyIGtleSwgaTsgZm9yIChpID0gMDsgaSA8IHNvdXJjZUtleXMubGVuZ3RoOyBpKyspIHsga2V5ID0gc291cmNlS2V5c1tpXTsgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTsgdGFyZ2V0W2tleV0gPSBzb3VyY2Vba2V5XTsgfSByZXR1cm4gdGFyZ2V0OyB9XG5cbmltcG9ydCBSZWFjdCwgeyBmb3J3YXJkUmVmIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbnZhciBTdGFyID0gZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBjb2xvciA9IF9yZWYuY29sb3IsXG4gICAgICBzaXplID0gX3JlZi5zaXplLFxuICAgICAgcmVzdCA9IF9vYmplY3RXaXRob3V0UHJvcGVydGllcyhfcmVmLCBbXCJjb2xvclwiLCBcInNpemVcIl0pO1xuXG4gIHJldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3ZnXCIsIF9leHRlbmRzKHtcbiAgICByZWY6IHJlZixcbiAgICB4bWxuczogXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLFxuICAgIHZpZXdCb3g6IFwiMCAwIDE2IDE2XCIsXG4gICAgd2lkdGg6IHNpemUsXG4gICAgaGVpZ2h0OiBzaXplLFxuICAgIGZpbGw6IGNvbG9yXG4gIH0sIHJlc3QpLCBSZWFjdC5jcmVhdGVFbGVtZW50KFwicGF0aFwiLCB7XG4gICAgZmlsbFJ1bGU6IFwiZXZlbm9kZFwiLFxuICAgIGQ6IFwiTTIuODY2IDE0Ljg1Yy0uMDc4LjQ0NC4zNi43OTEuNzQ2LjU5M2w0LjM5LTIuMjU2IDQuMzg5IDIuMjU2Yy4zODYuMTk4LjgyNC0uMTQ5Ljc0Ni0uNTkybC0uODMtNC43MyAzLjUyMy0zLjM1NmMuMzI5LS4zMTQuMTU4LS44ODgtLjI4My0uOTVsLTQuODk4LS42OTZMOC40NjUuNzkyYS41MTMuNTEzIDAgMCAwLS45MjcgMEw1LjM1NCA1LjEybC00Ljg5OC42OTZjLS40NDEuMDYyLS42MTIuNjM2LS4yODMuOTVsMy41MjMgMy4zNTYtLjgzIDQuNzN6bTQuOTA1LTIuNzY3bC0zLjY4NiAxLjg5NC42OTQtMy45NTdhLjU2NS41NjUgMCAwIDAtLjE2My0uNTA1TDEuNzEgNi43NDVsNC4wNTItLjU3NmEuNTI1LjUyNSAwIDAgMCAuMzkzLS4yODhsMS44NDctMy42NTggMS44NDYgMy42NThhLjUyNS41MjUgMCAwIDAgLjM5My4yODhsNC4wNTIuNTc1LTIuOTA2IDIuNzdhLjU2NC41NjQgMCAwIDAtLjE2My41MDZsLjY5NCAzLjk1Ny0zLjY4Ni0xLjg5NGEuNTAzLjUwMyAwIDAgMC0uNDYxIDB6XCJcbiAgfSkpO1xufSk7XG5TdGFyLnByb3BUeXBlcyA9IHtcbiAgY29sb3I6IFByb3BUeXBlcy5zdHJpbmcsXG4gIHNpemU6IFByb3BUeXBlcy5vbmVPZlR5cGUoW1Byb3BUeXBlcy5zdHJpbmcsIFByb3BUeXBlcy5udW1iZXJdKVxufTtcblN0YXIuZGVmYXVsdFByb3BzID0ge1xuICBjb2xvcjogJ2N1cnJlbnRDb2xvcicsXG4gIHNpemU6ICcxZW0nXG59O1xuZXhwb3J0IGRlZmF1bHQgU3RhcjsiLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBBbGVydCwgQ29udGFpbmVyLCBSb3csIENvbCB9IGZyb20gXCJyZWFjdC1ib290c3RyYXBcIjtcbmltcG9ydCB7IFN0YXIsIFN0YXJGaWxsIH0gZnJvbSBcInJlYWN0LWJvb3RzdHJhcC1pY29uc1wiO1xuXG5pbXBvcnQgeyBTYW1wbGUsIFJlY29yZGluZyB9IGZyb20gXCJwaXRjaC9waXRjaFwiO1xuaW1wb3J0IHsgUGl0Y2ggfSBmcm9tIFwicGl0Y2gvbm90ZXNcIjtcbmltcG9ydCBjbHN4IGZyb20gXCJjbHN4XCI7XG5cbnR5cGUgUmF0aW5nUHJvcHMgPSB7XG4gIG5vOiBudW1iZXI7XG4gIG9mOiBudW1iZXI7XG59O1xuZnVuY3Rpb24gUmF0aW5nKHsgbm8sIG9mIH06IFJhdGluZ1Byb3BzKSB7XG4gIGNvbnN0IHN0YXJzID0gW107XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb2Y7IGkgKz0gMSkge1xuICAgIHN0YXJzLnB1c2goaSA8PSBubyA/IDxTdGFyRmlsbCAvPiA6IDxTdGFyIC8+KTtcbiAgfVxuXG4gIHJldHVybiA8ZGl2IGNsYXNzTmFtZT17Y2xzeChcInRleHQtcHJpbWFyeVwiLCBcImRpc3BsYXktM1wiKX0+e3N0YXJzfTwvZGl2Pjtcbn1cblxudHlwZSBTdW1tYXJ5UHJvcHMgPSB7XG4gIHJlY29yZGluZzogUmVjb3JkaW5nO1xuICByZWZlcmVuY2U6IFBpdGNoO1xufTtcbmNvbnN0IHN1bSA9IChhOiBudW1iZXIsIGI6IG51bWJlcikgPT4gYSArIGI7XG5leHBvcnQgZGVmYXVsdCAoeyByZWNvcmRpbmcsIHJlZmVyZW5jZSB9OiBTdW1tYXJ5UHJvcHMpID0+IHtcbiAgY29uc3Qgbm9uRW1wdHkgPSByZWNvcmRpbmcuZmlsdGVyKChzPzogU2FtcGxlKSA9PiAhIXMpO1xuICBjb25zdCBmcmVxUmVzdWx0ID1cbiAgICBub25FbXB0eVxuICAgICAgLm1hcCgoczogU2FtcGxlKSA9PiBzIS5mcmVxdWVuY3kgLSByZWZlcmVuY2UuZnJlcXVlbmN5KVxuICAgICAgLnJlZHVjZShzdW0sIDApIC8gbm9uRW1wdHkubGVuZ3RoO1xuXG4gIGNvbnN0IG1pZGlSZXN1bHQgPVxuICAgIG5vbkVtcHR5XG4gICAgICAubWFwKChzOiBTYW1wbGUpID0+IE1hdGguYWJzKHMhLm5vdGUgLSByZWZlcmVuY2Uubm90ZSkpXG4gICAgICAucmVkdWNlKHN1bSwgMCkgLyBub25FbXB0eS5sZW5ndGg7XG5cbiAgbGV0IHN0YXJDb3VudDogbnVtYmVyO1xuICBpZiAobWlkaVJlc3VsdCA8PSAwLjUpIHtcbiAgICBzdGFyQ291bnQgPSA1O1xuICB9IGVsc2UgaWYgKG1pZGlSZXN1bHQgPD0gMSkge1xuICAgIC8vIHdpdGhpbiBoYWxmIHN0ZXBcbiAgICBzdGFyQ291bnQgPSA0O1xuICB9IGVsc2UgaWYgKG1pZGlSZXN1bHQgPD0gMikge1xuICAgIC8vIHdpdGhpbiB3aG9sZSBzdGVwXG4gICAgc3RhckNvdW50ID0gMztcbiAgfSBlbHNlIGlmIChtaWRpUmVzdWx0IDw9IDQpIHtcbiAgICAvLyB3aXRoaW4gdGhpcmRcbiAgICBzdGFyQ291bnQgPSAyO1xuICB9IGVsc2UgaWYgKG1pZGlSZXN1bHQgPD0gNykge1xuICAgIC8vIHdpdGhpbm4gZmlmdGhcbiAgICBzdGFyQ291bnQgPSAxO1xuICB9IGVsc2Uge1xuICAgIC8vIHlvdSBzdWNrXG4gICAgc3RhckNvdW50ID0gMDtcbiAgfVxuXG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIDxSb3c+XG4gICAgICAgIDxDb2wgY2xhc3NOYW1lPVwicGItM1wiPlxuICAgICAgICAgIDxSYXRpbmcgbm89e3N0YXJDb3VudH0gb2Y9ezV9IC8+XG4gICAgICAgIDwvQ29sPlxuICAgICAgPC9Sb3c+XG4gICAgICA8Um93PlxuICAgICAgICA8Q29sIGNsYXNzTmFtZT17Y2xzeChcImNvbC1tZC02XCIsIFwib2Zmc2V0LW1kLTNcIil9PlxuICAgICAgICAgIDxBbGVydCB2YXJpYW50PVwic3VjY2Vzc1wiPlxuICAgICAgICAgICAgUmVjZWl2ZWQge25vbkVtcHR5Lmxlbmd0aH0gc2FtcGxlKHMpIGF2ZXJhZ2luZyB0byB7ZnJlcVJlc3VsdH0gZnJvbVxuICAgICAgICAgICAgQzxzdWI+NDwvc3ViPi5cbiAgICAgICAgICA8L0FsZXJ0PlxuICAgICAgICA8L0NvbD5cbiAgICAgIDwvUm93PlxuICAgIDwvQ29udGFpbmVyPlxuICApO1xufTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQgZ2V0TG9nZ2VyIGZyb20gXCJsb2dcIjtcbmltcG9ydCAqIGFzIFNlbnRyeSBmcm9tIFwiQHNlbnRyeS9yZWFjdFwiO1xuXG5pbXBvcnQgeyBtbDVQaXRjaERldGVjdGlvbiwgUGl0Y2hHZW5lcmF0b3IsIFJlY29yZGluZyB9IGZyb20gXCJwaXRjaC9waXRjaFwiO1xuaW1wb3J0IHsgUGl0Y2gsIG5vdGUsIG5vdGVUb0ZyZXEgfSBmcm9tIFwicGl0Y2gvbm90ZXNcIjtcblxuaW1wb3J0IFBpdGNoUmVjb3JkZXIgZnJvbSBcIi4vUGl0Y2hSZWNvcmRlclwiO1xuaW1wb3J0IFN1bW1hcnkgZnJvbSBcIi4vU3VtbWFyeVwiO1xuXG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcbmNvbnN0IFBpdGNoRGV0ZWN0aW9uID0gKCkgPT4ge1xuICBTZW50cnkudXNlUHJvZmlsZXIoXCJQaXRjaERldGVjdGlvblwiKTtcblxuICBjb25zdCBbc3RhcnRlZCwgc2V0SXNTdGFydGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICAvLyB3ZWJraXQgdnMgYWxsIHRoZSBvdGhlcnNcbiAgLy8gQHRzLWlnbm9yZVxuICBjb25zdCBBdWRpb0N0eCA9IHdpbmRvdy5BdWRpb0NvbnRleHQgfHwgd2luZG93LndlYmtpdEF1ZGlvQ29udGV4dDtcblxuICAvLyBBdWRpbyBpbnRlcmZhY2VzXG4gIGNvbnN0IFthdWRpb0NvbnRleHRdID0gdXNlU3RhdGUobmV3IEF1ZGlvQ3R4KCkpOyAvLyByZWFkLW9ubHlcbiAgY29uc3QgW3N0cmVhbSwgc2V0U3RyZWFtXSA9IHVzZVN0YXRlPE1lZGlhU3RyZWFtPigpO1xuICBjb25zdCBbcGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IsIHNldFBpdGNoRGV0ZWN0aW9uR2VuZXJhdG9yXSA9IHVzZVN0YXRlPFxuICAgIFBpdGNoR2VuZXJhdG9yXG4gID4oKTtcbiAgY29uc3QgW3JlY29yZGluZywgc2V0UmVjb3JkaW5nXSA9IHVzZVN0YXRlPFJlY29yZGluZz4oKTtcblxuICAvLyBTZXQgdXAgdGhlIG1pY3JvcGhvbmUuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzdGFydGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgTE9HLmluZm8oXCJBY3F1aXJpbmcgbWljcm9waG9uZS5cIik7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmdldFVzZXJNZWRpYSh7XG4gICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICB2aWRlbzogZmFsc2UsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKG5ld1N0cmVhbSkgPT4ge1xuICAgICAgICBMT0cuZGVidWcoXG4gICAgICAgICAgXCJNaWNyb3Bob25lIGluaXRpYWxpemVkIHdpdGggc3RyZWFtOiAlaiwgYWN0aXZlPywgJXMsIHN0YXRlOiAlcy5cIixcbiAgICAgICAgICBuZXdTdHJlYW0sXG4gICAgICAgICAgbmV3U3RyZWFtLmFjdGl2ZSxcbiAgICAgICAgICBuZXdTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5yZWFkeVN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIHNldFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfSk7XG4gIH0sIFtzdGFydGVkXSk7XG5cbiAgLy8gQ29uZmlndXJlIHRoZSBhdWRpbyBzdHJlYW0uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzdGFydGVkIHx8IHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm4gKCkgPT4ge307XG4gICAgfVxuXG4gICAgTE9HLmluZm8oXCJTZXR0aW5nIHVwIHRoZSBjb250ZXh0ICVqIGFuZCBzdHJlYW0gJWpcIiwgYXVkaW9Db250ZXh0LCBzdHJlYW0pO1xuICAgIGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuXG4gICAgTE9HLmluZm8oXCJJbml0aWFsaXplZCBhdWRpby5cIik7XG4gICAgc2V0UGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IobWw1UGl0Y2hEZXRlY3Rpb24oYXVkaW9Db250ZXh0LCBzdHJlYW0pKTtcbiAgICBhdWRpb0NvbnRleHQucmVzdW1lKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgTE9HLmluZm8oXCJDbGVhbnVwIHRoZSBhdWRpbyBzZXR0aW5nc1wiKTtcblxuICAgICAgTE9HLmRlYnVnKFwiU3RvcCBhbGwgdHJhY2tzIGluIHRoZSBzdHJlYW0gJWouXCIsIHN0cmVhbSk7XG4gICAgICBzdHJlYW0/LmdldFRyYWNrcygpLmZvckVhY2goKHQpID0+IHQuc3RvcCgpKTtcblxuICAgICAgTE9HLmRlYnVnKFwiU3VzcGVuZCBhdWRpbyBjb250ZXh0ICVqLlwiLCBhdWRpb0NvbnRleHQpO1xuICAgICAgYXVkaW9Db250ZXh0LnN1c3BlbmQoKTtcbiAgICB9O1xuICB9LCBbc3RyZWFtLCBzdGFydGVkXSk7XG5cbiAgaWYgKHJlY29yZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgcmVmZXJlbmNlUGl0Y2ggPSBub3RlKG5vdGVUb0ZyZXEoNjApKSBhcyBQaXRjaDtcblxuICAgIHJldHVybiA8U3VtbWFyeSByZWNvcmRpbmc9e3JlY29yZGluZ30gcmVmZXJlbmNlPXtyZWZlcmVuY2VQaXRjaH0gLz47XG4gIH1cbiAgaWYgKHN0YXJ0ZWQgJiYgcGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgPFBpdGNoUmVjb3JkZXJcbiAgICAgICAgb25GaW5pc2g9eyhyZXN1bHQpID0+IHtcbiAgICAgICAgICBMT0cuaW5mbyhcIlJlc3VsdCwgJWpcIiwgcmVzdWx0KTtcbiAgICAgICAgICBzZXRSZWNvcmRpbmcocmVzdWx0KTtcbiAgICAgICAgICBzZXRJc1N0YXJ0ZWQoZmFsc2UpO1xuICAgICAgICB9fVxuICAgICAgICBwaXRjaEdlbmVyYXRvcj17cGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3J9XG4gICAgICAgIHRpbWVvdXRNcz17NTAwMH1cbiAgICAgIC8+XG4gICAgKTtcbiAgfVxuICByZXR1cm4gKFxuICAgIDxCdXR0b25cbiAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzU3RhcnRlZCh0cnVlKX1cbiAgICAgIHZhcmlhbnQ9XCJvdXRsaW5lLXByaW1hcnlcIlxuICAgICAgc2l6ZT1cImxnXCJcbiAgICA+XG4gICAgICBjbGljayB0byBzdGFydFxuICAgIDwvQnV0dG9uPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgUGl0Y2hEZXRlY3Rpb247XG4iLCJpbXBvcnQgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgXCIuL0FwcC5jc3NcIjtcblxuaW1wb3J0IGNsc3ggZnJvbSBcImNsc3hcIjtcblxuaW1wb3J0IGdldExvZ2dlciBmcm9tIFwibG9nXCI7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5pbXBvcnQgUGl0Y2hEZXRlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9QaXRjaERldGVjdGlvblwiO1xuXG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcblxuZXhwb3J0IGRlZmF1bHQgKCkgPT4ge1xuICBMT0cuaW5mbyhcIlN0YXJ0aW5nIGFwcC5cIik7XG4gIHJldHVybiAoXG4gICAgPENvbnRhaW5lcj5cbiAgICAgIDxoZWFkZXIgY2xhc3NOYW1lPXtjbHN4KFwidGV4dC1jZW50ZXJcIiwgXCJtdC01XCIpfT5cbiAgICAgICAgPGgxIGNsYXNzTmFtZT17Y2xzeChcImRpc3BsYXktMVwiLCBcInRleHQtcHJpbWFyeVwiLCBcInRpdGxlXCIpfT52b2NhbGx5PC9oMT5cbiAgICAgICAgPGgyIGNsYXNzTmFtZT1cInRleHQtc2Vjb25kYXJ5XCI+XG4gICAgICAgICAgc2luZyBDPHN1Yj40PC9zdWI+IVxuICAgICAgICA8L2gyPlxuICAgICAgPC9oZWFkZXI+XG5cbiAgICAgIDxtYWluIGNsYXNzTmFtZT17Y2xzeChcInRleHQtY2VudGVyXCIsIFwicHktNVwiKX0gcm9sZT1cIm1haW5cIj5cbiAgICAgICAgPFBpdGNoRGV0ZWN0aW9uIC8+XG4gICAgICA8L21haW4+XG5cbiAgICAgIDxmb290ZXIgY2xhc3NOYW1lPXtjbHN4KFwicHktM1wiLCBcImJvcmRlci10b3BcIiwgXCJ0ZXh0LW11dGVkXCIpfT5cbiAgICAgICAgPENvbnRhaW5lcj5cbiAgICAgICAgICA8cD52b2NhbGx5LmFwcCAyMDIwPC9wPlxuICAgICAgICA8L0NvbnRhaW5lcj5cbiAgICAgIDwvZm9vdGVyPlxuICAgIDwvQ29udGFpbmVyPlxuICApO1xufTtcbiIsImltcG9ydCAqIGFzIFNlbnRyeSBmcm9tIFwiQHNlbnRyeS9yZWFjdFwiO1xuaW1wb3J0ICogYXMgSW50ZWdyYXRpb25zIGZyb20gXCJAc2VudHJ5L2ludGVncmF0aW9uc1wiO1xuaW1wb3J0IHsgSW50ZWdyYXRpb25zIGFzIFRyYWNpbmdJbnRlZ3JhdGlvbnMgfSBmcm9tIFwiQHNlbnRyeS90cmFjaW5nXCI7XG5cbmltcG9ydCBMb2dSb2NrZXQgZnJvbSBcImxvZ3JvY2tldFwiO1xuaW1wb3J0IHNldHVwTG9nUm9ja2V0UmVhY3QgZnJvbSBcImxvZ3JvY2tldC1yZWFjdFwiO1xuXG5kZWNsYXJlIGNvbnN0IFJFTEVBU0U6IHN0cmluZztcblxuZXhwb3J0IGRlZmF1bHQgKCkgPT4ge1xuICBTZW50cnkuaW5pdCh7XG4gICAgZHNuOlxuICAgICAgXCJodHRwczovL2ZmZTQzOWFjNjViODQ4ODlhMzc1MTgwMzdhMjNhN2IxQG80MzM1NTcuaW5nZXN0LnNlbnRyeS5pby81Mzg4OTE3XCIsXG4gICAgcmVsZWFzZTogUkVMRUFTRSxcbiAgICBlbnZpcm9ubWVudDogXCJ0ZXN0aW5nXCIsXG4gICAgaW50ZWdyYXRpb25zOiBbXG4gICAgICBuZXcgSW50ZWdyYXRpb25zLkNhcHR1cmVDb25zb2xlKHtcbiAgICAgICAgbGV2ZWxzOiBbXCJpbmZvXCJdLFxuICAgICAgfSksXG4gICAgICBuZXcgVHJhY2luZ0ludGVncmF0aW9ucy5Ccm93c2VyVHJhY2luZygpLFxuICAgIF0sXG4gIH0pO1xuXG4gIExvZ1JvY2tldC5pbml0KFwiNmF5cWk3L3ZvY2FsbHl0ZXN0XCIsIHtcbiAgICByZWxlYXNlOiBSRUxFQVNFLFxuICB9KTtcbiAgc2V0dXBMb2dSb2NrZXRSZWFjdChMb2dSb2NrZXQpO1xufTtcbiIsImltcG9ydCAqIGFzIFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0ICogYXMgUmVhY3RET00gZnJvbSBcInJlYWN0LWRvbVwiO1xuXG5pbXBvcnQgaW5pdCBmcm9tIFwiaW5pdFwiO1xuaW1wb3J0IEFwcCBmcm9tIFwiLi9BcHBcIjtcblxuaW5pdCgpO1xuXG5SZWFjdERPTS5yZW5kZXIoPEFwcCAvPiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIikpO1xuIiwiaW1wb3J0IHsgaXNTdHJpbmcgfSBmcm9tICcuL2lzJztcbmltcG9ydCB7IHNuaXBMaW5lIH0gZnJvbSAnLi9zdHJpbmcnO1xuLyoqXG4gKiBSZXF1aXJlcyBhIG1vZHVsZSB3aGljaCBpcyBwcm90ZWN0ZWQgYWdhaW5zdCBidW5kbGVyIG1pbmlmaWNhdGlvbi5cbiAqXG4gKiBAcGFyYW0gcmVxdWVzdCBUaGUgbW9kdWxlIHBhdGggdG8gcmVzb2x2ZVxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1vZHVsZS1ib3VuZGFyeS10eXBlc1xuZXhwb3J0IGZ1bmN0aW9uIGR5bmFtaWNSZXF1aXJlKG1vZCwgcmVxdWVzdCkge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5zYWZlLW1lbWJlci1hY2Nlc3NcbiAgICByZXR1cm4gbW9kLnJlcXVpcmUocmVxdWVzdCk7XG59XG4vKipcbiAqIENoZWNrcyB3aGV0aGVyIHdlJ3JlIGluIHRoZSBOb2RlLmpzIG9yIEJyb3dzZXIgZW52aXJvbm1lbnRcbiAqXG4gKiBAcmV0dXJucyBBbnN3ZXIgdG8gZ2l2ZW4gcXVlc3Rpb25cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTm9kZUVudigpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xufVxudmFyIGZhbGxiYWNrR2xvYmFsT2JqZWN0ID0ge307XG4vKipcbiAqIFNhZmVseSBnZXQgZ2xvYmFsIHNjb3BlIG9iamVjdFxuICpcbiAqIEByZXR1cm5zIEdsb2JhbCBzY29wZSBvYmplY3RcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEdsb2JhbE9iamVjdCgpIHtcbiAgICByZXR1cm4gKGlzTm9kZUVudigpXG4gICAgICAgID8gZ2xvYmFsXG4gICAgICAgIDogdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCdcbiAgICAgICAgICAgID8gd2luZG93XG4gICAgICAgICAgICA6IHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJ1xuICAgICAgICAgICAgICAgID8gc2VsZlxuICAgICAgICAgICAgICAgIDogZmFsbGJhY2tHbG9iYWxPYmplY3QpO1xufVxuLyoqXG4gKiBVVUlENCBnZW5lcmF0b3JcbiAqXG4gKiBAcmV0dXJucyBzdHJpbmcgR2VuZXJhdGVkIFVVSUQ0LlxuICovXG5leHBvcnQgZnVuY3Rpb24gdXVpZDQoKSB7XG4gICAgdmFyIGdsb2JhbCA9IGdldEdsb2JhbE9iamVjdCgpO1xuICAgIHZhciBjcnlwdG8gPSBnbG9iYWwuY3J5cHRvIHx8IGdsb2JhbC5tc0NyeXB0bztcbiAgICBpZiAoIShjcnlwdG8gPT09IHZvaWQgMCkgJiYgY3J5cHRvLmdldFJhbmRvbVZhbHVlcykge1xuICAgICAgICAvLyBVc2Ugd2luZG93LmNyeXB0byBBUEkgaWYgYXZhaWxhYmxlXG4gICAgICAgIHZhciBhcnIgPSBuZXcgVWludDE2QXJyYXkoOCk7XG4gICAgICAgIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMoYXJyKTtcbiAgICAgICAgLy8gc2V0IDQgaW4gYnl0ZSA3XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgICAgIGFyclszXSA9IChhcnJbM10gJiAweGZmZikgfCAweDQwMDA7XG4gICAgICAgIC8vIHNldCAyIG1vc3Qgc2lnbmlmaWNhbnQgYml0cyBvZiBieXRlIDkgdG8gJzEwJ1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICAgICAgICBhcnJbNF0gPSAoYXJyWzRdICYgMHgzZmZmKSB8IDB4ODAwMDtcbiAgICAgICAgdmFyIHBhZCA9IGZ1bmN0aW9uIChudW0pIHtcbiAgICAgICAgICAgIHZhciB2ID0gbnVtLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIHdoaWxlICh2Lmxlbmd0aCA8IDQpIHtcbiAgICAgICAgICAgICAgICB2ID0gXCIwXCIgKyB2O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHY7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAocGFkKGFyclswXSkgKyBwYWQoYXJyWzFdKSArIHBhZChhcnJbMl0pICsgcGFkKGFyclszXSkgKyBwYWQoYXJyWzRdKSArIHBhZChhcnJbNV0pICsgcGFkKGFycls2XSkgKyBwYWQoYXJyWzddKSk7XG4gICAgfVxuICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTA1MDM0L2hvdy10by1jcmVhdGUtYS1ndWlkLXV1aWQtaW4tamF2YXNjcmlwdC8yMTE3NTIzIzIxMTc1MjNcbiAgICByZXR1cm4gJ3h4eHh4eHh4eHh4eDR4eHh5eHh4eHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1iaXR3aXNlXG4gICAgICAgIHZhciByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYml0d2lzZVxuICAgICAgICB2YXIgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcbiAgICB9KTtcbn1cbi8qKlxuICogUGFyc2VzIHN0cmluZyBmb3JtIG9mIFVSTCBpbnRvIGFuIG9iamVjdFxuICogLy8gYm9ycm93ZWQgZnJvbSBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjMzk4NiNhcHBlbmRpeC1CXG4gKiAvLyBpbnRlbnRpb25hbGx5IHVzaW5nIHJlZ2V4IGFuZCBub3QgPGEvPiBocmVmIHBhcnNpbmcgdHJpY2sgYmVjYXVzZSBSZWFjdCBOYXRpdmUgYW5kIG90aGVyXG4gKiAvLyBlbnZpcm9ubWVudHMgd2hlcmUgRE9NIG1pZ2h0IG5vdCBiZSBhdmFpbGFibGVcbiAqIEByZXR1cm5zIHBhcnNlZCBVUkwgb2JqZWN0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVVybCh1cmwpIHtcbiAgICBpZiAoIXVybCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHZhciBtYXRjaCA9IHVybC5tYXRjaCgvXigoW146Lz8jXSspOik/KFxcL1xcLyhbXi8/I10qKSk/KFtePyNdKikoXFw/KFteI10qKSk/KCMoLiopKT8kLyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIC8vIGNvZXJjZSB0byB1bmRlZmluZWQgdmFsdWVzIHRvIGVtcHR5IHN0cmluZyBzbyB3ZSBkb24ndCBnZXQgJ3VuZGVmaW5lZCdcbiAgICB2YXIgcXVlcnkgPSBtYXRjaFs2XSB8fCAnJztcbiAgICB2YXIgZnJhZ21lbnQgPSBtYXRjaFs4XSB8fCAnJztcbiAgICByZXR1cm4ge1xuICAgICAgICBob3N0OiBtYXRjaFs0XSxcbiAgICAgICAgcGF0aDogbWF0Y2hbNV0sXG4gICAgICAgIHByb3RvY29sOiBtYXRjaFsyXSxcbiAgICAgICAgcmVsYXRpdmU6IG1hdGNoWzVdICsgcXVlcnkgKyBmcmFnbWVudCxcbiAgICB9O1xufVxuLyoqXG4gKiBFeHRyYWN0cyBlaXRoZXIgbWVzc2FnZSBvciB0eXBlK3ZhbHVlIGZyb20gYW4gZXZlbnQgdGhhdCBjYW4gYmUgdXNlZCBmb3IgdXNlci1mYWNpbmcgbG9nc1xuICogQHJldHVybnMgZXZlbnQncyBkZXNjcmlwdGlvblxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RXZlbnREZXNjcmlwdGlvbihldmVudCkge1xuICAgIGlmIChldmVudC5tZXNzYWdlKSB7XG4gICAgICAgIHJldHVybiBldmVudC5tZXNzYWdlO1xuICAgIH1cbiAgICBpZiAoZXZlbnQuZXhjZXB0aW9uICYmIGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXMgJiYgZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1swXSkge1xuICAgICAgICB2YXIgZXhjZXB0aW9uID0gZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1swXTtcbiAgICAgICAgaWYgKGV4Y2VwdGlvbi50eXBlICYmIGV4Y2VwdGlvbi52YWx1ZSkge1xuICAgICAgICAgICAgcmV0dXJuIGV4Y2VwdGlvbi50eXBlICsgXCI6IFwiICsgZXhjZXB0aW9uLnZhbHVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBleGNlcHRpb24udHlwZSB8fCBleGNlcHRpb24udmFsdWUgfHwgZXZlbnQuZXZlbnRfaWQgfHwgJzx1bmtub3duPic7XG4gICAgfVxuICAgIHJldHVybiBldmVudC5ldmVudF9pZCB8fCAnPHVua25vd24+Jztcbn1cbi8qKiBKU0RvYyAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvbnNvbGVTYW5kYm94KGNhbGxiYWNrKSB7XG4gICAgdmFyIGdsb2JhbCA9IGdldEdsb2JhbE9iamVjdCgpO1xuICAgIHZhciBsZXZlbHMgPSBbJ2RlYnVnJywgJ2luZm8nLCAnd2FybicsICdlcnJvcicsICdsb2cnLCAnYXNzZXJ0J107XG4gICAgaWYgKCEoJ2NvbnNvbGUnIGluIGdsb2JhbCkpIHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKCk7XG4gICAgfVxuICAgIHZhciBvcmlnaW5hbENvbnNvbGUgPSBnbG9iYWwuY29uc29sZTtcbiAgICB2YXIgd3JhcHBlZExldmVscyA9IHt9O1xuICAgIC8vIFJlc3RvcmUgYWxsIHdyYXBwZWQgY29uc29sZSBtZXRob2RzXG4gICAgbGV2ZWxzLmZvckVhY2goZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgIGlmIChsZXZlbCBpbiBnbG9iYWwuY29uc29sZSAmJiBvcmlnaW5hbENvbnNvbGVbbGV2ZWxdLl9fc2VudHJ5X29yaWdpbmFsX18pIHtcbiAgICAgICAgICAgIHdyYXBwZWRMZXZlbHNbbGV2ZWxdID0gb3JpZ2luYWxDb25zb2xlW2xldmVsXTtcbiAgICAgICAgICAgIG9yaWdpbmFsQ29uc29sZVtsZXZlbF0gPSBvcmlnaW5hbENvbnNvbGVbbGV2ZWxdLl9fc2VudHJ5X29yaWdpbmFsX187XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICAvLyBQZXJmb3JtIGNhbGxiYWNrIG1hbmlwdWxhdGlvbnNcbiAgICB2YXIgcmVzdWx0ID0gY2FsbGJhY2soKTtcbiAgICAvLyBSZXZlcnQgcmVzdG9yYXRpb24gdG8gd3JhcHBlZCBzdGF0ZVxuICAgIE9iamVjdC5rZXlzKHdyYXBwZWRMZXZlbHMpLmZvckVhY2goZnVuY3Rpb24gKGxldmVsKSB7XG4gICAgICAgIG9yaWdpbmFsQ29uc29sZVtsZXZlbF0gPSB3cmFwcGVkTGV2ZWxzW2xldmVsXTtcbiAgICB9KTtcbiAgICByZXR1cm4gcmVzdWx0O1xufVxuLyoqXG4gKiBBZGRzIGV4Y2VwdGlvbiB2YWx1ZXMsIHR5cGUgYW5kIHZhbHVlIHRvIGFuIHN5bnRoZXRpYyBFeGNlcHRpb24uXG4gKiBAcGFyYW0gZXZlbnQgVGhlIGV2ZW50IHRvIG1vZGlmeS5cbiAqIEBwYXJhbSB2YWx1ZSBWYWx1ZSBvZiB0aGUgZXhjZXB0aW9uLlxuICogQHBhcmFtIHR5cGUgVHlwZSBvZiB0aGUgZXhjZXB0aW9uLlxuICogQGhpZGRlblxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkRXhjZXB0aW9uVHlwZVZhbHVlKGV2ZW50LCB2YWx1ZSwgdHlwZSkge1xuICAgIGV2ZW50LmV4Y2VwdGlvbiA9IGV2ZW50LmV4Y2VwdGlvbiB8fCB7fTtcbiAgICBldmVudC5leGNlcHRpb24udmFsdWVzID0gZXZlbnQuZXhjZXB0aW9uLnZhbHVlcyB8fCBbXTtcbiAgICBldmVudC5leGNlcHRpb24udmFsdWVzWzBdID0gZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1swXSB8fCB7fTtcbiAgICBldmVudC5leGNlcHRpb24udmFsdWVzWzBdLnZhbHVlID0gZXZlbnQuZXhjZXB0aW9uLnZhbHVlc1swXS52YWx1ZSB8fCB2YWx1ZSB8fCAnJztcbiAgICBldmVudC5leGNlcHRpb24udmFsdWVzWzBdLnR5cGUgPSBldmVudC5leGNlcHRpb24udmFsdWVzWzBdLnR5cGUgfHwgdHlwZSB8fCAnRXJyb3InO1xufVxuLyoqXG4gKiBBZGRzIGV4Y2VwdGlvbiBtZWNoYW5pc20gdG8gYSBnaXZlbiBldmVudC5cbiAqIEBwYXJhbSBldmVudCBUaGUgZXZlbnQgdG8gbW9kaWZ5LlxuICogQHBhcmFtIG1lY2hhbmlzbSBNZWNoYW5pc20gb2YgdGhlIG1lY2hhbmlzbS5cbiAqIEBoaWRkZW5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZEV4Y2VwdGlvbk1lY2hhbmlzbShldmVudCwgbWVjaGFuaXNtKSB7XG4gICAgaWYgKG1lY2hhbmlzbSA9PT0gdm9pZCAwKSB7IG1lY2hhbmlzbSA9IHt9OyB9XG4gICAgLy8gVE9ETzogVXNlIHJlYWwgdHlwZSB3aXRoIGBrZXlvZiBNZWNoYW5pc21gIHRoaW5neSBhbmQgbWF5YmUgbWFrZSBpdCBiZXR0ZXI/XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gQHRzLWlnbm9yZSBUeXBlICdNZWNoYW5pc20gfCB7fScgaXMgbm90IGFzc2lnbmFibGUgdG8gdHlwZSAnTWVjaGFuaXNtIHwgdW5kZWZpbmVkJ1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5vbi1udWxsLWFzc2VydGlvblxuICAgICAgICBldmVudC5leGNlcHRpb24udmFsdWVzWzBdLm1lY2hhbmlzbSA9IGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXNbMF0ubWVjaGFuaXNtIHx8IHt9O1xuICAgICAgICBPYmplY3Qua2V5cyhtZWNoYW5pc20pLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZSBNZWNoYW5pc20gaGFzIG5vIGluZGV4IHNpZ25hdHVyZVxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1ub24tbnVsbC1hc3NlcnRpb25cbiAgICAgICAgICAgIGV2ZW50LmV4Y2VwdGlvbi52YWx1ZXNbMF0ubWVjaGFuaXNtW2tleV0gPSBtZWNoYW5pc21ba2V5XTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGNhdGNoIChfb08pIHtcbiAgICAgICAgLy8gbm8tZW1wdHlcbiAgICB9XG59XG4vKipcbiAqIEEgc2FmZSBmb3JtIG9mIGxvY2F0aW9uLmhyZWZcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExvY2F0aW9uSHJlZigpIHtcbiAgICB0cnkge1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcbiAgICB9XG4gICAgY2F0Y2ggKG9PKSB7XG4gICAgICAgIHJldHVybiAnJztcbiAgICB9XG59XG4vKipcbiAqIEdpdmVuIGEgY2hpbGQgRE9NIGVsZW1lbnQsIHJldHVybnMgYSBxdWVyeS1zZWxlY3RvciBzdGF0ZW1lbnQgZGVzY3JpYmluZyB0aGF0XG4gKiBhbmQgaXRzIGFuY2VzdG9yc1xuICogZS5nLiBbSFRNTEVsZW1lbnRdID0+IGJvZHkgPiBkaXYgPiBpbnB1dCNmb28uYnRuW25hbWU9YmF6XVxuICogQHJldHVybnMgZ2VuZXJhdGVkIERPTSBwYXRoXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBodG1sVHJlZUFzU3RyaW5nKGVsZW0pIHtcbiAgICAvLyB0cnkvY2F0Y2ggYm90aDpcbiAgICAvLyAtIGFjY2Vzc2luZyBldmVudC50YXJnZXQgKHNlZSBnZXRzZW50cnkvcmF2ZW4tanMjODM4LCAjNzY4KVxuICAgIC8vIC0gYGh0bWxUcmVlQXNTdHJpbmdgIGJlY2F1c2UgaXQncyBjb21wbGV4LCBhbmQganVzdCBhY2Nlc3NpbmcgdGhlIERPTSBpbmNvcnJlY3RseVxuICAgIC8vIC0gY2FuIHRocm93IGFuIGV4Y2VwdGlvbiBpbiBzb21lIGNpcmN1bXN0YW5jZXMuXG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIGN1cnJlbnRFbGVtID0gZWxlbTtcbiAgICAgICAgdmFyIE1BWF9UUkFWRVJTRV9IRUlHSFQgPSA1O1xuICAgICAgICB2YXIgTUFYX09VVFBVVF9MRU4gPSA4MDtcbiAgICAgICAgdmFyIG91dCA9IFtdO1xuICAgICAgICB2YXIgaGVpZ2h0ID0gMDtcbiAgICAgICAgdmFyIGxlbiA9IDA7XG4gICAgICAgIHZhciBzZXBhcmF0b3IgPSAnID4gJztcbiAgICAgICAgdmFyIHNlcExlbmd0aCA9IHNlcGFyYXRvci5sZW5ndGg7XG4gICAgICAgIHZhciBuZXh0U3RyID0gdm9pZCAwO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGx1c3BsdXNcbiAgICAgICAgd2hpbGUgKGN1cnJlbnRFbGVtICYmIGhlaWdodCsrIDwgTUFYX1RSQVZFUlNFX0hFSUdIVCkge1xuICAgICAgICAgICAgbmV4dFN0ciA9IF9odG1sRWxlbWVudEFzU3RyaW5nKGN1cnJlbnRFbGVtKTtcbiAgICAgICAgICAgIC8vIGJhaWwgb3V0IGlmXG4gICAgICAgICAgICAvLyAtIG5leHRTdHIgaXMgdGhlICdodG1sJyBlbGVtZW50XG4gICAgICAgICAgICAvLyAtIHRoZSBsZW5ndGggb2YgdGhlIHN0cmluZyB0aGF0IHdvdWxkIGJlIGNyZWF0ZWQgZXhjZWVkcyBNQVhfT1VUUFVUX0xFTlxuICAgICAgICAgICAgLy8gICAoaWdub3JlIHRoaXMgbGltaXQgaWYgd2UgYXJlIG9uIHRoZSBmaXJzdCBpdGVyYXRpb24pXG4gICAgICAgICAgICBpZiAobmV4dFN0ciA9PT0gJ2h0bWwnIHx8IChoZWlnaHQgPiAxICYmIGxlbiArIG91dC5sZW5ndGggKiBzZXBMZW5ndGggKyBuZXh0U3RyLmxlbmd0aCA+PSBNQVhfT1VUUFVUX0xFTikpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG91dC5wdXNoKG5leHRTdHIpO1xuICAgICAgICAgICAgbGVuICs9IG5leHRTdHIubGVuZ3RoO1xuICAgICAgICAgICAgY3VycmVudEVsZW0gPSBjdXJyZW50RWxlbS5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBvdXQucmV2ZXJzZSgpLmpvaW4oc2VwYXJhdG9yKTtcbiAgICB9XG4gICAgY2F0Y2ggKF9vTykge1xuICAgICAgICByZXR1cm4gJzx1bmtub3duPic7XG4gICAgfVxufVxuLyoqXG4gKiBSZXR1cm5zIGEgc2ltcGxlLCBxdWVyeS1zZWxlY3RvciByZXByZXNlbnRhdGlvbiBvZiBhIERPTSBlbGVtZW50XG4gKiBlLmcuIFtIVE1MRWxlbWVudF0gPT4gaW5wdXQjZm9vLmJ0bltuYW1lPWJhel1cbiAqIEByZXR1cm5zIGdlbmVyYXRlZCBET00gcGF0aFxuICovXG5mdW5jdGlvbiBfaHRtbEVsZW1lbnRBc1N0cmluZyhlbCkge1xuICAgIHZhciBlbGVtID0gZWw7XG4gICAgdmFyIG91dCA9IFtdO1xuICAgIHZhciBjbGFzc05hbWU7XG4gICAgdmFyIGNsYXNzZXM7XG4gICAgdmFyIGtleTtcbiAgICB2YXIgYXR0cjtcbiAgICB2YXIgaTtcbiAgICBpZiAoIWVsZW0gfHwgIWVsZW0udGFnTmFtZSkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgfVxuICAgIG91dC5wdXNoKGVsZW0udGFnTmFtZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAoZWxlbS5pZCkge1xuICAgICAgICBvdXQucHVzaChcIiNcIiArIGVsZW0uaWQpO1xuICAgIH1cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0XG4gICAgY2xhc3NOYW1lID0gZWxlbS5jbGFzc05hbWU7XG4gICAgaWYgKGNsYXNzTmFtZSAmJiBpc1N0cmluZyhjbGFzc05hbWUpKSB7XG4gICAgICAgIGNsYXNzZXMgPSBjbGFzc05hbWUuc3BsaXQoL1xccysvKTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGNsYXNzZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIG91dC5wdXNoKFwiLlwiICsgY2xhc3Nlc1tpXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgdmFyIGFsbG93ZWRBdHRycyA9IFsndHlwZScsICduYW1lJywgJ3RpdGxlJywgJ2FsdCddO1xuICAgIGZvciAoaSA9IDA7IGkgPCBhbGxvd2VkQXR0cnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAga2V5ID0gYWxsb3dlZEF0dHJzW2ldO1xuICAgICAgICBhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoa2V5KTtcbiAgICAgICAgaWYgKGF0dHIpIHtcbiAgICAgICAgICAgIG91dC5wdXNoKFwiW1wiICsga2V5ICsgXCI9XFxcIlwiICsgYXR0ciArIFwiXFxcIl1cIik7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG91dC5qb2luKCcnKTtcbn1cbnZhciBJTklUSUFMX1RJTUUgPSBEYXRlLm5vdygpO1xudmFyIHByZXZOb3cgPSAwO1xudmFyIHBlcmZvcm1hbmNlRmFsbGJhY2sgPSB7XG4gICAgbm93OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpIC0gSU5JVElBTF9USU1FO1xuICAgICAgICBpZiAobm93IDwgcHJldk5vdykge1xuICAgICAgICAgICAgbm93ID0gcHJldk5vdztcbiAgICAgICAgfVxuICAgICAgICBwcmV2Tm93ID0gbm93O1xuICAgICAgICByZXR1cm4gbm93O1xuICAgIH0sXG4gICAgdGltZU9yaWdpbjogSU5JVElBTF9USU1FLFxufTtcbmV4cG9ydCB2YXIgY3Jvc3NQbGF0Zm9ybVBlcmZvcm1hbmNlID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoaXNOb2RlRW52KCkpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHZhciBwZXJmSG9va3MgPSBkeW5hbWljUmVxdWlyZShtb2R1bGUsICdwZXJmX2hvb2tzJyk7XG4gICAgICAgICAgICByZXR1cm4gcGVyZkhvb2tzLnBlcmZvcm1hbmNlO1xuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChfKSB7XG4gICAgICAgICAgICByZXR1cm4gcGVyZm9ybWFuY2VGYWxsYmFjaztcbiAgICAgICAgfVxuICAgIH1cbiAgICB2YXIgcGVyZm9ybWFuY2UgPSBnZXRHbG9iYWxPYmplY3QoKS5wZXJmb3JtYW5jZTtcbiAgICBpZiAoIXBlcmZvcm1hbmNlIHx8ICFwZXJmb3JtYW5jZS5ub3cpIHtcbiAgICAgICAgcmV0dXJuIHBlcmZvcm1hbmNlRmFsbGJhY2s7XG4gICAgfVxuICAgIC8vIFBvbHlmaWxsIGZvciBwZXJmb3JtYW5jZS50aW1lT3JpZ2luLlxuICAgIC8vXG4gICAgLy8gV2hpbGUgcGVyZm9ybWFuY2UudGltaW5nLm5hdmlnYXRpb25TdGFydCBpcyBkZXByZWNhdGVkIGluIGZhdm9yIG9mIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW4sIHBlcmZvcm1hbmNlLnRpbWVPcmlnaW5cbiAgICAvLyBpcyBub3QgYXMgd2lkZWx5IHN1cHBvcnRlZC4gTmFtZWx5LCBwZXJmb3JtYW5jZS50aW1lT3JpZ2luIGlzIHVuZGVmaW5lZCBpbiBTYWZhcmkgYXMgb2Ygd3JpdGluZy5cbiAgICBpZiAocGVyZm9ybWFuY2UudGltZU9yaWdpbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIC8vIEFzIG9mIHdyaXRpbmcsIHBlcmZvcm1hbmNlLnRpbWluZyBpcyBub3QgYXZhaWxhYmxlIGluIFdlYiBXb3JrZXJzIGluIG1haW5zdHJlYW0gYnJvd3NlcnMsIHNvIGl0IGlzIG5vdCBhbHdheXMgYVxuICAgICAgICAvLyB2YWxpZCBmYWxsYmFjay4gSW4gdGhlIGFic2VuY2Ugb2YgYSBpbml0aWFsIHRpbWUgcHJvdmlkZWQgYnkgdGhlIGJyb3dzZXIsIGZhbGxiYWNrIHRvIElOSVRJQUxfVElNRS5cbiAgICAgICAgLy8gQHRzLWlnbm9yZSBpZ25vcmVkIGJlY2F1c2UgdGltZU9yaWdpbiBpcyBhIHJlYWRvbmx5IHByb3BlcnR5IGJ1dCB3ZSB3YW50IHRvIG92ZXJyaWRlXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBkZXByZWNhdGlvbi9kZXByZWNhdGlvblxuICAgICAgICBwZXJmb3JtYW5jZS50aW1lT3JpZ2luID0gKHBlcmZvcm1hbmNlLnRpbWluZyAmJiBwZXJmb3JtYW5jZS50aW1pbmcubmF2aWdhdGlvblN0YXJ0KSB8fCBJTklUSUFMX1RJTUU7XG4gICAgfVxuICAgIHJldHVybiBwZXJmb3JtYW5jZTtcbn0pKCk7XG4vKipcbiAqIFJldHVybnMgYSB0aW1lc3RhbXAgaW4gc2Vjb25kcyB3aXRoIG1pbGxpc2Vjb25kcyBwcmVjaXNpb24gc2luY2UgdGhlIFVOSVggZXBvY2ggY2FsY3VsYXRlZCB3aXRoIHRoZSBtb25vdG9uaWMgY2xvY2suXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0aW1lc3RhbXBXaXRoTXMoKSB7XG4gICAgcmV0dXJuIChjcm9zc1BsYXRmb3JtUGVyZm9ybWFuY2UudGltZU9yaWdpbiArIGNyb3NzUGxhdGZvcm1QZXJmb3JtYW5jZS5ub3coKSkgLyAxMDAwO1xufVxuLy8gaHR0cHM6Ly9zZW12ZXIub3JnLyNpcy10aGVyZS1hLXN1Z2dlc3RlZC1yZWd1bGFyLWV4cHJlc3Npb24tcmVnZXgtdG8tY2hlY2stYS1zZW12ZXItc3RyaW5nXG52YXIgU0VNVkVSX1JFR0VYUCA9IC9eKDB8WzEtOV1cXGQqKVxcLigwfFsxLTldXFxkKilcXC4oMHxbMS05XVxcZCopKD86LSgoPzowfFsxLTldXFxkKnxcXGQqW2EtekEtWi1dWzAtOWEtekEtWi1dKikoPzpcXC4oPzowfFsxLTldXFxkKnxcXGQqW2EtekEtWi1dWzAtOWEtekEtWi1dKikpKikpPyg/OlxcKyhbMC05YS16QS1aLV0rKD86XFwuWzAtOWEtekEtWi1dKykqKSk/JC87XG4vKipcbiAqIFBhcnNlcyBpbnB1dCBpbnRvIGEgU2VtVmVyIGludGVyZmFjZVxuICogQHBhcmFtIGlucHV0IHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiBhIHNlbXZlciB2ZXJzaW9uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbXZlcihpbnB1dCkge1xuICAgIHZhciBtYXRjaCA9IGlucHV0Lm1hdGNoKFNFTVZFUl9SRUdFWFApIHx8IFtdO1xuICAgIHZhciBtYWpvciA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgdmFyIG1pbm9yID0gcGFyc2VJbnQobWF0Y2hbMl0sIDEwKTtcbiAgICB2YXIgcGF0Y2ggPSBwYXJzZUludChtYXRjaFszXSwgMTApO1xuICAgIHJldHVybiB7XG4gICAgICAgIGJ1aWxkbWV0YWRhdGE6IG1hdGNoWzVdLFxuICAgICAgICBtYWpvcjogaXNOYU4obWFqb3IpID8gdW5kZWZpbmVkIDogbWFqb3IsXG4gICAgICAgIG1pbm9yOiBpc05hTihtaW5vcikgPyB1bmRlZmluZWQgOiBtaW5vcixcbiAgICAgICAgcGF0Y2g6IGlzTmFOKHBhdGNoKSA/IHVuZGVmaW5lZCA6IHBhdGNoLFxuICAgICAgICBwcmVyZWxlYXNlOiBtYXRjaFs0XSxcbiAgICB9O1xufVxudmFyIGRlZmF1bHRSZXRyeUFmdGVyID0gNjAgKiAxMDAwOyAvLyA2MCBzZWNvbmRzXG4vKipcbiAqIEV4dHJhY3RzIFJldHJ5LUFmdGVyIHZhbHVlIGZyb20gdGhlIHJlcXVlc3QgaGVhZGVyIG9yIHJldHVybnMgZGVmYXVsdCB2YWx1ZVxuICogQHBhcmFtIG5vdyBjdXJyZW50IHVuaXggdGltZXN0YW1wXG4gKiBAcGFyYW0gaGVhZGVyIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiAnUmV0cnktQWZ0ZXInIGhlYWRlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VSZXRyeUFmdGVySGVhZGVyKG5vdywgaGVhZGVyKSB7XG4gICAgaWYgKCFoZWFkZXIpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRSZXRyeUFmdGVyO1xuICAgIH1cbiAgICB2YXIgaGVhZGVyRGVsYXkgPSBwYXJzZUludChcIlwiICsgaGVhZGVyLCAxMCk7XG4gICAgaWYgKCFpc05hTihoZWFkZXJEZWxheSkpIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlckRlbGF5ICogMTAwMDtcbiAgICB9XG4gICAgdmFyIGhlYWRlckRhdGUgPSBEYXRlLnBhcnNlKFwiXCIgKyBoZWFkZXIpO1xuICAgIGlmICghaXNOYU4oaGVhZGVyRGF0ZSkpIHtcbiAgICAgICAgcmV0dXJuIGhlYWRlckRhdGUgLSBub3c7XG4gICAgfVxuICAgIHJldHVybiBkZWZhdWx0UmV0cnlBZnRlcjtcbn1cbnZhciBkZWZhdWx0RnVuY3Rpb25OYW1lID0gJzxhbm9ueW1vdXM+Jztcbi8qKlxuICogU2FmZWx5IGV4dHJhY3QgZnVuY3Rpb24gbmFtZSBmcm9tIGl0c2VsZlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0RnVuY3Rpb25OYW1lKGZuKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKCFmbiB8fCB0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHJldHVybiBkZWZhdWx0RnVuY3Rpb25OYW1lO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmbi5uYW1lIHx8IGRlZmF1bHRGdW5jdGlvbk5hbWU7XG4gICAgfVxuICAgIGNhdGNoIChlKSB7XG4gICAgICAgIC8vIEp1c3QgYWNjZXNzaW5nIGN1c3RvbSBwcm9wcyBpbiBzb21lIFNlbGVuaXVtIGVudmlyb25tZW50c1xuICAgICAgICAvLyBjYW4gY2F1c2UgYSBcIlBlcm1pc3Npb24gZGVuaWVkXCIgZXhjZXB0aW9uIChzZWUgcmF2ZW4tanMjNDk1KS5cbiAgICAgICAgcmV0dXJuIGRlZmF1bHRGdW5jdGlvbk5hbWU7XG4gICAgfVxufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIGFkZHMgY29udGV4dCAocHJlL3Bvc3QvbGluZSkgbGluZXMgdG8gdGhlIHByb3ZpZGVkIGZyYW1lXG4gKlxuICogQHBhcmFtIGxpbmVzIHN0cmluZ1tdIGNvbnRhaW5pbmcgYWxsIGxpbmVzXG4gKiBAcGFyYW0gZnJhbWUgU3RhY2tGcmFtZSB0aGF0IHdpbGwgYmUgbXV0YXRlZFxuICogQHBhcmFtIGxpbmVzT2ZDb250ZXh0IG51bWJlciBvZiBjb250ZXh0IGxpbmVzIHdlIHdhbnQgdG8gYWRkIHByZS9wb3N0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhZGRDb250ZXh0VG9GcmFtZShsaW5lcywgZnJhbWUsIGxpbmVzT2ZDb250ZXh0KSB7XG4gICAgaWYgKGxpbmVzT2ZDb250ZXh0ID09PSB2b2lkIDApIHsgbGluZXNPZkNvbnRleHQgPSA1OyB9XG4gICAgdmFyIGxpbmVubyA9IGZyYW1lLmxpbmVubyB8fCAwO1xuICAgIHZhciBtYXhMaW5lcyA9IGxpbmVzLmxlbmd0aDtcbiAgICB2YXIgc291cmNlTGluZSA9IE1hdGgubWF4KE1hdGgubWluKG1heExpbmVzLCBsaW5lbm8gLSAxKSwgMCk7XG4gICAgZnJhbWUucHJlX2NvbnRleHQgPSBsaW5lc1xuICAgICAgICAuc2xpY2UoTWF0aC5tYXgoMCwgc291cmNlTGluZSAtIGxpbmVzT2ZDb250ZXh0KSwgc291cmNlTGluZSlcbiAgICAgICAgLm1hcChmdW5jdGlvbiAobGluZSkgeyByZXR1cm4gc25pcExpbmUobGluZSwgMCk7IH0pO1xuICAgIGZyYW1lLmNvbnRleHRfbGluZSA9IHNuaXBMaW5lKGxpbmVzW01hdGgubWluKG1heExpbmVzIC0gMSwgc291cmNlTGluZSldLCBmcmFtZS5jb2xubyB8fCAwKTtcbiAgICBmcmFtZS5wb3N0X2NvbnRleHQgPSBsaW5lc1xuICAgICAgICAuc2xpY2UoTWF0aC5taW4oc291cmNlTGluZSArIDEsIG1heExpbmVzKSwgc291cmNlTGluZSArIDEgKyBsaW5lc09mQ29udGV4dClcbiAgICAgICAgLm1hcChmdW5jdGlvbiAobGluZSkgeyByZXR1cm4gc25pcExpbmUobGluZSwgMCk7IH0pO1xufVxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9bWlzYy5qcy5tYXAiXSwic291cmNlUm9vdCI6IiJ9