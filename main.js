!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t){e.exports=React},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,"a",(function(){return r}))},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var o=a.apply(null,r);o&&e.push(o)}else if("object"===i)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t){e.exports=PropTypes},function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,i,o,s],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";var r=n(6),a=!1,i=!1;try{var o={get passive(){return a=!0},get once(){return i=a=!0}};r.a&&(window.addEventListener("test",o,o),window.removeEventListener("test",o,!0))}catch(e){}var s=function(e,t,n,r){if(r&&"boolean"!=typeof r&&!i){var o=r.once,s=r.capture,c=n;!i&&o&&(c=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=c),e.addEventListener(t,c,a?r:s)}e.addEventListener(t,n,r)};var c=function(e,t,n,r){var a=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};t.a=function(e,t,n,r){return s(e,t,n,r),function(){c(e,t,n,r)}}},,function(e,t){e.exports=reactLifecyclesCompat},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(12);function a(e,t){return function(e){var t=Object(r.a)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var i=/([A-Z])/g;var o=/^ms-/;function s(e){return function(e){return e.replace(i,"-$1").toLowerCase()}(e).replace(o,"-ms-")}var c=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;t.a=function(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(s(t))||a(e).getPropertyValue(s(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!c.test(e))}(a)?n+=s(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(s(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(2),i=n(0);n(8);function o(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function c(e,t){return Object.keys(t).reduce((function(n,c){var u,l=n,f=l[o(c)],d=l[c],p=Object(a.a)(l,[o(c),c].map(s)),m=t[c],v=function(e,t,n){var r=Object(i.useRef)(void 0!==e),a=Object(i.useState)(t),o=a[0],s=a[1],c=void 0!==e,u=r.current;return r.current=c,!c&&u&&o!==t&&s(t),[c?e:o,Object(i.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}(d,f,e[m]),h=v[0],b=v[1];return Object(r.a)({},p,((u={})[c]=h,u[m]=b,u))}),e)}n(5),n(11)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);var a=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t};function i(e){var t=a(e);return Object(r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}},function(e,t,n){var r=n(17),a=n(18);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],a=0;a<e.length;a++){var i=e[a],c=t.base?i[0]+t.base:i[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var f=s(l),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(o[f].references++,o[f].updater(d)):o.push({identifier:l,updater:h(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,f=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,v=0;function h(e,t){var n,r,a;if(t.singleton){var i=v++;n=m||(m=u(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=u(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=s(n[r]);o[a].references--}for(var i=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=i}}}},function(e,t,n){},function(e,t){e.exports=ml5},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(4),o=n.n(i),s=(n(16),n(1)),c=n(2),u=n(3),l=n.n(u),f=a.a.createContext({});f.Consumer,f.Provider;function d(e,t){var n=Object(r.useContext)(f);return e||n[t]||t}var p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)};function m(e){return!e||"#"===e.trim()}var v=a.a.forwardRef((function(e,t){var n=e.as,r=void 0===n?"a":n,i=e.disabled,o=e.onKeyDown,u=Object(c.a)(e,["as","disabled","onKeyDown"]),l=function(e){var t=u.href,n=u.onClick;(i||m(t))&&e.preventDefault(),i?e.stopPropagation():n&&n(e)};return m(u.href)&&(u.role=u.role||"button",u.href=u.href||"#"),i&&(u.tabIndex=-1,u["aria-disabled"]=!0),a.a.createElement(r,Object(s.a)({ref:t},u,{onClick:l,onKeyDown:p((function(e){" "===e.key&&(e.preventDefault(),l(e))}),o)}))}));v.displayName="SafeAnchor";var h=v,b=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.size,o=e.active,u=e.className,f=e.block,p=e.type,m=e.as,v=Object(c.a)(e,["bsPrefix","variant","size","active","className","block","type","as"]),b=d(n,"btn"),y=l()(u,b,o&&"active",b+"-"+r,f&&b+"-block",i&&b+"-"+i);if(v.href)return a.a.createElement(h,Object(s.a)({},v,{as:m,ref:t,className:l()(y,v.disabled&&"disabled")}));t&&(v.ref=t),p?v.type=p:m||(v.type="button");var E=m||"button";return a.a.createElement(E,Object(s.a)({},v,{className:y}))}));b.displayName="Button",b.defaultProps={variant:"primary",active:!1,disabled:!1};var y=b;const E=()=>console;n(19);const g=["A","B♭","B","C","C♯","D","D♯","E","F","F♯","G","G♯"],x=e=>440*Math.pow(2,(e-69)/12),O=e=>69+12*Math.log2(e/440);class j{constructor(e){this._freq=e,this.note=Math.round(O(e)),this.frequency=x(this.note),this.name=(e=>g[(e-21)%12])(this.note),this.octave=(e=>Math.floor(e/12-1))(this.note)}}const w=e=>{if(null==e)return;const t=new j(e);return{frequency:e,target:t,note:O(e),diff:(n=t.frequency,r=e,1200*Math.log2(r/n))};var n,r};var C=function(e){return this instanceof C?(this.v=e,this):new C(e)},N=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof C?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}};const S=E(),k="https://cdn.jsdelivr.net/gh/ml5js/ml5-data-and-models/models/pitch-detection/crepe/";function P(e){const[t,n]=Object(r.useState)(!1),[a,i]=Object(r.useState)();return Object(r.useEffect)(()=>{let r=!0;return e.generator.next().then(e=>{!e.done&&r&&(i(e.value),n(!t))}),()=>{r=!1}},[t]),Object(r.useEffect)(()=>{e.onTick&&a&&e.onTick(a)},[a]),e.children(a)}const T=E();function M({pitchGenerator:e,timeoutMs:t,onFinish:n}){const[i,o]=Object(r.useState)([]),[s,c]=Object(r.useState)(!1);Object(r.useEffect)(()=>{T.info("Setting up the timeout.");const e=setTimeout(()=>{c(!0)},t);return T.info("Set up timer %d for %d ms.",e,t),()=>{T.info("Clearing out the timeout %d.",e),clearTimeout(e)}},[]),Object(r.useEffect)(()=>{s&&(T.info("Finishing recording."),n(i))},[s,i]);return e?a.a.createElement(a.a.Fragment,null,a.a.createElement(P,{generator:e,onTick:e=>{const t=i.concat([e]);o(t)}},e=>a.a.createElement("h3",null,"Listening..."))):a.a.createElement("span",null,"Initializing...")}var R=n(14),L=n(15),D=n(6),A=n(13),_=n(9);D.a&&window;function I(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e){var t=document.createEvent("HTMLEvents");t.initEvent("transitionend",!0,!0),e.dispatchEvent(t)}(e)}),t+n),i=Object(_.a)(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}var F=function(e,t,n){var r,a,i;null==n&&(r=e,a=Object(A.a)(r,"transitionDuration")||"",i=-1===a.indexOf("ms")?1e3:1,n=parseFloat(a)*i||0);var o=I(e,n),s=Object(_.a)(e,"transitionend",t);return function(){o(),s()}},G=n(5),U=n(7),q=n.n(U),B=!1,z=a.a.createContext(null),H=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a="exited",r.appearStatus="entering"):a="entered":a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}Object(G.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[o.a.findDOMNode(this),r],i=a[0],s=a[1],c=this.getTimeouts(),u=r?c.appear:c.enter;!e&&!n||B?this.safeSetState({status:"entered"},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:"entering"},(function(){t.props.onEntering(i,s),t.onTransitionEnd(u,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(i,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:o.a.findDOMNode(this);t&&!B?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:o.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],s=a[1];this.props.addEndListener(i,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(c.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.a.createElement(z.Provider,{value:null},"function"==typeof n?n(e,r):a.a.cloneElement(a.a.Children.only(n),r))},t}(a.a.Component);function V(){}H.contextType=z,H.propTypes={},H.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:V,onEntering:V,onEntered:V,onExit:V,onExiting:V,onExited:V},H.UNMOUNTED="unmounted",H.EXITED="exited",H.ENTERING="entering",H.ENTERED="entered",H.EXITING="exiting";var X,K=H;var Y=((X={}).entering="show",X.entered="show",X),Z=a.a.forwardRef((function(e,t){var n=e.className,i=e.children,o=Object(c.a)(e,["className","children"]),u=Object(r.useCallback)((function(e){!function(e){e.offsetHeight}(e),o.onEnter&&o.onEnter(e)}),[o]);return a.a.createElement(K,Object(s.a)({ref:t,addEndListener:F},o,{onEnter:u}),(function(e,t){return a.a.cloneElement(i,Object(s.a)({},t,{className:l()("fade",n,i.props.className,Y[e])}))}))}));Z.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},Z.displayName="Fade";var $=Z,J={label:q.a.string.isRequired,onClick:q.a.func},W=a.a.forwardRef((function(e,t){var n=e.label,r=e.onClick,i=e.className,o=Object(c.a)(e,["label","onClick","className"]);return a.a.createElement("button",Object(s.a)({ref:t,type:"button",className:l()("close",i),onClick:r},o),a.a.createElement("span",{"aria-hidden":"true"},"×"),a.a.createElement("span",{className:"sr-only"},n))}));W.displayName="CloseButton",W.propTypes=J,W.defaultProps={label:"Close"};var Q=W,ee=/-(.)/g;var te=function(e){return e[0].toUpperCase()+(t=e,t.replace(ee,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function ne(e,t){var n=void 0===t?{}:t,r=n.displayName,i=void 0===r?te(e):r,o=n.Component,u=n.defaultProps,f=a.a.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,u=t.as,f=void 0===u?o||"div":u,p=Object(c.a)(t,["className","bsPrefix","as"]),m=d(i,e);return a.a.createElement(f,Object(s.a)({ref:n,className:l()(r,m)},p))}));return f.defaultProps=u,f.displayName=i,f}var re,ae=(re="h4",a.a.forwardRef((function(e,t){return a.a.createElement("div",Object(s.a)({},e,{ref:t,className:l()(e.className,re)}))})));ae.displayName="DivStyledAsH4";var ie=ne("alert-heading",{Component:ae}),oe=ne("alert-link",{Component:h}),se={show:!0,transition:$,closeLabel:"Close alert"},ce=a.a.forwardRef((function(e,t){var n=Object(R.a)(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,o=n.closeLabel,u=n.className,f=n.children,p=n.variant,m=n.onClose,v=n.dismissible,h=n.transition,b=Object(c.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),y=d(r,"alert"),E=Object(L.a)((function(e){m&&m(!1,e)})),g=!0===h?$:h,x=a.a.createElement("div",Object(s.a)({role:"alert"},g?b:void 0,{ref:t,className:l()(u,y,p&&y+"-"+p,v&&y+"-dismissible")}),v&&a.a.createElement(Q,{onClick:E,label:o}),f);return g?a.a.createElement(g,Object(s.a)({unmountOnExit:!0},b,{ref:void 0,in:i}),x):i?x:null}));ce.displayName="Alert",ce.defaultProps=se,ce.Link=oe,ce.Heading=ie;var ue=ce;const le=E();function fe({recording:e,reference:t}){const n=e.filter(e=>!!e).map(e=>e.frequency-t.frequency),r=n.reduce((e,t)=>e+t,0);return le.info("Sum: %f",r),a.a.createElement(ue,{variant:"success"},"Received ",n.length," sample(s) averaging to ",r/n.length," from C",a.a.createElement("sub",null,"4"),".")}const de=E(),pe=()=>{const[e,t]=Object(r.useState)(!1),[n,i]=Object(r.useState)(new AudioContext),[o,s]=Object(r.useState)(),[c,u]=Object(r.useState)(),[l,f]=Object(r.useState)();if(Object(r.useEffect)(()=>{e&&(de.info("Acquiring microphone."),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{de.debug("Microphone initialized with stream: %j, active?, %s, state: %s.",e,e.active,e.getAudioTracks()[0].readyState),s(e)}))},[e]),Object(r.useEffect)(()=>{if(e&&void 0!==o)return de.info("Setting up the context %j and stream %j",n,o),n.createMediaStreamSource(o),de.info("Initialized audio."),u(function(e,t){return N(this,arguments,(function*(){let n=!1;const r=ml5.pitchDetection(k,e,t);for(S.info("Created pitch detection.",r),yield C(r.ready),S.info("Initialized the model.");t.active&&"running"===e.state;){const e=yield C(r.getPitch());n||(S.info("Got first detection %j.",e),n=!0),yield yield C(w(e))}return yield C(void 0)}))}(n,o)),n.resume(),()=>{de.info("Cleanup the audio settings"),de.debug("Stop all tracks in the stream %j.",o),null==o||o.getTracks().forEach(e=>e.stop()),de.debug("Suspend audio context %j.",n),n.suspend()}},[o,e]),void 0!==l){const e=w(x(60));return a.a.createElement(fe,{recording:l,reference:e})}return e&&c?a.a.createElement(M,{onFinish:e=>{de.info("Result, %j",e),f(e),t(!1)},pitchGenerator:c,timeoutMs:5e3}):a.a.createElement(y,{onClick:()=>t(!0),variant:"outline-primary",size:"lg"},"Start")};var me=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,o=void 0===i?"div":i,u=e.className,f=Object(c.a)(e,["bsPrefix","fluid","as","className"]),p=d(n,"container"),m="string"==typeof r?"-"+r:"-fluid";return a.a.createElement(o,Object(s.a)({ref:t},f,{className:l()(u,r?""+p+m:p)}))}));me.displayName="Container",me.defaultProps={fluid:!1};var ve=me,he=["xl","lg","md","sm","xs"],be=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.noGutters,o=e.as,u=void 0===o?"div":o,f=Object(c.a)(e,["bsPrefix","className","noGutters","as"]),p=d(n,"row"),m=p+"-cols",v=[];return he.forEach((function(e){var t,n=f[e];delete f[e];var r="xs"!==e?"-"+e:"";null!=(t=null!=n&&"object"==typeof n?n.cols:n)&&v.push(""+m+r+"-"+t)})),a.a.createElement(u,Object(s.a)({ref:t},f,{className:l.a.apply(void 0,[r,p,i&&"no-gutters"].concat(v))}))}));be.displayName="Row",be.defaultProps={noGutters:!1};var ye=be,Ee=["xl","lg","md","sm","xs"],ge=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.className,i=e.as,o=void 0===i?"div":i,u=Object(c.a)(e,["bsPrefix","className","as"]),f=d(n,"col"),p=[],m=[];return Ee.forEach((function(e){var t,n,r,a=u[e];if(delete u[e],"object"==typeof a&&null!=a){var i=a.span;t=void 0===i||i,n=a.offset,r=a.order}else t=a;var o="xs"!==e?"-"+e:"";t&&p.push(!0===t?""+f+o:""+f+o+"-"+t),null!=r&&m.push("order"+o+"-"+r),null!=n&&m.push("offset"+o+"-"+n)})),p.length||p.push(f),a.a.createElement(o,Object(s.a)({},u,{ref:t,className:l.a.apply(void 0,[r].concat(p,m))}))}));ge.displayName="Col";var xe=ge;function Oe(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Oe(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var je=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Oe(e))&&(r&&(r+=" "),r+=t);return r};const we=E();i.render(r.createElement(()=>(we.info("Starting app."),a.a.createElement(ve,null,a.a.createElement(ye,{as:"header",className:"text-center"},a.a.createElement("h1",{className:je("display-1","mt-5","title")},"vocally"),a.a.createElement("h2",null,"sing C",a.a.createElement("sub",null,"4"))),a.a.createElement(ye,{as:"section",className:"text-center"},a.a.createElement(xe,null,a.a.createElement(pe,null))),a.a.createElement(ye,{as:"footer"}))),null),document.getElementById("app"))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdERPTVwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vY2FuVXNlRE9NLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIlByb3BUeXBlc1wiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbnZhcmlhbnQvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2FkZEV2ZW50TGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9yZW1vdmVFdmVudExpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vbGlzdGVuLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcInJlYWN0TGlmZWN5Y2xlc0NvbXBhdFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vb3duZXJEb2N1bWVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2dldENvbXB1dGVkU3R5bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9vd25lcldpbmRvdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2h5cGhlbmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2h5cGhlbmF0ZVN0eWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vaXNUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9jc3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VuY29udHJvbGxhYmxlL2VzbS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdW5jb250cm9sbGFibGUvZXNtL2hvb2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0ByZXN0YXJ0L2hvb2tzL2VzbS91c2VDb21taXR0ZWRSZWYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0ByZXN0YXJ0L2hvb2tzL2VzbS91c2VFdmVudENhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL3NyYy9BcHAuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtbDVcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9UaGVtZVByb3ZpZGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL2NyZWF0ZUNoYWluZWRGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9TYWZlQW5jaG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL0J1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9nLnRlc3RpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BpdGNoL25vdGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9waXRjaC9waXRjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9HZW5lcmF0b3JDb21wb25lbnQudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BpdGNoUmVjb3JkZXIudHN4Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vdHJhbnNpdGlvbkVuZC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtdHJhbnNpdGlvbi1ncm91cC9lc20vY29uZmlnLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL2VzbS9UcmFuc2l0aW9uR3JvdXBDb250ZXh0LmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL2VzbS9UcmFuc2l0aW9uLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL0ZhZGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC9lc20vdHJpZ2dlckJyb3dzZXJSZWZsb3cuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC9lc20vQ2xvc2VCdXR0b24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9jYW1lbGl6ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9jcmVhdGVXaXRoQnNQcmVmaXguanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC9lc20vQWxlcnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC9lc20vZGl2V2l0aENsYXNzTmFtZS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9TdW1tYXJ5LnRzeCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9QaXRjaERldGVjdGlvbi50c3giLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC9lc20vQ29udGFpbmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL1Jvdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9Db2wuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2Nsc3gvZGlzdC9jbHN4Lm0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlJlYWN0IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJhcHBseSIsInRoaXMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSIsImV4Y2x1ZGVkIiwic291cmNlS2V5cyIsImtleXMiLCJpbmRleE9mIiwiaGFzT3duIiwiY2xhc3NOYW1lcyIsImNsYXNzZXMiLCJhcmciLCJhcmdUeXBlIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsImlubmVyIiwiam9pbiIsImRlZmF1bHQiLCJSZWFjdERPTSIsIl9pbmhlcml0c0xvb3NlIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY29uc3RydWN0b3IiLCJfX3Byb3RvX18iLCJQcm9wVHlwZXMiLCJjb25kaXRpb24iLCJmb3JtYXQiLCJhIiwiYiIsImUiLCJmIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJFcnJvciIsImFyZ3MiLCJhcmdJbmRleCIsInJlcGxhY2UiLCJmcmFtZXNUb1BvcCIsIm9wdGlvbnNTdXBwb3J0ZWQiLCJvbmNlU3VwcG9ydGVkIiwiY2FuVXNlRE9NIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJub2RlIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsIm9wdGlvbnMiLCJvbmNlIiwiY2FwdHVyZSIsIndyYXBwZWRIYW5kbGVyIiwiX19vbmNlIiwib25jZUhhbmRsZXIiLCJldmVudCIsInJlYWN0TGlmZWN5Y2xlc0NvbXBhdCIsIm93bmVyRG9jdW1lbnQiLCJkb2N1bWVudCIsImdldENvbXB1dGVkU3R5bGUiLCJwc3VlZG9FbGVtZW50IiwiZG9jIiwiZGVmYXVsdFZpZXciLCJvd25lcldpbmRvdyIsInJVcHBlciIsIm1zUGF0dGVybiIsImh5cGhlbmF0ZVN0eWxlTmFtZSIsInN0cmluZyIsInRvTG93ZXJDYXNlIiwiaHlwaGVuYXRlIiwic3VwcG9ydGVkVHJhbnNmb3JtcyIsImNzcyIsInRyYW5zZm9ybXMiLCJzdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJmb3JFYWNoIiwidGVzdCIsImlzVHJhbnNmb3JtIiwicmVtb3ZlUHJvcGVydHkiLCJjc3NUZXh0IiwiZGVmYXVsdEtleSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyIiwiX3RvUHJvcGVydHlLZXkiLCJpbnB1dCIsImhpbnQiLCJwcmltIiwidG9QcmltaXRpdmUiLCJyZXMiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJfdG9QcmltaXRpdmUiLCJ1c2VVbmNvbnRyb2xsZWQiLCJwcm9wcyIsImNvbmZpZyIsInJlZHVjZSIsInJlc3VsdCIsImZpZWxkTmFtZSIsIl9leHRlbmRzMiIsIl9yZWYiLCJkZWZhdWx0VmFsdWUiLCJwcm9wc1ZhbHVlIiwicmVzdCIsIm1hcCIsImhhbmRsZXJOYW1lIiwiX3VzZVVuY29udHJvbGxlZFByb3AiLCJwcm9wVmFsdWUiLCJ3YXNQcm9wUmVmIiwiX3VzZVN0YXRlIiwic3RhdGVWYWx1ZSIsInNldFN0YXRlIiwiaXNQcm9wIiwid2FzUHJvcCIsImN1cnJlbnQiLCJfbGVuIiwiX2tleSIsImNvbmNhdCIsInVzZVVuY29udHJvbGxlZFByb3AiLCJyZWYiLCJ1c2VFdmVudENhbGxiYWNrIiwiZm4iLCJhcGkiLCJjb250ZW50IiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjb3VudCIsImluZGV4Iiwib2JqIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsImFwcGVuZENoaWxkIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsInRvU3RyaW5nIiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJzcGxpY2UiLCJtbDUiLCJUaGVtZUNvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwiQ29uc3VtZXIiLCJQcm92aWRlciIsInVzZUJvb3RzdHJhcFByZWZpeCIsInByZWZpeCIsImRlZmF1bHRQcmVmaXgiLCJwcmVmaXhlcyIsImZ1bmNzIiwiYWNjIiwiX2xlbjIiLCJfa2V5MiIsImlzVHJpdmlhbEhyZWYiLCJocmVmIiwidHJpbSIsIlNhZmVBbmNob3IiLCJmb3J3YXJkUmVmIiwiX3JlZiRhcyIsImFzIiwiQ29tcG9uZW50IiwiZGlzYWJsZWQiLCJvbktleURvd24iLCJoYW5kbGVDbGljayIsIm9uQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInJvbGUiLCJ0YWJJbmRleCIsImRpc3BsYXlOYW1lIiwiQnV0dG9uIiwiYnNQcmVmaXgiLCJ2YXJpYW50Iiwic2l6ZSIsImFjdGl2ZSIsImNsYXNzTmFtZSIsImJsb2NrIiwidHlwZSIsImRlZmF1bHRQcm9wcyIsImdldExvZ2dlciIsImNvbnNvbGUiLCJub3RlcyIsIm5vdGVUb0ZyZXEiLCJub3RlIiwiTWF0aCIsInBvdyIsImZyZXFUb05vdGUiLCJmcmVxIiwibG9nMiIsIk5vdGUiLCJfZnJlcSIsInJvdW5kIiwiZnJlcXVlbmN5Iiwib2N0YXZlIiwiZmxvb3IiLCJkaWZmIiwiTE9HIiwiTU9ERUxfVVJMIiwiR2VuZXJhdG9yQ29tcG9uZW50IiwiZmxhZyIsInNldEZsYWciLCJjdXJyZW50VmFsdWUiLCJzZXRDdXJyZW50VmFsdWUiLCJtb3VudGVkIiwiZ2VuZXJhdG9yIiwibmV4dCIsInRoZW4iLCJkb25lIiwib25UaWNrIiwiY2hpbGRyZW4iLCJQaXRjaFJlY29yZGVyIiwicGl0Y2hHZW5lcmF0b3IiLCJ0aW1lb3V0TXMiLCJvbkZpbmlzaCIsInJlY29yZGluZyIsInNldFJlY29yZGluZyIsImZpbmlzaGVkIiwic2V0RmluaXNoZWQiLCJpbmZvIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsIm5ld1JlY29yZGluZyIsImVtdWxhdGVUcmFuc2l0aW9uRW5kIiwiZWxlbWVudCIsImR1cmF0aW9uIiwicGFkZGluZyIsImNhbGxlZCIsImhhbmRsZSIsImV2dCIsImNyZWF0ZUV2ZW50IiwiaW5pdEV2ZW50IiwiZGlzcGF0Y2hFdmVudCIsInRyaWdnZXJUcmFuc2l0aW9uRW5kIiwibGlzdGVuIiwic3RyIiwibXVsdCIsInBhcnNlRmxvYXQiLCJyZW1vdmVFbXVsYXRlIiwiX1JlYWN0JENvbXBvbmVudCIsIlRyYW5zaXRpb24iLCJjb250ZXh0IiwiX3RoaXMiLCJpbml0aWFsU3RhdHVzIiwiYXBwZWFyIiwiaXNNb3VudGluZyIsImVudGVyIiwiYXBwZWFyU3RhdHVzIiwiaW4iLCJ1bm1vdW50T25FeGl0IiwibW91bnRPbkVudGVyIiwic3RhdGUiLCJzdGF0dXMiLCJuZXh0Q2FsbGJhY2siLCJnZXREZXJpdmVkU3RhdGVGcm9tUHJvcHMiLCJwcmV2U3RhdGUiLCJfcHJvdG8iLCJjb21wb25lbnREaWRNb3VudCIsInVwZGF0ZVN0YXR1cyIsImNvbXBvbmVudERpZFVwZGF0ZSIsInByZXZQcm9wcyIsIm5leHRTdGF0dXMiLCJjb21wb25lbnRXaWxsVW5tb3VudCIsImNhbmNlbE5leHRDYWxsYmFjayIsImdldFRpbWVvdXRzIiwiZXhpdCIsInRpbWVvdXQiLCJtb3VudGluZyIsInBlcmZvcm1FbnRlciIsInBlcmZvcm1FeGl0IiwiX3RoaXMyIiwiYXBwZWFyaW5nIiwiX3JlZjIiLCJub2RlUmVmIiwiZmluZERPTU5vZGUiLCJtYXliZU5vZGUiLCJtYXliZUFwcGVhcmluZyIsInRpbWVvdXRzIiwiZW50ZXJUaW1lb3V0Iiwic2FmZVNldFN0YXRlIiwib25FbnRlcmVkIiwib25FbnRlciIsIm9uRW50ZXJpbmciLCJvblRyYW5zaXRpb25FbmQiLCJfdGhpczMiLCJvbkV4aXQiLCJvbkV4aXRpbmciLCJvbkV4aXRlZCIsImNhbmNlbCIsIm5leHRTdGF0ZSIsImNhbGxiYWNrIiwic2V0TmV4dENhbGxiYWNrIiwiX3RoaXM0IiwiZG9lc05vdEhhdmVUaW1lb3V0T3JMaXN0ZW5lciIsImFkZEVuZExpc3RlbmVyIiwiX3JlZjMiLCJtYXliZU5leHRDYWxsYmFjayIsInJlbmRlciIsIl90aGlzJHByb3BzIiwiY2hpbGRQcm9wcyIsIlRyYW5zaXRpb25Hcm91cENvbnRleHQiLCJjbG9uZUVsZW1lbnQiLCJDaGlsZHJlbiIsIm9ubHkiLCJub29wIiwiY29udGV4dFR5cGUiLCJwcm9wVHlwZXMiLCJVTk1PVU5URUQiLCJFWElURUQiLCJFTlRFUklORyIsIkVOVEVSRUQiLCJFWElUSU5HIiwiX2ZhZGVTdHlsZXMiLCJmYWRlU3R5bGVzIiwiRmFkZSIsImhhbmRsZUVudGVyIiwib2Zmc2V0SGVpZ2h0IiwidHJpZ2dlckJyb3dzZXJSZWZsb3ciLCJpbm5lclByb3BzIiwibGFiZWwiLCJpc1JlcXVpcmVkIiwiZnVuYyIsIkNsb3NlQnV0dG9uIiwickh5cGhlbiIsIl8iLCJjaHIiLCJzbGljZSIsImNyZWF0ZVdpdGhCc1ByZWZpeCIsIl90ZW1wIiwiX3JlZiRkaXNwbGF5TmFtZSIsIkJzQ29tcG9uZW50IiwiX3JlZjIkYXMiLCJUYWciLCJyZXNvbHZlZFByZWZpeCIsIkRpdlN0eWxlZEFzSDQiLCJBbGVydEhlYWRpbmciLCJBbGVydExpbmsiLCJzaG93IiwidHJhbnNpdGlvbiIsImNsb3NlTGFiZWwiLCJBbGVydCIsInVuY29udHJvbGxlZFByb3BzIiwiX3VzZVVuY29udHJvbGxlZCIsIm9uQ2xvc2UiLCJkaXNtaXNzaWJsZSIsImhhbmRsZUNsb3NlIiwiYWxlcnQiLCJMaW5rIiwiSGVhZGluZyIsIlN1bW1hcnkiLCJyZWZlcmVuY2UiLCJzdW0iLCJQaXRjaERldGVjdGlvbiIsInN0YXJ0ZWQiLCJzZXRJc1N0YXJ0ZWQiLCJhdWRpb0NvbnRleHQiLCJBdWRpb0NvbnRleHQiLCJzdHJlYW0iLCJzZXRTdHJlYW0iLCJwaXRjaERldGVjdGlvbkdlbmVyYXRvciIsInNldFBpdGNoRGV0ZWN0aW9uR2VuZXJhdG9yIiwibmF2aWdhdG9yIiwibWVkaWFEZXZpY2VzIiwiZ2V0VXNlck1lZGlhIiwiYXVkaW8iLCJ2aWRlbyIsIm5ld1N0cmVhbSIsImRlYnVnIiwiZ2V0QXVkaW9UcmFja3MiLCJyZWFkeVN0YXRlIiwiY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UiLCJjdHgiLCJwaXRjaERldGVjdGlvbiIsInJlYWR5IiwicGl0Y2giLCJnZXRQaXRjaCIsIm1sNVBpdGNoRGV0ZWN0aW9uIiwicmVzdW1lIiwiZ2V0VHJhY2tzIiwic3RvcCIsInN1c3BlbmQiLCJyZWZlcmVuY2VQaXRjaCIsIkNvbnRhaW5lciIsImZsdWlkIiwic3VmZml4IiwiREVWSUNFX1NJWkVTIiwiUm93Iiwibm9HdXR0ZXJzIiwiZGVjb3JhdGVkQnNQcmVmaXgiLCJzaXplUHJlZml4IiwiYnJrUG9pbnQiLCJjb2xzIiwiaW5maXgiLCJDb2wiLCJzcGFucyIsInNwYW4iLCJvZmZzZXQiLCJvcmRlciIsIl9wcm9wVmFsdWUkc3BhbiIsInRvVmFsIiwibWl4IiwiayIsInkiLCJ0bXAiLCJ4IiwiZ2V0RWxlbWVudEJ5SWQiXSwibWFwcGluZ3MiOiJhQUNFLElBQUlBLEVBQW1CLEdBR3ZCLFNBQVNDLEVBQW9CQyxHQUc1QixHQUFHRixFQUFpQkUsR0FDbkIs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YWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDIwKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3Q7IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2V4dGVuZHMoKSB7XG4gIF9leHRlbmRzID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzb3VyY2UgPSBhcmd1bWVudHNbaV07XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzb3VyY2UsIGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICByZXR1cm4gX2V4dGVuZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbn0iLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShzb3VyY2UsIGV4Y2x1ZGVkKSB7XG4gIGlmIChzb3VyY2UgPT0gbnVsbCkgcmV0dXJuIHt9O1xuICB2YXIgdGFyZ2V0ID0ge307XG4gIHZhciBzb3VyY2VLZXlzID0gT2JqZWN0LmtleXMoc291cmNlKTtcbiAgdmFyIGtleSwgaTtcblxuICBmb3IgKGkgPSAwOyBpIDwgc291cmNlS2V5cy5sZW5ndGg7IGkrKykge1xuICAgIGtleSA9IHNvdXJjZUtleXNbaV07XG4gICAgaWYgKGV4Y2x1ZGVkLmluZGV4T2Yoa2V5KSA+PSAwKSBjb250aW51ZTtcbiAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn0iLCIvKiFcbiAgQ29weXJpZ2h0IChjKSAyMDE3IEplZCBXYXRzb24uXG4gIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZSAoTUlUKSwgc2VlXG4gIGh0dHA6Ly9qZWR3YXRzb24uZ2l0aHViLmlvL2NsYXNzbmFtZXNcbiovXG4vKiBnbG9iYWwgZGVmaW5lICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgaGFzT3duID0ge30uaGFzT3duUHJvcGVydHk7XG5cblx0ZnVuY3Rpb24gY2xhc3NOYW1lcyAoKSB7XG5cdFx0dmFyIGNsYXNzZXMgPSBbXTtcblxuXHRcdGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgYXJnID0gYXJndW1lbnRzW2ldO1xuXHRcdFx0aWYgKCFhcmcpIGNvbnRpbnVlO1xuXG5cdFx0XHR2YXIgYXJnVHlwZSA9IHR5cGVvZiBhcmc7XG5cblx0XHRcdGlmIChhcmdUeXBlID09PSAnc3RyaW5nJyB8fCBhcmdUeXBlID09PSAnbnVtYmVyJykge1xuXHRcdFx0XHRjbGFzc2VzLnB1c2goYXJnKTtcblx0XHRcdH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShhcmcpICYmIGFyZy5sZW5ndGgpIHtcblx0XHRcdFx0dmFyIGlubmVyID0gY2xhc3NOYW1lcy5hcHBseShudWxsLCBhcmcpO1xuXHRcdFx0XHRpZiAoaW5uZXIpIHtcblx0XHRcdFx0XHRjbGFzc2VzLnB1c2goaW5uZXIpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2UgaWYgKGFyZ1R5cGUgPT09ICdvYmplY3QnKSB7XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiBhcmcpIHtcblx0XHRcdFx0XHRpZiAoaGFzT3duLmNhbGwoYXJnLCBrZXkpICYmIGFyZ1trZXldKSB7XG5cdFx0XHRcdFx0XHRjbGFzc2VzLnB1c2goa2V5KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdH1cblxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRjbGFzc05hbWVzLmRlZmF1bHQgPSBjbGFzc05hbWVzO1xuXHRcdG1vZHVsZS5leHBvcnRzID0gY2xhc3NOYW1lcztcblx0fSBlbHNlIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIHR5cGVvZiBkZWZpbmUuYW1kID09PSAnb2JqZWN0JyAmJiBkZWZpbmUuYW1kKSB7XG5cdFx0Ly8gcmVnaXN0ZXIgYXMgJ2NsYXNzbmFtZXMnLCBjb25zaXN0ZW50IHdpdGggbnBtIHBhY2thZ2UgbmFtZVxuXHRcdGRlZmluZSgnY2xhc3NuYW1lcycsIFtdLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gY2xhc3NOYW1lcztcblx0XHR9KTtcblx0fSBlbHNlIHtcblx0XHR3aW5kb3cuY2xhc3NOYW1lcyA9IGNsYXNzTmFtZXM7XG5cdH1cbn0oKSk7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IFJlYWN0RE9NOyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9pbmhlcml0c0xvb3NlKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7XG4gIHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcy5wcm90b3R5cGUpO1xuICBzdWJDbGFzcy5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBzdWJDbGFzcztcbiAgc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzcztcbn0iLCJleHBvcnQgZGVmYXVsdCAhISh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuZG9jdW1lbnQgJiYgd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQpOyIsIm1vZHVsZS5leHBvcnRzID0gUHJvcFR5cGVzOyIsIi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIFVzZSBpbnZhcmlhbnQoKSB0byBhc3NlcnQgc3RhdGUgd2hpY2ggeW91ciBwcm9ncmFtIGFzc3VtZXMgdG8gYmUgdHJ1ZS5cbiAqXG4gKiBQcm92aWRlIHNwcmludGYtc3R5bGUgZm9ybWF0IChvbmx5ICVzIGlzIHN1cHBvcnRlZCkgYW5kIGFyZ3VtZW50c1xuICogdG8gcHJvdmlkZSBpbmZvcm1hdGlvbiBhYm91dCB3aGF0IGJyb2tlIGFuZCB3aGF0IHlvdSB3ZXJlXG4gKiBleHBlY3RpbmcuXG4gKlxuICogVGhlIGludmFyaWFudCBtZXNzYWdlIHdpbGwgYmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiwgYnV0IHRoZSBpbnZhcmlhbnRcbiAqIHdpbGwgcmVtYWluIHRvIGVuc3VyZSBsb2dpYyBkb2VzIG5vdCBkaWZmZXIgaW4gcHJvZHVjdGlvbi5cbiAqL1xuXG52YXIgaW52YXJpYW50ID0gZnVuY3Rpb24oY29uZGl0aW9uLCBmb3JtYXQsIGEsIGIsIGMsIGQsIGUsIGYpIHtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignaW52YXJpYW50IHJlcXVpcmVzIGFuIGVycm9yIG1lc3NhZ2UgYXJndW1lbnQnKTtcbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbmRpdGlvbikge1xuICAgIHZhciBlcnJvcjtcbiAgICBpZiAoZm9ybWF0ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICAnTWluaWZpZWQgZXhjZXB0aW9uIG9jY3VycmVkOyB1c2UgdGhlIG5vbi1taW5pZmllZCBkZXYgZW52aXJvbm1lbnQgJyArXG4gICAgICAgICdmb3IgdGhlIGZ1bGwgZXJyb3IgbWVzc2FnZSBhbmQgYWRkaXRpb25hbCBoZWxwZnVsIHdhcm5pbmdzLidcbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBhcmdzID0gW2EsIGIsIGMsIGQsIGUsIGZdO1xuICAgICAgdmFyIGFyZ0luZGV4ID0gMDtcbiAgICAgIGVycm9yID0gbmV3IEVycm9yKFxuICAgICAgICBmb3JtYXQucmVwbGFjZSgvJXMvZywgZnVuY3Rpb24oKSB7IHJldHVybiBhcmdzW2FyZ0luZGV4KytdOyB9KVxuICAgICAgKTtcbiAgICAgIGVycm9yLm5hbWUgPSAnSW52YXJpYW50IFZpb2xhdGlvbic7XG4gICAgfVxuXG4gICAgZXJyb3IuZnJhbWVzVG9Qb3AgPSAxOyAvLyB3ZSBkb24ndCBjYXJlIGFib3V0IGludmFyaWFudCdzIG93biBmcmFtZVxuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGludmFyaWFudDtcbiIsIi8qIGVzbGludC1kaXNhYmxlIG5vLXJldHVybi1hc3NpZ24gKi9cbmltcG9ydCBjYW5Vc2VET00gZnJvbSAnLi9jYW5Vc2VET00nO1xuZXhwb3J0IHZhciBvcHRpb25zU3VwcG9ydGVkID0gZmFsc2U7XG5leHBvcnQgdmFyIG9uY2VTdXBwb3J0ZWQgPSBmYWxzZTtcblxudHJ5IHtcbiAgdmFyIG9wdGlvbnMgPSB7XG4gICAgZ2V0IHBhc3NpdmUoKSB7XG4gICAgICByZXR1cm4gb3B0aW9uc1N1cHBvcnRlZCA9IHRydWU7XG4gICAgfSxcblxuICAgIGdldCBvbmNlKCkge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLW11bHRpLWFzc2lnblxuICAgICAgcmV0dXJuIG9uY2VTdXBwb3J0ZWQgPSBvcHRpb25zU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgfTtcblxuICBpZiAoY2FuVXNlRE9NKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Rlc3QnLCBvcHRpb25zLCBvcHRpb25zKTtcbiAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMsIHRydWUpO1xuICB9XG59IGNhdGNoIChlKSB7XG4gIC8qICovXG59XG5cbi8qKlxuICogQW4gYGFkZEV2ZW50TGlzdGVuZXJgIHBvbnlmaWxsLCBzdXBwb3J0cyB0aGUgYG9uY2VgIG9wdGlvblxuICovXG5mdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlciwgb3B0aW9ucykge1xuICBpZiAob3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucyAhPT0gJ2Jvb2xlYW4nICYmICFvbmNlU3VwcG9ydGVkKSB7XG4gICAgdmFyIG9uY2UgPSBvcHRpb25zLm9uY2UsXG4gICAgICAgIGNhcHR1cmUgPSBvcHRpb25zLmNhcHR1cmU7XG4gICAgdmFyIHdyYXBwZWRIYW5kbGVyID0gaGFuZGxlcjtcblxuICAgIGlmICghb25jZVN1cHBvcnRlZCAmJiBvbmNlKSB7XG4gICAgICB3cmFwcGVkSGFuZGxlciA9IGhhbmRsZXIuX19vbmNlIHx8IGZ1bmN0aW9uIG9uY2VIYW5kbGVyKGV2ZW50KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIG9uY2VIYW5kbGVyLCBjYXB0dXJlKTtcbiAgICAgICAgaGFuZGxlci5jYWxsKHRoaXMsIGV2ZW50KTtcbiAgICAgIH07XG5cbiAgICAgIGhhbmRsZXIuX19vbmNlID0gd3JhcHBlZEhhbmRsZXI7XG4gICAgfVxuXG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgd3JhcHBlZEhhbmRsZXIsIG9wdGlvbnNTdXBwb3J0ZWQgPyBvcHRpb25zIDogY2FwdHVyZSk7XG4gIH1cblxuICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBoYW5kbGVyLCBvcHRpb25zKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgYWRkRXZlbnRMaXN0ZW5lcjsiLCJmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlciwgb3B0aW9ucykge1xuICB2YXIgY2FwdHVyZSA9IG9wdGlvbnMgJiYgdHlwZW9mIG9wdGlvbnMgIT09ICdib29sZWFuJyA/IG9wdGlvbnMuY2FwdHVyZSA6IG9wdGlvbnM7XG4gIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIGNhcHR1cmUpO1xuXG4gIGlmIChoYW5kbGVyLl9fb25jZSkge1xuICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIuX19vbmNlLCBjYXB0dXJlKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCByZW1vdmVFdmVudExpc3RlbmVyOyIsImltcG9ydCBhZGRFdmVudExpc3RlbmVyIGZyb20gJy4vYWRkRXZlbnRMaXN0ZW5lcic7XG5pbXBvcnQgcmVtb3ZlRXZlbnRMaXN0ZW5lciBmcm9tICcuL3JlbW92ZUV2ZW50TGlzdGVuZXInO1xuXG5mdW5jdGlvbiBsaXN0ZW4obm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZW1vdmVFdmVudExpc3RlbmVyKG5vZGUsIGV2ZW50TmFtZSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGxpc3RlbjsiLCJtb2R1bGUuZXhwb3J0cyA9IHJlYWN0TGlmZWN5Y2xlc0NvbXBhdDsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvd25lckRvY3VtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50O1xufSIsImltcG9ydCBvd25lcldpbmRvdyBmcm9tICcuL293bmVyV2luZG93JztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGdldENvbXB1dGVkU3R5bGUobm9kZSwgcHN1ZWRvRWxlbWVudCkge1xuICByZXR1cm4gb3duZXJXaW5kb3cobm9kZSkuZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBwc3VlZG9FbGVtZW50KTtcbn0iLCJpbXBvcnQgb3duZXJEb2N1bWVudCBmcm9tICcuL293bmVyRG9jdW1lbnQnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3duZXJXaW5kb3cobm9kZSkge1xuICB2YXIgZG9jID0gb3duZXJEb2N1bWVudChub2RlKTtcbiAgcmV0dXJuIGRvYyAmJiBkb2MuZGVmYXVsdFZpZXcgfHwgd2luZG93O1xufSIsInZhciByVXBwZXIgPSAvKFtBLVpdKS9nO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaHlwaGVuYXRlKHN0cmluZykge1xuICByZXR1cm4gc3RyaW5nLnJlcGxhY2UoclVwcGVyLCAnLSQxJykudG9Mb3dlckNhc2UoKTtcbn0iLCIvKipcbiAqIENvcHlyaWdodCAyMDEzLTIwMTQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZhY2Vib29rL3JlYWN0L2Jsb2IvMmFlYjhhMmE2YmViMDA2MTdhNDIxN2Y3ZjgyODQ5MjRmYTJhZDgxOS9zcmMvdmVuZG9yL2NvcmUvaHlwaGVuYXRlU3R5bGVOYW1lLmpzXG4gKi9cbmltcG9ydCBoeXBoZW5hdGUgZnJvbSAnLi9oeXBoZW5hdGUnO1xudmFyIG1zUGF0dGVybiA9IC9ebXMtLztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGh5cGhlbmF0ZVN0eWxlTmFtZShzdHJpbmcpIHtcbiAgcmV0dXJuIGh5cGhlbmF0ZShzdHJpbmcpLnJlcGxhY2UobXNQYXR0ZXJuLCAnLW1zLScpO1xufSIsInZhciBzdXBwb3J0ZWRUcmFuc2Zvcm1zID0gL14oKHRyYW5zbGF0ZXxyb3RhdGV8c2NhbGUpKFh8WXxafDNkKT98bWF0cml4KDNkKT98cGVyc3BlY3RpdmV8c2tldyhYfFkpPykkL2k7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc1RyYW5zZm9ybSh2YWx1ZSkge1xuICByZXR1cm4gISEodmFsdWUgJiYgc3VwcG9ydGVkVHJhbnNmb3Jtcy50ZXN0KHZhbHVlKSk7XG59IiwiaW1wb3J0IGdldENvbXB1dGVkU3R5bGUgZnJvbSAnLi9nZXRDb21wdXRlZFN0eWxlJztcbmltcG9ydCBoeXBoZW5hdGUgZnJvbSAnLi9oeXBoZW5hdGVTdHlsZSc7XG5pbXBvcnQgaXNUcmFuc2Zvcm0gZnJvbSAnLi9pc1RyYW5zZm9ybSc7XG5cbmZ1bmN0aW9uIHN0eWxlKG5vZGUsIHByb3BlcnR5KSB7XG4gIHZhciBjc3MgPSAnJztcbiAgdmFyIHRyYW5zZm9ybXMgPSAnJztcblxuICBpZiAodHlwZW9mIHByb3BlcnR5ID09PSAnc3RyaW5nJykge1xuICAgIHJldHVybiBub2RlLnN0eWxlLmdldFByb3BlcnR5VmFsdWUoaHlwaGVuYXRlKHByb3BlcnR5KSkgfHwgZ2V0Q29tcHV0ZWRTdHlsZShub2RlKS5nZXRQcm9wZXJ0eVZhbHVlKGh5cGhlbmF0ZShwcm9wZXJ0eSkpO1xuICB9XG5cbiAgT2JqZWN0LmtleXMocHJvcGVydHkpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgIHZhciB2YWx1ZSA9IHByb3BlcnR5W2tleV07XG5cbiAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSB7XG4gICAgICBub2RlLnN0eWxlLnJlbW92ZVByb3BlcnR5KGh5cGhlbmF0ZShrZXkpKTtcbiAgICB9IGVsc2UgaWYgKGlzVHJhbnNmb3JtKGtleSkpIHtcbiAgICAgIHRyYW5zZm9ybXMgKz0ga2V5ICsgXCIoXCIgKyB2YWx1ZSArIFwiKSBcIjtcbiAgICB9IGVsc2Uge1xuICAgICAgY3NzICs9IGh5cGhlbmF0ZShrZXkpICsgXCI6IFwiICsgdmFsdWUgKyBcIjtcIjtcbiAgICB9XG4gIH0pO1xuXG4gIGlmICh0cmFuc2Zvcm1zKSB7XG4gICAgY3NzICs9IFwidHJhbnNmb3JtOiBcIiArIHRyYW5zZm9ybXMgKyBcIjtcIjtcbiAgfVxuXG4gIG5vZGUuc3R5bGUuY3NzVGV4dCArPSBcIjtcIiArIGNzcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgc3R5bGU7IiwiaW1wb3J0IGludmFyaWFudCBmcm9tICdpbnZhcmlhbnQnO1xuXG52YXIgbm9vcCA9IGZ1bmN0aW9uIG5vb3AoKSB7fTtcblxuZnVuY3Rpb24gcmVhZE9ubHlQcm9wVHlwZShoYW5kbGVyLCBuYW1lKSB7XG4gIHJldHVybiBmdW5jdGlvbiAocHJvcHMsIHByb3BOYW1lKSB7XG4gICAgaWYgKHByb3BzW3Byb3BOYW1lXSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoIXByb3BzW2hhbmRsZXJdKSB7XG4gICAgICAgIHJldHVybiBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBwcm92aWRlZCBhIGBcIiArIHByb3BOYW1lICsgXCJgIHByb3AgdG8gYFwiICsgbmFtZSArIFwiYCBcIiArIChcIndpdGhvdXQgYW4gYFwiICsgaGFuZGxlciArIFwiYCBoYW5kbGVyIHByb3AuIFRoaXMgd2lsbCByZW5kZXIgYSByZWFkLW9ubHkgZmllbGQuIFwiKSArIChcIklmIHRoZSBmaWVsZCBzaG91bGQgYmUgbXV0YWJsZSB1c2UgYFwiICsgZGVmYXVsdEtleShwcm9wTmFtZSkgKyBcImAuIFwiKSArIChcIk90aGVyd2lzZSwgc2V0IGBcIiArIGhhbmRsZXIgKyBcImAuXCIpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1bmNvbnRyb2xsZWRQcm9wVHlwZXMoY29udHJvbGxlZFZhbHVlcywgZGlzcGxheU5hbWUpIHtcbiAgdmFyIHByb3BUeXBlcyA9IHt9O1xuICBPYmplY3Qua2V5cyhjb250cm9sbGVkVmFsdWVzKS5mb3JFYWNoKGZ1bmN0aW9uIChwcm9wKSB7XG4gICAgLy8gYWRkIGRlZmF1bHQgcHJvcFR5cGVzIGZvciBmb2xrcyB0aGF0IHVzZSBydW50aW1lIGNoZWNrc1xuICAgIHByb3BUeXBlc1tkZWZhdWx0S2V5KHByb3ApXSA9IG5vb3A7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgdmFyIGhhbmRsZXIgPSBjb250cm9sbGVkVmFsdWVzW3Byb3BdO1xuICAgICAgISh0eXBlb2YgaGFuZGxlciA9PT0gJ3N0cmluZycgJiYgaGFuZGxlci50cmltKCkubGVuZ3RoKSA/IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSBcInByb2R1Y3Rpb25cIiA/IGludmFyaWFudChmYWxzZSwgJ1VuY29udHJvbGxhYmxlIC0gWyVzXTogdGhlIHByb3AgYCVzYCBuZWVkcyBhIHZhbGlkIGhhbmRsZXIga2V5IG5hbWUgaW4gb3JkZXIgdG8gbWFrZSBpdCB1bmNvbnRyb2xsYWJsZScsIGRpc3BsYXlOYW1lLCBwcm9wKSA6IGludmFyaWFudChmYWxzZSkgOiB2b2lkIDA7XG4gICAgICBwcm9wVHlwZXNbcHJvcF0gPSByZWFkT25seVByb3BUeXBlKGhhbmRsZXIsIGRpc3BsYXlOYW1lKTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gcHJvcFR5cGVzO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvcChwcm9wcywgcHJvcCkge1xuICByZXR1cm4gcHJvcHNbcHJvcF0gIT09IHVuZGVmaW5lZDtcbn1cbmV4cG9ydCBmdW5jdGlvbiBkZWZhdWx0S2V5KGtleSkge1xuICByZXR1cm4gJ2RlZmF1bHQnICsga2V5LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsga2V5LnN1YnN0cigxKTtcbn1cbi8qKlxuICogQ29weXJpZ2h0IChjKSAyMDEzLXByZXNlbnQsIEZhY2Vib29rLCBJbmMuXG4gKiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIEJTRC1zdHlsZSBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLiBBbiBhZGRpdGlvbmFsIGdyYW50XG4gKiBvZiBwYXRlbnQgcmlnaHRzIGNhbiBiZSBmb3VuZCBpbiB0aGUgUEFURU5UUyBmaWxlIGluIHRoZSBzYW1lIGRpcmVjdG9yeS5cbiAqL1xuXG5leHBvcnQgZnVuY3Rpb24gY2FuQWNjZXB0UmVmKGNvbXBvbmVudCkge1xuICByZXR1cm4gISFjb21wb25lbnQgJiYgKHR5cGVvZiBjb21wb25lbnQgIT09ICdmdW5jdGlvbicgfHwgY29tcG9uZW50LnByb3RvdHlwZSAmJiBjb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQpO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5cbmZ1bmN0aW9uIF90b1Byb3BlcnR5S2V5KGFyZykgeyB2YXIga2V5ID0gX3RvUHJpbWl0aXZlKGFyZywgXCJzdHJpbmdcIik7IHJldHVybiB0eXBlb2Yga2V5ID09PSBcInN5bWJvbFwiID8ga2V5IDogU3RyaW5nKGtleSk7IH1cblxuZnVuY3Rpb24gX3RvUHJpbWl0aXZlKGlucHV0LCBoaW50KSB7IGlmICh0eXBlb2YgaW5wdXQgIT09IFwib2JqZWN0XCIgfHwgaW5wdXQgPT09IG51bGwpIHJldHVybiBpbnB1dDsgdmFyIHByaW0gPSBpbnB1dFtTeW1ib2wudG9QcmltaXRpdmVdOyBpZiAocHJpbSAhPT0gdW5kZWZpbmVkKSB7IHZhciByZXMgPSBwcmltLmNhbGwoaW5wdXQsIGhpbnQgfHwgXCJkZWZhdWx0XCIpOyBpZiAodHlwZW9mIHJlcyAhPT0gXCJvYmplY3RcIikgcmV0dXJuIHJlczsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkBAdG9QcmltaXRpdmUgbXVzdCByZXR1cm4gYSBwcmltaXRpdmUgdmFsdWUuXCIpOyB9IHJldHVybiAoaGludCA9PT0gXCJzdHJpbmdcIiA/IFN0cmluZyA6IE51bWJlcikoaW5wdXQpOyB9XG5cbmltcG9ydCB7IHVzZUNhbGxiYWNrLCB1c2VSZWYsIHVzZVN0YXRlIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0ICogYXMgVXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbmZ1bmN0aW9uIHVzZVVuY29udHJvbGxlZFByb3AocHJvcFZhbHVlLCBkZWZhdWx0VmFsdWUsIGhhbmRsZXIpIHtcbiAgdmFyIHdhc1Byb3BSZWYgPSB1c2VSZWYocHJvcFZhbHVlICE9PSB1bmRlZmluZWQpO1xuXG4gIHZhciBfdXNlU3RhdGUgPSB1c2VTdGF0ZShkZWZhdWx0VmFsdWUpLFxuICAgICAgc3RhdGVWYWx1ZSA9IF91c2VTdGF0ZVswXSxcbiAgICAgIHNldFN0YXRlID0gX3VzZVN0YXRlWzFdO1xuXG4gIHZhciBpc1Byb3AgPSBwcm9wVmFsdWUgIT09IHVuZGVmaW5lZDtcbiAgdmFyIHdhc1Byb3AgPSB3YXNQcm9wUmVmLmN1cnJlbnQ7XG4gIHdhc1Byb3BSZWYuY3VycmVudCA9IGlzUHJvcDtcbiAgLyoqXG4gICAqIElmIGEgcHJvcCBzd2l0Y2hlcyBmcm9tIGNvbnRyb2xsZWQgdG8gVW5jb250cm9sbGVkXG4gICAqIHJlc2V0IGl0cyB2YWx1ZSB0byB0aGUgZGVmYXVsdFZhbHVlXG4gICAqL1xuXG4gIGlmICghaXNQcm9wICYmIHdhc1Byb3AgJiYgc3RhdGVWYWx1ZSAhPT0gZGVmYXVsdFZhbHVlKSB7XG4gICAgc2V0U3RhdGUoZGVmYXVsdFZhbHVlKTtcbiAgfVxuXG4gIHJldHVybiBbaXNQcm9wID8gcHJvcFZhbHVlIDogc3RhdGVWYWx1ZSwgdXNlQ2FsbGJhY2soZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgaWYgKGhhbmRsZXIpIGhhbmRsZXIuYXBwbHkodm9pZCAwLCBbdmFsdWVdLmNvbmNhdChhcmdzKSk7XG4gICAgc2V0U3RhdGUodmFsdWUpO1xuICB9LCBbaGFuZGxlcl0pXTtcbn1cblxuZXhwb3J0IHsgdXNlVW5jb250cm9sbGVkUHJvcCB9O1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdXNlVW5jb250cm9sbGVkKHByb3BzLCBjb25maWcpIHtcbiAgcmV0dXJuIE9iamVjdC5rZXlzKGNvbmZpZykucmVkdWNlKGZ1bmN0aW9uIChyZXN1bHQsIGZpZWxkTmFtZSkge1xuICAgIHZhciBfZXh0ZW5kczI7XG5cbiAgICB2YXIgX3JlZiA9IHJlc3VsdCxcbiAgICAgICAgZGVmYXVsdFZhbHVlID0gX3JlZltVdGlscy5kZWZhdWx0S2V5KGZpZWxkTmFtZSldLFxuICAgICAgICBwcm9wc1ZhbHVlID0gX3JlZltmaWVsZE5hbWVdLFxuICAgICAgICByZXN0ID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZiwgW1V0aWxzLmRlZmF1bHRLZXkoZmllbGROYW1lKSwgZmllbGROYW1lXS5tYXAoX3RvUHJvcGVydHlLZXkpKTtcblxuICAgIHZhciBoYW5kbGVyTmFtZSA9IGNvbmZpZ1tmaWVsZE5hbWVdO1xuXG4gICAgdmFyIF91c2VVbmNvbnRyb2xsZWRQcm9wID0gdXNlVW5jb250cm9sbGVkUHJvcChwcm9wc1ZhbHVlLCBkZWZhdWx0VmFsdWUsIHByb3BzW2hhbmRsZXJOYW1lXSksXG4gICAgICAgIHZhbHVlID0gX3VzZVVuY29udHJvbGxlZFByb3BbMF0sXG4gICAgICAgIGhhbmRsZXIgPSBfdXNlVW5jb250cm9sbGVkUHJvcFsxXTtcblxuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcmVzdCwgKF9leHRlbmRzMiA9IHt9LCBfZXh0ZW5kczJbZmllbGROYW1lXSA9IHZhbHVlLCBfZXh0ZW5kczJbaGFuZGxlck5hbWVdID0gaGFuZGxlciwgX2V4dGVuZHMyKSk7XG4gIH0sIHByb3BzKTtcbn0iLCJpbXBvcnQgeyB1c2VFZmZlY3QsIHVzZVJlZiB9IGZyb20gJ3JlYWN0Jztcbi8qKlxuICogQ3JlYXRlcyBhIGBSZWZgIHdob3NlIHZhbHVlIGlzIHVwZGF0ZWQgaW4gYW4gZWZmZWN0LCBlbnN1cmluZyB0aGUgbW9zdCByZWNlbnRcbiAqIHZhbHVlIGlzIHRoZSBvbmUgcmVuZGVyZWQgd2l0aC4gR2VuZXJhbGx5IG9ubHkgcmVxdWlyZWQgZm9yIENvbmN1cnJlbnQgbW9kZSB1c2FnZVxuICogd2hlcmUgcHJldmlvdXMgd29yayBpbiBgcmVuZGVyKClgIG1heSBiZSBkaXNjYXJkZWQgYmVmb3IgYmVpbmcgdXNlZC5cbiAqXG4gKiBUaGlzIGlzIHNhZmUgdG8gYWNjZXNzIGluIGFuIGV2ZW50IGhhbmRsZXIuXG4gKlxuICogQHBhcmFtIHZhbHVlIFRoZSBgUmVmYCB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIHVzZUNvbW1pdHRlZFJlZih2YWx1ZSkge1xuICB2YXIgcmVmID0gdXNlUmVmKHZhbHVlKTtcbiAgdXNlRWZmZWN0KGZ1bmN0aW9uICgpIHtcbiAgICByZWYuY3VycmVudCA9IHZhbHVlO1xuICB9LCBbdmFsdWVdKTtcbiAgcmV0dXJuIHJlZjtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdXNlQ29tbWl0dGVkUmVmOyIsImltcG9ydCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IHVzZUNvbW1pdHRlZFJlZiBmcm9tICcuL3VzZUNvbW1pdHRlZFJlZic7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VFdmVudENhbGxiYWNrKGZuKSB7XG4gIHZhciByZWYgPSB1c2VDb21taXR0ZWRSZWYoZm4pO1xuICByZXR1cm4gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByZWYuY3VycmVudCAmJiByZWYuY3VycmVudC5hcHBseShyZWYsIGFyZ3VtZW50cyk7XG4gIH0sIFtyZWZdKTtcbn0iLCJ2YXIgYXBpID0gcmVxdWlyZShcIiEuLi9ub2RlX21vZHVsZXMvc3R5bGUtbG9hZGVyL2Rpc3QvcnVudGltZS9pbmplY3RTdHlsZXNJbnRvU3R5bGVUYWcuanNcIik7XG4gICAgICAgICAgICB2YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4uL25vZGVfbW9kdWxlcy9taW5pLWNzcy1leHRyYWN0LXBsdWdpbi9kaXN0L2xvYWRlci5qcyEuLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9kaXN0L2Nqcy5qcyEuL0FwcC5jc3NcIik7XG5cbiAgICAgICAgICAgIGNvbnRlbnQgPSBjb250ZW50Ll9fZXNNb2R1bGUgPyBjb250ZW50LmRlZmF1bHQgOiBjb250ZW50O1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbiAgICAgICAgICAgIH1cblxudmFyIG9wdGlvbnMgPSB7fTtcblxub3B0aW9ucy5pbnNlcnQgPSBcImhlYWRcIjtcbm9wdGlvbnMuc2luZ2xldG9uID0gZmFsc2U7XG5cbnZhciB1cGRhdGUgPSBhcGkoY29udGVudCwgb3B0aW9ucyk7XG5cblxuXG5tb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzIHx8IHt9OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgaXNPbGRJRSA9IGZ1bmN0aW9uIGlzT2xkSUUoKSB7XG4gIHZhciBtZW1vO1xuICByZXR1cm4gZnVuY3Rpb24gbWVtb3JpemUoKSB7XG4gICAgaWYgKHR5cGVvZiBtZW1vID09PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gVGVzdCBmb3IgSUUgPD0gOSBhcyBwcm9wb3NlZCBieSBCcm93c2VyaGFja3NcbiAgICAgIC8vIEBzZWUgaHR0cDovL2Jyb3dzZXJoYWNrcy5jb20vI2hhY2stZTcxZDg2OTJmNjUzMzQxNzNmZWU3MTVjMjIyY2I4MDVcbiAgICAgIC8vIFRlc3RzIGZvciBleGlzdGVuY2Ugb2Ygc3RhbmRhcmQgZ2xvYmFscyBpcyB0byBhbGxvdyBzdHlsZS1sb2FkZXJcbiAgICAgIC8vIHRvIG9wZXJhdGUgY29ycmVjdGx5IGludG8gbm9uLXN0YW5kYXJkIGVudmlyb25tZW50c1xuICAgICAgLy8gQHNlZSBodHRwczovL2dpdGh1Yi5jb20vd2VicGFjay1jb250cmliL3N0eWxlLWxvYWRlci9pc3N1ZXMvMTc3XG4gICAgICBtZW1vID0gQm9vbGVhbih3aW5kb3cgJiYgZG9jdW1lbnQgJiYgZG9jdW1lbnQuYWxsICYmICF3aW5kb3cuYXRvYik7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW87XG4gIH07XG59KCk7XG5cbnZhciBnZXRUYXJnZXQgPSBmdW5jdGlvbiBnZXRUYXJnZXQoKSB7XG4gIHZhciBtZW1vID0ge307XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSh0YXJnZXQpIHtcbiAgICBpZiAodHlwZW9mIG1lbW9bdGFyZ2V0XSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIHZhciBzdHlsZVRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGFyZ2V0KTsgLy8gU3BlY2lhbCBjYXNlIHRvIHJldHVybiBoZWFkIG9mIGlmcmFtZSBpbnN0ZWFkIG9mIGlmcmFtZSBpdHNlbGZcblxuICAgICAgaWYgKHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCAmJiBzdHlsZVRhcmdldCBpbnN0YW5jZW9mIHdpbmRvdy5IVE1MSUZyYW1lRWxlbWVudCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIC8vIFRoaXMgd2lsbCB0aHJvdyBhbiBleGNlcHRpb24gaWYgYWNjZXNzIHRvIGlmcmFtZSBpcyBibG9ja2VkXG4gICAgICAgICAgLy8gZHVlIHRvIGNyb3NzLW9yaWdpbiByZXN0cmljdGlvbnNcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IHN0eWxlVGFyZ2V0LmNvbnRlbnREb2N1bWVudC5oZWFkO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgLy8gaXN0YW5idWwgaWdub3JlIG5leHRcbiAgICAgICAgICBzdHlsZVRhcmdldCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgbWVtb1t0YXJnZXRdID0gc3R5bGVUYXJnZXQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1lbW9bdGFyZ2V0XTtcbiAgfTtcbn0oKTtcblxudmFyIHN0eWxlc0luRG9tID0gW107XG5cbmZ1bmN0aW9uIGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpIHtcbiAgdmFyIHJlc3VsdCA9IC0xO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3R5bGVzSW5Eb20ubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAoc3R5bGVzSW5Eb21baV0uaWRlbnRpZmllciA9PT0gaWRlbnRpZmllcikge1xuICAgICAgcmVzdWx0ID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKSB7XG4gIHZhciBpZENvdW50TWFwID0ge307XG4gIHZhciBpZGVudGlmaWVycyA9IFtdO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuICAgIHZhciBpdGVtID0gbGlzdFtpXTtcbiAgICB2YXIgaWQgPSBvcHRpb25zLmJhc2UgPyBpdGVtWzBdICsgb3B0aW9ucy5iYXNlIDogaXRlbVswXTtcbiAgICB2YXIgY291bnQgPSBpZENvdW50TWFwW2lkXSB8fCAwO1xuICAgIHZhciBpZGVudGlmaWVyID0gXCJcIi5jb25jYXQoaWQsIFwiIFwiKS5jb25jYXQoY291bnQpO1xuICAgIGlkQ291bnRNYXBbaWRdID0gY291bnQgKyAxO1xuICAgIHZhciBpbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKGlkZW50aWZpZXIpO1xuICAgIHZhciBvYmogPSB7XG4gICAgICBjc3M6IGl0ZW1bMV0sXG4gICAgICBtZWRpYTogaXRlbVsyXSxcbiAgICAgIHNvdXJjZU1hcDogaXRlbVszXVxuICAgIH07XG5cbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcysrO1xuICAgICAgc3R5bGVzSW5Eb21baW5kZXhdLnVwZGF0ZXIob2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGVzSW5Eb20ucHVzaCh7XG4gICAgICAgIGlkZW50aWZpZXI6IGlkZW50aWZpZXIsXG4gICAgICAgIHVwZGF0ZXI6IGFkZFN0eWxlKG9iaiwgb3B0aW9ucyksXG4gICAgICAgIHJlZmVyZW5jZXM6IDFcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlkZW50aWZpZXJzLnB1c2goaWRlbnRpZmllcik7XG4gIH1cblxuICByZXR1cm4gaWRlbnRpZmllcnM7XG59XG5cbmZ1bmN0aW9uIGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSB7XG4gIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gIHZhciBhdHRyaWJ1dGVzID0gb3B0aW9ucy5hdHRyaWJ1dGVzIHx8IHt9O1xuXG4gIGlmICh0eXBlb2YgYXR0cmlidXRlcy5ub25jZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICB2YXIgbm9uY2UgPSB0eXBlb2YgX193ZWJwYWNrX25vbmNlX18gIT09ICd1bmRlZmluZWQnID8gX193ZWJwYWNrX25vbmNlX18gOiBudWxsO1xuXG4gICAgaWYgKG5vbmNlKSB7XG4gICAgICBhdHRyaWJ1dGVzLm5vbmNlID0gbm9uY2U7XG4gICAgfVxuICB9XG5cbiAgT2JqZWN0LmtleXMoYXR0cmlidXRlcykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgc3R5bGUuc2V0QXR0cmlidXRlKGtleSwgYXR0cmlidXRlc1trZXldKTtcbiAgfSk7XG5cbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluc2VydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIG9wdGlvbnMuaW5zZXJ0KHN0eWxlKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFyZ2V0ID0gZ2V0VGFyZ2V0KG9wdGlvbnMuaW5zZXJ0IHx8ICdoZWFkJyk7XG5cbiAgICBpZiAoIXRhcmdldCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQ291bGRuJ3QgZmluZCBhIHN0eWxlIHRhcmdldC4gVGhpcyBwcm9iYWJseSBtZWFucyB0aGF0IHRoZSB2YWx1ZSBmb3IgdGhlICdpbnNlcnQnIHBhcmFtZXRlciBpcyBpbnZhbGlkLlwiKTtcbiAgICB9XG5cbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0eWxlO1xufVxuXG5mdW5jdGlvbiByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpIHtcbiAgLy8gaXN0YW5idWwgaWdub3JlIGlmXG4gIGlmIChzdHlsZS5wYXJlbnROb2RlID09PSBudWxsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3R5bGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZSk7XG59XG4vKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAgKi9cblxuXG52YXIgcmVwbGFjZVRleHQgPSBmdW5jdGlvbiByZXBsYWNlVGV4dCgpIHtcbiAgdmFyIHRleHRTdG9yZSA9IFtdO1xuICByZXR1cm4gZnVuY3Rpb24gcmVwbGFjZShpbmRleCwgcmVwbGFjZW1lbnQpIHtcbiAgICB0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG4gICAgcmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG4gIH07XG59KCk7XG5cbmZ1bmN0aW9uIGFwcGx5VG9TaW5nbGV0b25UYWcoc3R5bGUsIGluZGV4LCByZW1vdmUsIG9iaikge1xuICB2YXIgY3NzID0gcmVtb3ZlID8gJycgOiBvYmoubWVkaWEgPyBcIkBtZWRpYSBcIi5jb25jYXQob2JqLm1lZGlhLCBcIiB7XCIpLmNvbmNhdChvYmouY3NzLCBcIn1cIikgOiBvYmouY3NzOyAvLyBGb3Igb2xkIElFXG5cbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICAqL1xuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gc3R5bGUuY2hpbGROb2RlcztcblxuICAgIGlmIChjaGlsZE5vZGVzW2luZGV4XSkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH1cblxuICAgIGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuICAgICAgc3R5bGUuaW5zZXJ0QmVmb3JlKGNzc05vZGUsIGNoaWxkTm9kZXNbaW5kZXhdKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3R5bGUuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGFwcGx5VG9UYWcoc3R5bGUsIG9wdGlvbnMsIG9iaikge1xuICB2YXIgY3NzID0gb2JqLmNzcztcbiAgdmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuICB2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuICBpZiAobWVkaWEpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoJ21lZGlhJywgbWVkaWEpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlLnJlbW92ZUF0dHJpYnV0ZSgnbWVkaWEnKTtcbiAgfVxuXG4gIGlmIChzb3VyY2VNYXAgJiYgYnRvYSkge1xuICAgIGNzcyArPSBcIlxcbi8qIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtiYXNlNjQsXCIuY29uY2F0KGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KEpTT04uc3RyaW5naWZ5KHNvdXJjZU1hcCkpKSksIFwiICovXCIpO1xuICB9IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cblxuICBpZiAoc3R5bGUuc3R5bGVTaGVldCkge1xuICAgIHN0eWxlLnN0eWxlU2hlZXQuY3NzVGV4dCA9IGNzcztcbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoc3R5bGUuZmlyc3RDaGlsZCkge1xuICAgICAgc3R5bGUucmVtb3ZlQ2hpbGQoc3R5bGUuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgc3R5bGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG4gIH1cbn1cblxudmFyIHNpbmdsZXRvbiA9IG51bGw7XG52YXIgc2luZ2xldG9uQ291bnRlciA9IDA7XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKG9iaiwgb3B0aW9ucykge1xuICB2YXIgc3R5bGU7XG4gIHZhciB1cGRhdGU7XG4gIHZhciByZW1vdmU7XG5cbiAgaWYgKG9wdGlvbnMuc2luZ2xldG9uKSB7XG4gICAgdmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG4gICAgc3R5bGUgPSBzaW5nbGV0b24gfHwgKHNpbmdsZXRvbiA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKSk7XG4gICAgdXBkYXRlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCBmYWxzZSk7XG4gICAgcmVtb3ZlID0gYXBwbHlUb1NpbmdsZXRvblRhZy5iaW5kKG51bGwsIHN0eWxlLCBzdHlsZUluZGV4LCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICBzdHlsZSA9IGluc2VydFN0eWxlRWxlbWVudChvcHRpb25zKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGUsIG9wdGlvbnMpO1xuXG4gICAgcmVtb3ZlID0gZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgICAgcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlKTtcbiAgICB9O1xuICB9XG5cbiAgdXBkYXRlKG9iaik7XG4gIHJldHVybiBmdW5jdGlvbiB1cGRhdGVTdHlsZShuZXdPYmopIHtcbiAgICBpZiAobmV3T2JqKSB7XG4gICAgICBpZiAobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlKG9iaiA9IG5ld09iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSgpO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAobGlzdCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTsgLy8gRm9yY2Ugc2luZ2xlLXRhZyBzb2x1dGlvbiBvbiBJRTYtOSwgd2hpY2ggaGFzIGEgaGFyZCBsaW1pdCBvbiB0aGUgIyBvZiA8c3R5bGU+XG4gIC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2VcblxuICBpZiAoIW9wdGlvbnMuc2luZ2xldG9uICYmIHR5cGVvZiBvcHRpb25zLnNpbmdsZXRvbiAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgb3B0aW9ucy5zaW5nbGV0b24gPSBpc09sZElFKCk7XG4gIH1cblxuICBsaXN0ID0gbGlzdCB8fCBbXTtcbiAgdmFyIGxhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShsaXN0LCBvcHRpb25zKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG4gICAgbmV3TGlzdCA9IG5ld0xpc3QgfHwgW107XG5cbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG5ld0xpc3QpICE9PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW2ldO1xuICAgICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0ucmVmZXJlbmNlcy0tO1xuICAgIH1cblxuICAgIHZhciBuZXdMYXN0SWRlbnRpZmllcnMgPSBtb2R1bGVzVG9Eb20obmV3TGlzdCwgb3B0aW9ucyk7XG5cbiAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgbGFzdElkZW50aWZpZXJzLmxlbmd0aDsgX2krKykge1xuICAgICAgdmFyIF9pZGVudGlmaWVyID0gbGFzdElkZW50aWZpZXJzW19pXTtcblxuICAgICAgdmFyIF9pbmRleCA9IGdldEluZGV4QnlJZGVudGlmaWVyKF9pZGVudGlmaWVyKTtcblxuICAgICAgaWYgKHN0eWxlc0luRG9tW19pbmRleF0ucmVmZXJlbmNlcyA9PT0gMCkge1xuICAgICAgICBzdHlsZXNJbkRvbVtfaW5kZXhdLnVwZGF0ZXIoKTtcblxuICAgICAgICBzdHlsZXNJbkRvbS5zcGxpY2UoX2luZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBsYXN0SWRlbnRpZmllcnMgPSBuZXdMYXN0SWRlbnRpZmllcnM7XG4gIH07XG59OyIsIm1vZHVsZS5leHBvcnRzID0gbWw1OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNvbnRleHQsIHVzZU1lbW8gfSBmcm9tICdyZWFjdCc7XG52YXIgVGhlbWVDb250ZXh0ID0gUmVhY3QuY3JlYXRlQ29udGV4dCh7fSk7XG52YXIgQ29uc3VtZXIgPSBUaGVtZUNvbnRleHQuQ29uc3VtZXIsXG4gICAgUHJvdmlkZXIgPSBUaGVtZUNvbnRleHQuUHJvdmlkZXI7XG5cbmZ1bmN0aW9uIFRoZW1lUHJvdmlkZXIoX3JlZikge1xuICB2YXIgcHJlZml4ZXMgPSBfcmVmLnByZWZpeGVzLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuO1xuICB2YXIgY29waWVkUHJlZml4ZXMgPSB1c2VNZW1vKGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gX2V4dGVuZHMoe30sIHByZWZpeGVzKTtcbiAgfSwgW3ByZWZpeGVzXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChQcm92aWRlciwge1xuICAgIHZhbHVlOiBjb3BpZWRQcmVmaXhlc1xuICB9LCBjaGlsZHJlbik7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiB1c2VCb290c3RyYXBQcmVmaXgocHJlZml4LCBkZWZhdWx0UHJlZml4KSB7XG4gIHZhciBwcmVmaXhlcyA9IHVzZUNvbnRleHQoVGhlbWVDb250ZXh0KTtcbiAgcmV0dXJuIHByZWZpeCB8fCBwcmVmaXhlc1tkZWZhdWx0UHJlZml4XSB8fCBkZWZhdWx0UHJlZml4O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVCb290c3RyYXBDb21wb25lbnQoQ29tcG9uZW50LCBvcHRzKSB7XG4gIGlmICh0eXBlb2Ygb3B0cyA9PT0gJ3N0cmluZycpIG9wdHMgPSB7XG4gICAgcHJlZml4OiBvcHRzXG4gIH07XG4gIHZhciBpc0NsYXNzeSA9IENvbXBvbmVudC5wcm90b3R5cGUgJiYgQ29tcG9uZW50LnByb3RvdHlwZS5pc1JlYWN0Q29tcG9uZW50OyAvLyBJZiBpdCdzIGEgZnVuY3Rpb25hbCBjb21wb25lbnQgbWFrZSBzdXJlIHdlIGRvbid0IGJyZWFrIGl0IHdpdGggYSByZWZcblxuICB2YXIgX29wdHMgPSBvcHRzLFxuICAgICAgcHJlZml4ID0gX29wdHMucHJlZml4LFxuICAgICAgX29wdHMkZm9yd2FyZFJlZkFzID0gX29wdHMuZm9yd2FyZFJlZkFzLFxuICAgICAgZm9yd2FyZFJlZkFzID0gX29wdHMkZm9yd2FyZFJlZkFzID09PSB2b2lkIDAgPyBpc0NsYXNzeSA/ICdyZWYnIDogJ2lubmVyUmVmJyA6IF9vcHRzJGZvcndhcmRSZWZBcztcbiAgdmFyIFdyYXBwZWQgPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmMiwgcmVmKSB7XG4gICAgdmFyIHByb3BzID0gX2V4dGVuZHMoe30sIF9yZWYyKTtcblxuICAgIHByb3BzW2ZvcndhcmRSZWZBc10gPSByZWY7XG4gICAgdmFyIGJzUHJlZml4ID0gdXNlQm9vdHN0cmFwUHJlZml4KHByb3BzLmJzUHJlZml4LCBwcmVmaXgpO1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgICAgYnNQcmVmaXg6IGJzUHJlZml4XG4gICAgfSkpO1xuICB9KTtcbiAgV3JhcHBlZC5kaXNwbGF5TmFtZSA9IFwiQm9vdHN0cmFwKFwiICsgKENvbXBvbmVudC5kaXNwbGF5TmFtZSB8fCBDb21wb25lbnQubmFtZSkgKyBcIilcIjtcbiAgcmV0dXJuIFdyYXBwZWQ7XG59XG5cbmV4cG9ydCB7IGNyZWF0ZUJvb3RzdHJhcENvbXBvbmVudCwgQ29uc3VtZXIgYXMgVGhlbWVDb25zdW1lciB9O1xuZXhwb3J0IGRlZmF1bHQgVGhlbWVQcm92aWRlcjsiLCIvKipcbiAqIFNhZmUgY2hhaW5lZCBmdW5jdGlvblxuICpcbiAqIFdpbGwgb25seSBjcmVhdGUgYSBuZXcgZnVuY3Rpb24gaWYgbmVlZGVkLFxuICogb3RoZXJ3aXNlIHdpbGwgcGFzcyBiYWNrIGV4aXN0aW5nIGZ1bmN0aW9ucyBvciBudWxsLlxuICpcbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZ1bmN0aW9ucyB0byBjaGFpblxuICogQHJldHVybnMge2Z1bmN0aW9ufG51bGx9XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNoYWluZWRGdW5jdGlvbigpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGZ1bmNzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIGZ1bmNzW19rZXldID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgcmV0dXJuIGZ1bmNzLmZpbHRlcihmdW5jdGlvbiAoZikge1xuICAgIHJldHVybiBmICE9IG51bGw7XG4gIH0pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBmKSB7XG4gICAgaWYgKHR5cGVvZiBmICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgQXJndW1lbnQgVHlwZSwgbXVzdCBvbmx5IHByb3ZpZGUgZnVuY3Rpb25zLCB1bmRlZmluZWQsIG9yIG51bGwuJyk7XG4gICAgfVxuXG4gICAgaWYgKGFjYyA9PT0gbnVsbCkgcmV0dXJuIGY7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNoYWluZWRGdW5jdGlvbigpIHtcbiAgICAgIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgICBhcmdzW19rZXkyXSA9IGFyZ3VtZW50c1tfa2V5Ml07XG4gICAgICB9XG5cbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGFjYy5hcHBseSh0aGlzLCBhcmdzKTsgLy8gQHRzLWlnbm9yZVxuXG4gICAgICBmLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIH07XG4gIH0sIG51bGwpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBjcmVhdGVDaGFpbmVkRnVuY3Rpb247IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uIGZyb20gJy4vY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uJztcblxuZnVuY3Rpb24gaXNUcml2aWFsSHJlZihocmVmKSB7XG4gIHJldHVybiAhaHJlZiB8fCBocmVmLnRyaW0oKSA9PT0gJyMnO1xufVxuLyoqXG4gKiBUaGVyZSBhcmUgc2l0dWF0aW9ucyBkdWUgdG8gYnJvd3NlciBxdWlya3Mgb3IgQm9vdHN0cmFwIENTUyB3aGVyZVxuICogYW4gYW5jaG9yIHRhZyBpcyBuZWVkZWQsIHdoZW4gc2VtYW50aWNhbGx5IGEgYnV0dG9uIHRhZyBpcyB0aGVcbiAqIGJldHRlciBjaG9pY2UuIFNhZmVBbmNob3IgZW5zdXJlcyB0aGF0IHdoZW4gYW4gYW5jaG9yIGlzIHVzZWQgbGlrZSBhXG4gKiBidXR0b24gaXRzIGFjY2Vzc2libGUuIEl0IGFsc28gZW11bGF0ZXMgaW5wdXQgYGRpc2FibGVkYCBiZWhhdmlvciBmb3JcbiAqIGxpbmtzLCB3aGljaCBpcyB1c3VhbGx5IGRlc2lyYWJsZSBmb3IgQnV0dG9ucywgTmF2SXRlbXMsIERyb3Bkb3duSXRlbXMsIGV0Yy5cbiAqL1xuXG5cbnZhciBTYWZlQW5jaG9yID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBfcmVmJGFzID0gX3JlZi5hcyxcbiAgICAgIENvbXBvbmVudCA9IF9yZWYkYXMgPT09IHZvaWQgMCA/ICdhJyA6IF9yZWYkYXMsXG4gICAgICBkaXNhYmxlZCA9IF9yZWYuZGlzYWJsZWQsXG4gICAgICBvbktleURvd24gPSBfcmVmLm9uS2V5RG93bixcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZiwgW1wiYXNcIiwgXCJkaXNhYmxlZFwiLCBcIm9uS2V5RG93blwiXSk7XG5cbiAgdmFyIGhhbmRsZUNsaWNrID0gZnVuY3Rpb24gaGFuZGxlQ2xpY2soZXZlbnQpIHtcbiAgICB2YXIgaHJlZiA9IHByb3BzLmhyZWYsXG4gICAgICAgIG9uQ2xpY2sgPSBwcm9wcy5vbkNsaWNrO1xuXG4gICAgaWYgKGRpc2FibGVkIHx8IGlzVHJpdmlhbEhyZWYoaHJlZikpIHtcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgaWYgKGRpc2FibGVkKSB7XG4gICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAob25DbGljaykge1xuICAgICAgb25DbGljayhldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIHZhciBoYW5kbGVLZXlEb3duID0gZnVuY3Rpb24gaGFuZGxlS2V5RG93bihldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09ICcgJykge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIGhhbmRsZUNsaWNrKGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgaWYgKGlzVHJpdmlhbEhyZWYocHJvcHMuaHJlZikpIHtcbiAgICBwcm9wcy5yb2xlID0gcHJvcHMucm9sZSB8fCAnYnV0dG9uJzsgLy8gd2Ugd2FudCB0byBtYWtlIHN1cmUgdGhlcmUgaXMgYSBocmVmIGF0dHJpYnV0ZSBvbiB0aGUgbm9kZVxuICAgIC8vIG90aGVyd2lzZSwgdGhlIGN1cnNvciBpbmNvcnJlY3RseSBzdHlsZWQgKGV4Y2VwdCB3aXRoIHJvbGU9J2J1dHRvbicpXG5cbiAgICBwcm9wcy5ocmVmID0gcHJvcHMuaHJlZiB8fCAnIyc7XG4gIH1cblxuICBpZiAoZGlzYWJsZWQpIHtcbiAgICBwcm9wcy50YWJJbmRleCA9IC0xO1xuICAgIHByb3BzWydhcmlhLWRpc2FibGVkJ10gPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmXG4gIH0sIHByb3BzLCB7XG4gICAgb25DbGljazogaGFuZGxlQ2xpY2ssXG4gICAgb25LZXlEb3duOiBjcmVhdGVDaGFpbmVkRnVuY3Rpb24oaGFuZGxlS2V5RG93biwgb25LZXlEb3duKVxuICB9KSk7XG59KTtcblNhZmVBbmNob3IuZGlzcGxheU5hbWUgPSAnU2FmZUFuY2hvcic7XG5leHBvcnQgZGVmYXVsdCBTYWZlQW5jaG9yOyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VCb290c3RyYXBQcmVmaXggfSBmcm9tICcuL1RoZW1lUHJvdmlkZXInO1xuaW1wb3J0IFNhZmVBbmNob3IgZnJvbSAnLi9TYWZlQW5jaG9yJztcbnZhciBkZWZhdWx0UHJvcHMgPSB7XG4gIHZhcmlhbnQ6ICdwcmltYXJ5JyxcbiAgYWN0aXZlOiBmYWxzZSxcbiAgZGlzYWJsZWQ6IGZhbHNlXG59O1xudmFyIEJ1dHRvbiA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKF9yZWYsIHJlZikge1xuICB2YXIgYnNQcmVmaXggPSBfcmVmLmJzUHJlZml4LFxuICAgICAgdmFyaWFudCA9IF9yZWYudmFyaWFudCxcbiAgICAgIHNpemUgPSBfcmVmLnNpemUsXG4gICAgICBhY3RpdmUgPSBfcmVmLmFjdGl2ZSxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgYmxvY2sgPSBfcmVmLmJsb2NrLFxuICAgICAgdHlwZSA9IF9yZWYudHlwZSxcbiAgICAgIGFzID0gX3JlZi5hcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZiwgW1wiYnNQcmVmaXhcIiwgXCJ2YXJpYW50XCIsIFwic2l6ZVwiLCBcImFjdGl2ZVwiLCBcImNsYXNzTmFtZVwiLCBcImJsb2NrXCIsIFwidHlwZVwiLCBcImFzXCJdKTtcblxuICB2YXIgcHJlZml4ID0gdXNlQm9vdHN0cmFwUHJlZml4KGJzUHJlZml4LCAnYnRuJyk7XG4gIHZhciBjbGFzc2VzID0gY2xhc3NOYW1lcyhjbGFzc05hbWUsIHByZWZpeCwgYWN0aXZlICYmICdhY3RpdmUnLCBwcmVmaXggKyBcIi1cIiArIHZhcmlhbnQsIGJsb2NrICYmIHByZWZpeCArIFwiLWJsb2NrXCIsIHNpemUgJiYgcHJlZml4ICsgXCItXCIgKyBzaXplKTtcblxuICBpZiAocHJvcHMuaHJlZikge1xuICAgIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChTYWZlQW5jaG9yLCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICAgIGFzOiBhcyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzZXMsIHByb3BzLmRpc2FibGVkICYmICdkaXNhYmxlZCcpXG4gICAgfSkpO1xuICB9XG5cbiAgaWYgKHJlZikge1xuICAgIHByb3BzLnJlZiA9IHJlZjtcbiAgfVxuXG4gIGlmICh0eXBlKSB7XG4gICAgcHJvcHMudHlwZSA9IHR5cGU7XG4gIH0gZWxzZSBpZiAoIWFzKSB7XG4gICAgcHJvcHMudHlwZSA9ICdidXR0b24nO1xuICB9XG5cbiAgdmFyIENvbXBvbmVudCA9IGFzIHx8ICdidXR0b24nO1xuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICBjbGFzc05hbWU6IGNsYXNzZXNcbiAgfSkpO1xufSk7XG5CdXR0b24uZGlzcGxheU5hbWUgPSAnQnV0dG9uJztcbkJ1dHRvbi5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5leHBvcnQgZGVmYXVsdCBCdXR0b247IiwiZXhwb3J0IGNvbnN0IGdldExvZ2dlciA9ICgpID0+IGNvbnNvbGU7XG4iLCJjb25zdCBub3Rlczogc3RyaW5nW10gPSBbXG4gIFwiQVwiLCAvLyAyMVxuICBcIkLima1cIiwgLy8gMjJcbiAgXCJCXCIsIC8vIDIzXG4gIFwiQ1wiLCAvLyAyNFxuICBcIkPima9cIiwgLy8gMjVcbiAgXCJEXCIsIC8vIDI2XG4gIFwiROKZr1wiLCAvLyAyN1xuICBcIkVcIiwgLy8gMjhcbiAgXCJGXCIsIC8vIDI5XG4gIFwiRuKZr1wiLCAvLyAzMFxuICBcIkdcIiwgLy8gMzFcbiAgXCJH4pmvXCIsIC8vIDMyXG5dO1xuY29uc3QgbmFtZSA9IChub3RlOiBudW1iZXIpOiBzdHJpbmcgPT4gbm90ZXNbKG5vdGUgLSAyMSkgJSAxMl07XG5jb25zdCBvY3RhdmUgPSAobm90ZTogbnVtYmVyKTogbnVtYmVyID0+IE1hdGguZmxvb3Iobm90ZSAvIDEyIC0gMSk7XG5cbmNvbnN0IG5vdGVUb0ZyZXEgPSAobm90ZTogbnVtYmVyKTogbnVtYmVyID0+XG4gIDQ0MCAqIE1hdGgucG93KDIsIChub3RlIC0gNjkpIC8gMTIpO1xuXG5jb25zdCBmcmVxVG9Ob3RlID0gKGZyZXE6IG51bWJlcik6IG51bWJlciA9PiA2OSArIDEyICogTWF0aC5sb2cyKGZyZXEgLyA0NDApO1xuXG5jb25zdCBkaWZmID0gKGE6IG51bWJlciwgYjogbnVtYmVyKTogbnVtYmVyID0+IDEyMDAgKiBNYXRoLmxvZzIoYiAvIGEpO1xuXG5jbGFzcyBOb3RlIHtcbiAgcmVhZG9ubHkgZnJlcXVlbmN5OiBudW1iZXI7XG4gIHJlYWRvbmx5IG5vdGU6IG51bWJlcjtcbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xuICByZWFkb25seSBvY3RhdmU6IG51bWJlcjtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IF9mcmVxOiBudW1iZXIpIHtcbiAgICB0aGlzLm5vdGUgPSBNYXRoLnJvdW5kKGZyZXFUb05vdGUoX2ZyZXEpKTtcblxuICAgIHRoaXMuZnJlcXVlbmN5ID0gbm90ZVRvRnJlcSh0aGlzLm5vdGUpO1xuICAgIHRoaXMubmFtZSA9IG5hbWUodGhpcy5ub3RlKTtcbiAgICB0aGlzLm9jdGF2ZSA9IG9jdGF2ZSh0aGlzLm5vdGUpO1xuICB9XG59XG5cbnR5cGUgUGl0Y2ggPSB7XG4gIHRhcmdldDogTm90ZTtcbiAgbm90ZTogbnVtYmVyO1xuICBmcmVxdWVuY3k6IG51bWJlcjtcbiAgZGlmZjogbnVtYmVyO1xufTtcblxuY29uc3Qgbm90ZSA9IChmcmVxPzogbnVtYmVyIHwgbnVsbCk6IFBpdGNoIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKGZyZXEgPT09IHVuZGVmaW5lZCB8fCBmcmVxID09PSBudWxsKSByZXR1cm47XG5cbiAgY29uc3QgbiA9IG5ldyBOb3RlKGZyZXEpO1xuICByZXR1cm4ge1xuICAgIGZyZXF1ZW5jeTogZnJlcSxcbiAgICB0YXJnZXQ6IG4sXG4gICAgbm90ZTogZnJlcVRvTm90ZShmcmVxKSxcbiAgICBkaWZmOiBkaWZmKG4uZnJlcXVlbmN5LCBmcmVxKSxcbiAgfTtcbn07XG5cbmV4cG9ydCB7IG5hbWUsIG9jdGF2ZSwgbm90ZSwgTm90ZSwgUGl0Y2gsIGZyZXFUb05vdGUsIG5vdGVUb0ZyZXEsIGRpZmYgfTtcbiIsImltcG9ydCBcIm1sNVwiO1xuXG5pbXBvcnQgeyBub3RlLCBQaXRjaCB9IGZyb20gXCJwaXRjaC9ub3Rlc1wiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuY29uc3QgTE9HID0gZ2V0TG9nZ2VyKCk7XG5cblxuZXhwb3J0IHR5cGUgU2FtcGxlID0gUGl0Y2ggfCB1bmRlZmluZWQ7XG5leHBvcnQgdHlwZSBSZWNvcmRpbmcgPSBTYW1wbGVbXTtcbnR5cGUgUGl0Y2hHZW5lcmF0b3IgPSBBc3luY0dlbmVyYXRvcjxTYW1wbGU+O1xuXG5jb25zdCBNT0RFTF9VUkwgPVxuICBcImh0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9naC9tbDVqcy9tbDUtZGF0YS1hbmQtbW9kZWxzL21vZGVscy9waXRjaC1kZXRlY3Rpb24vY3JlcGUvXCI7XG5cbmFzeW5jIGZ1bmN0aW9uKiBtbDVQaXRjaERldGVjdGlvbihcbiAgY3R4OiBBdWRpb0NvbnRleHQsXG4gIHN0cmVhbTogTWVkaWFTdHJlYW1cbik6IFBpdGNoR2VuZXJhdG9yIHtcbiAgbGV0IHN0YXJ0ZWQgPSBmYWxzZTtcbiAgY29uc3QgcGl0Y2hEZXRlY3Rpb246IGFueSA9IG1sNS5waXRjaERldGVjdGlvbihNT0RFTF9VUkwsIGN0eCwgc3RyZWFtKTtcbiAgTE9HLmluZm8oXCJDcmVhdGVkIHBpdGNoIGRldGVjdGlvbi5cIiwgcGl0Y2hEZXRlY3Rpb24pO1xuXG4gIGF3YWl0IHBpdGNoRGV0ZWN0aW9uLnJlYWR5O1xuICBMT0cuaW5mbyhcIkluaXRpYWxpemVkIHRoZSBtb2RlbC5cIik7XG5cbiAgd2hpbGUgKHN0cmVhbS5hY3RpdmUgJiYgY3R4LnN0YXRlID09PSBcInJ1bm5pbmdcIikge1xuICAgIGNvbnN0IHBpdGNoID0gYXdhaXQgcGl0Y2hEZXRlY3Rpb24uZ2V0UGl0Y2goKTtcbiAgICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgIExPRy5pbmZvKFwiR290IGZpcnN0IGRldGVjdGlvbiAlai5cIiwgcGl0Y2gpO1xuICAgICAgc3RhcnRlZCA9IHRydWU7XG4gICAgfVxuICAgIHlpZWxkIG5vdGUocGl0Y2gpO1xuICB9XG5cbiAgcmV0dXJuO1xufVxuXG5leHBvcnQgeyBQaXRjaEdlbmVyYXRvciwgbWw1UGl0Y2hEZXRlY3Rpb24gfTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgR2VuZXJhdG9yQ29tcG9uZW50UHJvcHM8VD4gPSB7XG4gIGdlbmVyYXRvcjogQXN5bmNHZW5lcmF0b3I8VCB8IHVuZGVmaW5lZCwgYW55LCBhbnk+O1xuICBjaGlsZHJlbjogYW55O1xuICBvblRpY2s/OiAodDogVCB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbn07XG5cbmZ1bmN0aW9uIEdlbmVyYXRvckNvbXBvbmVudDxUPihwcm9wczogR2VuZXJhdG9yQ29tcG9uZW50UHJvcHM8VD4pIHtcbiAgY29uc3QgW2ZsYWcsIHNldEZsYWddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3VycmVudFZhbHVlLCBzZXRDdXJyZW50VmFsdWVdID0gdXNlU3RhdGU8VCB8IHVuZGVmaW5lZD4oKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcblxuICAgIHByb3BzLmdlbmVyYXRvci5uZXh0KCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LmRvbmUgfHwgIW1vdW50ZWQpIHJldHVybjtcblxuICAgICAgc2V0Q3VycmVudFZhbHVlKHJlc3VsdC52YWx1ZSk7XG4gICAgICBzZXRGbGFnKCFmbGFnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfSwgW2ZsYWddKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5vblRpY2sgJiYgY3VycmVudFZhbHVlKSB7XG4gICAgICBwcm9wcy5vblRpY2soY3VycmVudFZhbHVlKTtcbiAgICB9XG4gIH0sIFtjdXJyZW50VmFsdWVdKTtcblxuICByZXR1cm4gcHJvcHMuY2hpbGRyZW4oY3VycmVudFZhbHVlKTtcbn1cblxuZXhwb3J0IHsgR2VuZXJhdG9yQ29tcG9uZW50IH07XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBQaXRjaCwgbm90ZVRvRnJlcSwgbm90ZSwgZGlmZiB9IGZyb20gXCIuLi9waXRjaC9ub3Rlc1wiO1xuaW1wb3J0IHsgUGl0Y2hHZW5lcmF0b3IsIFNhbXBsZSB9IGZyb20gXCJwaXRjaC9waXRjaFwiO1xuXG5pbXBvcnQgeyBHZW5lcmF0b3JDb21wb25lbnQgfSBmcm9tIFwiLi9HZW5lcmF0b3JDb21wb25lbnRcIjtcbmltcG9ydCB7IGdldExvZ2dlciB9IGZyb20gXCJsb2dcIjtcblxuY29uc3QgTE9HID0gZ2V0TG9nZ2VyKCk7XG5cbnR5cGUgUmVjb3JkaW5nID0gU2FtcGxlW107XG50eXBlIFBpdGNoUmVjb3JkZXJQcm9wcyA9IHtcbiAgcGl0Y2hHZW5lcmF0b3I/OiBQaXRjaEdlbmVyYXRvcjtcbiAgdGltZW91dE1zOiBudW1iZXI7XG4gIG9uRmluaXNoOiAoc2FtcGxlczogUmVjb3JkaW5nKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIFBpdGNoUmVjb3JkZXIoe1xuICBwaXRjaEdlbmVyYXRvcixcbiAgdGltZW91dE1zLFxuICBvbkZpbmlzaCxcbn06IFBpdGNoUmVjb3JkZXJQcm9wcykge1xuICBjb25zdCBbcmVjb3JkaW5nLCBzZXRSZWNvcmRpbmddID0gdXNlU3RhdGU8UmVjb3JkaW5nPihbXSk7XG4gIGNvbnN0IFtmaW5pc2hlZCwgc2V0RmluaXNoZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgTE9HLmluZm8oXCJTZXR0aW5nIHVwIHRoZSB0aW1lb3V0LlwiKTtcbiAgICBjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRGaW5pc2hlZCh0cnVlKTtcbiAgICB9LCB0aW1lb3V0TXMpO1xuXG4gICAgTE9HLmluZm8oXCJTZXQgdXAgdGltZXIgJWQgZm9yICVkIG1zLlwiLCB0LCB0aW1lb3V0TXMpO1xuXG4gICAgcmV0dXJuICgpID0+IHtcbiAgICAgIExPRy5pbmZvKFwiQ2xlYXJpbmcgb3V0IHRoZSB0aW1lb3V0ICVkLlwiLCB0KTtcbiAgICAgIGNsZWFyVGltZW91dCh0KTtcbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgIExPRy5pbmZvKFwiRmluaXNoaW5nIHJlY29yZGluZy5cIik7XG4gICAgICBvbkZpbmlzaChyZWNvcmRpbmcpO1xuICAgIH1cbiAgfSwgW2ZpbmlzaGVkLCByZWNvcmRpbmddKTtcblxuICBjb25zdCBhZGRTYW1wbGUgPSAocDogU2FtcGxlKSA9PiB7XG4gICAgY29uc3QgbmV3UmVjb3JkaW5nID0gcmVjb3JkaW5nLmNvbmNhdChbcF0pO1xuICAgIHNldFJlY29yZGluZyhuZXdSZWNvcmRpbmcpO1xuICB9O1xuXG4gIHJldHVybiBwaXRjaEdlbmVyYXRvciA/IChcbiAgICA8PlxuICAgICAgPEdlbmVyYXRvckNvbXBvbmVudCBnZW5lcmF0b3I9e3BpdGNoR2VuZXJhdG9yfSBvblRpY2s9e2FkZFNhbXBsZX0+XG4gICAgICAgIHsodmFsdWU6IFBpdGNoKSA9PiA8aDM+TGlzdGVuaW5nLi4uPC9oMz59XG4gICAgICA8L0dlbmVyYXRvckNvbXBvbmVudD5cbiAgICA8Lz5cbiAgKSA6IChcbiAgICA8c3Bhbj5Jbml0aWFsaXppbmcuLi48L3NwYW4+XG4gICk7XG59XG4iLCJpbXBvcnQgY2FuVXNlRE9NIGZyb20gJy4vY2FuVXNlRE9NJztcbmltcG9ydCBjc3MgZnJvbSAnLi9jc3MnO1xuaW1wb3J0IGxpc3RlbiBmcm9tICcuL2xpc3Rlbic7XG5leHBvcnQgdmFyIFRSQU5TSVRJT05fU1VQUE9SVEVEID0gY2FuVXNlRE9NICYmICdvbnRyYW5zaXRpb25lbmQnIGluIHdpbmRvdztcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUR1cmF0aW9uKG5vZGUpIHtcbiAgdmFyIHN0ciA9IGNzcyhub2RlLCAndHJhbnNpdGlvbkR1cmF0aW9uJykgfHwgJyc7XG4gIHZhciBtdWx0ID0gc3RyLmluZGV4T2YoJ21zJykgPT09IC0xID8gMTAwMCA6IDE7XG4gIHJldHVybiBwYXJzZUZsb2F0KHN0cikgKiBtdWx0O1xufVxuXG5mdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICBldnQuaW5pdEV2ZW50KCd0cmFuc2l0aW9uZW5kJywgdHJ1ZSwgdHJ1ZSk7XG4gIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xufVxuXG5mdW5jdGlvbiBlbXVsYXRlVHJhbnNpdGlvbkVuZChlbGVtZW50LCBkdXJhdGlvbiwgcGFkZGluZykge1xuICBpZiAocGFkZGluZyA9PT0gdm9pZCAwKSB7XG4gICAgcGFkZGluZyA9IDU7XG4gIH1cblxuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHZhciBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWNhbGxlZCkgdHJpZ2dlclRyYW5zaXRpb25FbmQoZWxlbWVudCk7XG4gIH0sIGR1cmF0aW9uICsgcGFkZGluZyk7XG4gIHZhciByZW1vdmUgPSBsaXN0ZW4oZWxlbWVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgfSwge1xuICAgIG9uY2U6IHRydWVcbiAgfSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgcmVtb3ZlKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoZWxlbWVudCwgaGFuZGxlciwgZHVyYXRpb24pIHtcbiAgaWYgKGR1cmF0aW9uID09IG51bGwpIGR1cmF0aW9uID0gcGFyc2VEdXJhdGlvbihlbGVtZW50KSB8fCAwO1xuICB2YXIgcmVtb3ZlRW11bGF0ZSA9IGVtdWxhdGVUcmFuc2l0aW9uRW5kKGVsZW1lbnQsIGR1cmF0aW9uKTtcbiAgdmFyIHJlbW92ZSA9IGxpc3RlbihlbGVtZW50LCAndHJhbnNpdGlvbmVuZCcsIGhhbmRsZXIpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZUVtdWxhdGUoKTtcbiAgICByZW1vdmUoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdHJhbnNpdGlvbkVuZDsiLCJleHBvcnQgZGVmYXVsdCB7XG4gIGRpc2FibGVkOiBmYWxzZVxufTsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTsiLCJpbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBfaW5oZXJpdHNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNMb29zZVwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgdGltZW91dHNTaGFwZSB9IGZyb20gJy4vdXRpbHMvUHJvcFR5cGVzJztcbmltcG9ydCBUcmFuc2l0aW9uR3JvdXBDb250ZXh0IGZyb20gJy4vVHJhbnNpdGlvbkdyb3VwQ29udGV4dCc7XG5leHBvcnQgdmFyIFVOTU9VTlRFRCA9ICd1bm1vdW50ZWQnO1xuZXhwb3J0IHZhciBFWElURUQgPSAnZXhpdGVkJztcbmV4cG9ydCB2YXIgRU5URVJJTkcgPSAnZW50ZXJpbmcnO1xuZXhwb3J0IHZhciBFTlRFUkVEID0gJ2VudGVyZWQnO1xuZXhwb3J0IHZhciBFWElUSU5HID0gJ2V4aXRpbmcnO1xuLyoqXG4gKiBUaGUgVHJhbnNpdGlvbiBjb21wb25lbnQgbGV0cyB5b3UgZGVzY3JpYmUgYSB0cmFuc2l0aW9uIGZyb20gb25lIGNvbXBvbmVudFxuICogc3RhdGUgdG8gYW5vdGhlciBfb3ZlciB0aW1lXyB3aXRoIGEgc2ltcGxlIGRlY2xhcmF0aXZlIEFQSS4gTW9zdCBjb21tb25seVxuICogaXQncyB1c2VkIHRvIGFuaW1hdGUgdGhlIG1vdW50aW5nIGFuZCB1bm1vdW50aW5nIG9mIGEgY29tcG9uZW50LCBidXQgY2FuIGFsc29cbiAqIGJlIHVzZWQgdG8gZGVzY3JpYmUgaW4tcGxhY2UgdHJhbnNpdGlvbiBzdGF0ZXMgYXMgd2VsbC5cbiAqXG4gKiAtLS1cbiAqXG4gKiAqKk5vdGUqKjogYFRyYW5zaXRpb25gIGlzIGEgcGxhdGZvcm0tYWdub3N0aWMgYmFzZSBjb21wb25lbnQuIElmIHlvdSdyZSB1c2luZ1xuICogdHJhbnNpdGlvbnMgaW4gQ1NTLCB5b3UnbGwgcHJvYmFibHkgd2FudCB0byB1c2VcbiAqIFtgQ1NTVHJhbnNpdGlvbmBdKGh0dHBzOi8vcmVhY3Rjb21tdW5pdHkub3JnL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvY3NzLXRyYW5zaXRpb24pXG4gKiBpbnN0ZWFkLiBJdCBpbmhlcml0cyBhbGwgdGhlIGZlYXR1cmVzIG9mIGBUcmFuc2l0aW9uYCwgYnV0IGNvbnRhaW5zXG4gKiBhZGRpdGlvbmFsIGZlYXR1cmVzIG5lY2Vzc2FyeSB0byBwbGF5IG5pY2Ugd2l0aCBDU1MgdHJhbnNpdGlvbnMgKGhlbmNlIHRoZVxuICogbmFtZSBvZiB0aGUgY29tcG9uZW50KS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBCeSBkZWZhdWx0IHRoZSBgVHJhbnNpdGlvbmAgY29tcG9uZW50IGRvZXMgbm90IGFsdGVyIHRoZSBiZWhhdmlvciBvZiB0aGVcbiAqIGNvbXBvbmVudCBpdCByZW5kZXJzLCBpdCBvbmx5IHRyYWNrcyBcImVudGVyXCIgYW5kIFwiZXhpdFwiIHN0YXRlcyBmb3IgdGhlXG4gKiBjb21wb25lbnRzLiBJdCdzIHVwIHRvIHlvdSB0byBnaXZlIG1lYW5pbmcgYW5kIGVmZmVjdCB0byB0aG9zZSBzdGF0ZXMuIEZvclxuICogZXhhbXBsZSB3ZSBjYW4gYWRkIHN0eWxlcyB0byBhIGNvbXBvbmVudCB3aGVuIGl0IGVudGVycyBvciBleGl0czpcbiAqXG4gKiBgYGBqc3hcbiAqIGltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICdyZWFjdC10cmFuc2l0aW9uLWdyb3VwJztcbiAqXG4gKiBjb25zdCBkdXJhdGlvbiA9IDMwMDtcbiAqXG4gKiBjb25zdCBkZWZhdWx0U3R5bGUgPSB7XG4gKiAgIHRyYW5zaXRpb246IGBvcGFjaXR5ICR7ZHVyYXRpb259bXMgZWFzZS1pbi1vdXRgLFxuICogICBvcGFjaXR5OiAwLFxuICogfVxuICpcbiAqIGNvbnN0IHRyYW5zaXRpb25TdHlsZXMgPSB7XG4gKiAgIGVudGVyaW5nOiB7IG9wYWNpdHk6IDEgfSxcbiAqICAgZW50ZXJlZDogIHsgb3BhY2l0eTogMSB9LFxuICogICBleGl0aW5nOiAgeyBvcGFjaXR5OiAwIH0sXG4gKiAgIGV4aXRlZDogIHsgb3BhY2l0eTogMCB9LFxuICogfTtcbiAqXG4gKiBjb25zdCBGYWRlID0gKHsgaW46IGluUHJvcCB9KSA9PiAoXG4gKiAgIDxUcmFuc2l0aW9uIGluPXtpblByb3B9IHRpbWVvdXQ9e2R1cmF0aW9ufT5cbiAqICAgICB7c3RhdGUgPT4gKFxuICogICAgICAgPGRpdiBzdHlsZT17e1xuICogICAgICAgICAuLi5kZWZhdWx0U3R5bGUsXG4gKiAgICAgICAgIC4uLnRyYW5zaXRpb25TdHlsZXNbc3RhdGVdXG4gKiAgICAgICB9fT5cbiAqICAgICAgICAgSSdtIGEgZmFkZSBUcmFuc2l0aW9uIVxuICogICAgICAgPC9kaXY+XG4gKiAgICAgKX1cbiAqICAgPC9UcmFuc2l0aW9uPlxuICogKTtcbiAqIGBgYFxuICpcbiAqIFRoZXJlIGFyZSA0IG1haW4gc3RhdGVzIGEgVHJhbnNpdGlvbiBjYW4gYmUgaW46XG4gKiAgLSBgJ2VudGVyaW5nJ2BcbiAqICAtIGAnZW50ZXJlZCdgXG4gKiAgLSBgJ2V4aXRpbmcnYFxuICogIC0gYCdleGl0ZWQnYFxuICpcbiAqIFRyYW5zaXRpb24gc3RhdGUgaXMgdG9nZ2xlZCB2aWEgdGhlIGBpbmAgcHJvcC4gV2hlbiBgdHJ1ZWAgdGhlIGNvbXBvbmVudFxuICogYmVnaW5zIHRoZSBcIkVudGVyXCIgc3RhZ2UuIER1cmluZyB0aGlzIHN0YWdlLCB0aGUgY29tcG9uZW50IHdpbGwgc2hpZnQgZnJvbVxuICogaXRzIGN1cnJlbnQgdHJhbnNpdGlvbiBzdGF0ZSwgdG8gYCdlbnRlcmluZydgIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlXG4gKiB0cmFuc2l0aW9uIGFuZCB0aGVuIHRvIHRoZSBgJ2VudGVyZWQnYCBzdGFnZSBvbmNlIGl0J3MgY29tcGxldGUuIExldCdzIHRha2VcbiAqIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSAod2UnbGwgdXNlIHRoZVxuICogW3VzZVN0YXRlXShodHRwczovL3JlYWN0anMub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWwjdXNlc3RhdGUpIGhvb2spOlxuICpcbiAqIGBgYGpzeFxuICogZnVuY3Rpb24gQXBwKCkge1xuICogICBjb25zdCBbaW5Qcm9wLCBzZXRJblByb3BdID0gdXNlU3RhdGUoZmFsc2UpO1xuICogICByZXR1cm4gKFxuICogICAgIDxkaXY+XG4gKiAgICAgICA8VHJhbnNpdGlvbiBpbj17aW5Qcm9wfSB0aW1lb3V0PXs1MDB9PlxuICogICAgICAgICB7c3RhdGUgPT4gKFxuICogICAgICAgICAgIC8vIC4uLlxuICogICAgICAgICApfVxuICogICAgICAgPC9UcmFuc2l0aW9uPlxuICogICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRJblByb3AodHJ1ZSl9PlxuICogICAgICAgICBDbGljayB0byBFbnRlclxuICogICAgICAgPC9idXR0b24+XG4gKiAgICAgPC9kaXY+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCB0aGUgY29tcG9uZW50IHdpbGwgc2hpZnQgdG8gdGhlIGAnZW50ZXJpbmcnYCBzdGF0ZVxuICogYW5kIHN0YXkgdGhlcmUgZm9yIDUwMG1zICh0aGUgdmFsdWUgb2YgYHRpbWVvdXRgKSBiZWZvcmUgaXQgZmluYWxseSBzd2l0Y2hlc1xuICogdG8gYCdlbnRlcmVkJ2AuXG4gKlxuICogV2hlbiBgaW5gIGlzIGBmYWxzZWAgdGhlIHNhbWUgdGhpbmcgaGFwcGVucyBleGNlcHQgdGhlIHN0YXRlIG1vdmVzIGZyb21cbiAqIGAnZXhpdGluZydgIHRvIGAnZXhpdGVkJ2AuXG4gKi9cblxudmFyIFRyYW5zaXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVHJhbnNpdGlvbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVHJhbnNpdGlvbihwcm9wcywgY29udGV4dCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1JlYWN0JENvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KSB8fCB0aGlzO1xuICAgIHZhciBwYXJlbnRHcm91cCA9IGNvbnRleHQ7IC8vIEluIHRoZSBjb250ZXh0IG9mIGEgVHJhbnNpdGlvbkdyb3VwIGFsbCBlbnRlcnMgYXJlIHJlYWxseSBhcHBlYXJzXG5cbiAgICB2YXIgYXBwZWFyID0gcGFyZW50R3JvdXAgJiYgIXBhcmVudEdyb3VwLmlzTW91bnRpbmcgPyBwcm9wcy5lbnRlciA6IHByb3BzLmFwcGVhcjtcbiAgICB2YXIgaW5pdGlhbFN0YXR1cztcbiAgICBfdGhpcy5hcHBlYXJTdGF0dXMgPSBudWxsO1xuXG4gICAgaWYgKHByb3BzLmluKSB7XG4gICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgIGluaXRpYWxTdGF0dXMgPSBFWElURUQ7XG4gICAgICAgIF90aGlzLmFwcGVhclN0YXR1cyA9IEVOVEVSSU5HO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdGlhbFN0YXR1cyA9IEVOVEVSRUQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9wcy51bm1vdW50T25FeGl0IHx8IHByb3BzLm1vdW50T25FbnRlcikge1xuICAgICAgICBpbml0aWFsU3RhdHVzID0gVU5NT1VOVEVEO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdGlhbFN0YXR1cyA9IEVYSVRFRDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN0YXR1czogaW5pdGlhbFN0YXR1c1xuICAgIH07XG4gICAgX3RoaXMubmV4dENhbGxiYWNrID0gbnVsbDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBUcmFuc2l0aW9uLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhfcmVmLCBwcmV2U3RhdGUpIHtcbiAgICB2YXIgbmV4dEluID0gX3JlZi5pbjtcblxuICAgIGlmIChuZXh0SW4gJiYgcHJldlN0YXRlLnN0YXR1cyA9PT0gVU5NT1VOVEVEKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IEVYSVRFRFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgLy8gICBsZXQgbmV4dFN0YXR1cyA9IG51bGxcbiAgLy8gICBpZiAocHJldlByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gIC8vICAgICBjb25zdCB7IHN0YXR1cyB9ID0gdGhpcy5zdGF0ZVxuICAvLyAgICAgaWYgKHRoaXMucHJvcHMuaW4pIHtcbiAgLy8gICAgICAgaWYgKHN0YXR1cyAhPT0gRU5URVJJTkcgJiYgc3RhdHVzICE9PSBFTlRFUkVEKSB7XG4gIC8vICAgICAgICAgbmV4dFN0YXR1cyA9IEVOVEVSSU5HXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIGlmIChzdGF0dXMgPT09IEVOVEVSSU5HIHx8IHN0YXR1cyA9PT0gRU5URVJFRCkge1xuICAvLyAgICAgICAgIG5leHRTdGF0dXMgPSBFWElUSU5HXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgcmV0dXJuIHsgbmV4dFN0YXR1cyB9XG4gIC8vIH1cbiAgO1xuXG4gIHZhciBfcHJvdG8gPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyh0cnVlLCB0aGlzLmFwcGVhclN0YXR1cyk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICB2YXIgbmV4dFN0YXR1cyA9IG51bGw7XG5cbiAgICBpZiAocHJldlByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gICAgICB2YXIgc3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmluKSB7XG4gICAgICAgIGlmIChzdGF0dXMgIT09IEVOVEVSSU5HICYmIHN0YXR1cyAhPT0gRU5URVJFRCkge1xuICAgICAgICAgIG5leHRTdGF0dXMgPSBFTlRFUklORztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gRU5URVJJTkcgfHwgc3RhdHVzID09PSBFTlRFUkVEKSB7XG4gICAgICAgICAgbmV4dFN0YXR1cyA9IEVYSVRJTkc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhmYWxzZSwgbmV4dFN0YXR1cyk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jYW5jZWxOZXh0Q2FsbGJhY2soKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0VGltZW91dHMgPSBmdW5jdGlvbiBnZXRUaW1lb3V0cygpIHtcbiAgICB2YXIgdGltZW91dCA9IHRoaXMucHJvcHMudGltZW91dDtcbiAgICB2YXIgZXhpdCwgZW50ZXIsIGFwcGVhcjtcbiAgICBleGl0ID0gZW50ZXIgPSBhcHBlYXIgPSB0aW1lb3V0O1xuXG4gICAgaWYgKHRpbWVvdXQgIT0gbnVsbCAmJiB0eXBlb2YgdGltZW91dCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGV4aXQgPSB0aW1lb3V0LmV4aXQ7XG4gICAgICBlbnRlciA9IHRpbWVvdXQuZW50ZXI7IC8vIFRPRE86IHJlbW92ZSBmYWxsYmFjayBmb3IgbmV4dCBtYWpvclxuXG4gICAgICBhcHBlYXIgPSB0aW1lb3V0LmFwcGVhciAhPT0gdW5kZWZpbmVkID8gdGltZW91dC5hcHBlYXIgOiBlbnRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZXhpdDogZXhpdCxcbiAgICAgIGVudGVyOiBlbnRlcixcbiAgICAgIGFwcGVhcjogYXBwZWFyXG4gICAgfTtcbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlU3RhdHVzKG1vdW50aW5nLCBuZXh0U3RhdHVzKSB7XG4gICAgaWYgKG1vdW50aW5nID09PSB2b2lkIDApIHtcbiAgICAgIG1vdW50aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG5leHRTdGF0dXMgIT09IG51bGwpIHtcbiAgICAgIC8vIG5leHRTdGF0dXMgd2lsbCBhbHdheXMgYmUgRU5URVJJTkcgb3IgRVhJVElORy5cbiAgICAgIHRoaXMuY2FuY2VsTmV4dENhbGxiYWNrKCk7XG5cbiAgICAgIGlmIChuZXh0U3RhdHVzID09PSBFTlRFUklORykge1xuICAgICAgICB0aGlzLnBlcmZvcm1FbnRlcihtb3VudGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBlcmZvcm1FeGl0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVubW91bnRPbkV4aXQgJiYgdGhpcy5zdGF0ZS5zdGF0dXMgPT09IEVYSVRFRCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogVU5NT1VOVEVEXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnBlcmZvcm1FbnRlciA9IGZ1bmN0aW9uIHBlcmZvcm1FbnRlcihtb3VudGluZykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGVudGVyID0gdGhpcy5wcm9wcy5lbnRlcjtcbiAgICB2YXIgYXBwZWFyaW5nID0gdGhpcy5jb250ZXh0ID8gdGhpcy5jb250ZXh0LmlzTW91bnRpbmcgOiBtb3VudGluZztcblxuICAgIHZhciBfcmVmMiA9IHRoaXMucHJvcHMubm9kZVJlZiA/IFthcHBlYXJpbmddIDogW1JlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLCBhcHBlYXJpbmddLFxuICAgICAgICBtYXliZU5vZGUgPSBfcmVmMlswXSxcbiAgICAgICAgbWF5YmVBcHBlYXJpbmcgPSBfcmVmMlsxXTtcblxuICAgIHZhciB0aW1lb3V0cyA9IHRoaXMuZ2V0VGltZW91dHMoKTtcbiAgICB2YXIgZW50ZXJUaW1lb3V0ID0gYXBwZWFyaW5nID8gdGltZW91dHMuYXBwZWFyIDogdGltZW91dHMuZW50ZXI7IC8vIG5vIGVudGVyIGFuaW1hdGlvbiBza2lwIHJpZ2h0IHRvIEVOVEVSRURcbiAgICAvLyBpZiB3ZSBhcmUgbW91bnRpbmcgYW5kIHJ1bm5pbmcgdGhpcyBpdCBtZWFucyBhcHBlYXIgX211c3RfIGJlIHNldFxuXG4gICAgaWYgKCFtb3VudGluZyAmJiAhZW50ZXIgfHwgY29uZmlnLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLnNhZmVTZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogRU5URVJFRFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIucHJvcHMub25FbnRlcmVkKG1heWJlTm9kZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLm9uRW50ZXIobWF5YmVOb2RlLCBtYXliZUFwcGVhcmluZyk7XG4gICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgc3RhdHVzOiBFTlRFUklOR1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5wcm9wcy5vbkVudGVyaW5nKG1heWJlTm9kZSwgbWF5YmVBcHBlYXJpbmcpO1xuXG4gICAgICBfdGhpczIub25UcmFuc2l0aW9uRW5kKGVudGVyVGltZW91dCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuc2FmZVNldFN0YXRlKHtcbiAgICAgICAgICBzdGF0dXM6IEVOVEVSRURcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5wcm9wcy5vbkVudGVyZWQobWF5YmVOb2RlLCBtYXliZUFwcGVhcmluZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnBlcmZvcm1FeGl0ID0gZnVuY3Rpb24gcGVyZm9ybUV4aXQoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgZXhpdCA9IHRoaXMucHJvcHMuZXhpdDtcbiAgICB2YXIgdGltZW91dHMgPSB0aGlzLmdldFRpbWVvdXRzKCk7XG4gICAgdmFyIG1heWJlTm9kZSA9IHRoaXMucHJvcHMubm9kZVJlZiA/IHVuZGVmaW5lZCA6IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpOyAvLyBubyBleGl0IGFuaW1hdGlvbiBza2lwIHJpZ2h0IHRvIEVYSVRFRFxuXG4gICAgaWYgKCFleGl0IHx8IGNvbmZpZy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgICBzdGF0dXM6IEVYSVRFRFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMucHJvcHMub25FeGl0ZWQobWF5YmVOb2RlKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucHJvcHMub25FeGl0KG1heWJlTm9kZSk7XG4gICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgc3RhdHVzOiBFWElUSU5HXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMzLnByb3BzLm9uRXhpdGluZyhtYXliZU5vZGUpO1xuXG4gICAgICBfdGhpczMub25UcmFuc2l0aW9uRW5kKHRpbWVvdXRzLmV4aXQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLnNhZmVTZXRTdGF0ZSh7XG4gICAgICAgICAgc3RhdHVzOiBFWElURURcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5wcm9wcy5vbkV4aXRlZChtYXliZU5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5jYW5jZWxOZXh0Q2FsbGJhY2sgPSBmdW5jdGlvbiBjYW5jZWxOZXh0Q2FsbGJhY2soKSB7XG4gICAgaWYgKHRoaXMubmV4dENhbGxiYWNrICE9PSBudWxsKSB7XG4gICAgICB0aGlzLm5leHRDYWxsYmFjay5jYW5jZWwoKTtcbiAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNhZmVTZXRTdGF0ZSA9IGZ1bmN0aW9uIHNhZmVTZXRTdGF0ZShuZXh0U3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgLy8gVGhpcyBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5LCBidXQgdGhlcmUgYXJlIHdlaXJkIHJhY2UgY29uZGl0aW9ucyB3aXRoXG4gICAgLy8gc2V0U3RhdGUgY2FsbGJhY2tzIGFuZCB1bm1vdW50aW5nIGluIHRlc3RpbmcsIHNvIGFsd2F5cyBtYWtlIHN1cmUgdGhhdFxuICAgIC8vIHdlIGNhbiBjYW5jZWwgYW55IHBlbmRpbmcgc2V0U3RhdGUgY2FsbGJhY2tzIGFmdGVyIHdlIHVubW91bnQuXG4gICAgY2FsbGJhY2sgPSB0aGlzLnNldE5leHRDYWxsYmFjayhjYWxsYmFjayk7XG4gICAgdGhpcy5zZXRTdGF0ZShuZXh0U3RhdGUsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBfcHJvdG8uc2V0TmV4dENhbGxiYWNrID0gZnVuY3Rpb24gc2V0TmV4dENhbGxiYWNrKGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICB2YXIgYWN0aXZlID0gdHJ1ZTtcblxuICAgIHRoaXMubmV4dENhbGxiYWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBfdGhpczQubmV4dENhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm5leHRDYWxsYmFjay5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMubmV4dENhbGxiYWNrO1xuICB9O1xuXG4gIF9wcm90by5vblRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiBvblRyYW5zaXRpb25FbmQodGltZW91dCwgaGFuZGxlcikge1xuICAgIHRoaXMuc2V0TmV4dENhbGxiYWNrKGhhbmRsZXIpO1xuICAgIHZhciBub2RlID0gdGhpcy5wcm9wcy5ub2RlUmVmID8gdGhpcy5wcm9wcy5ub2RlUmVmLmN1cnJlbnQgOiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgZG9lc05vdEhhdmVUaW1lb3V0T3JMaXN0ZW5lciA9IHRpbWVvdXQgPT0gbnVsbCAmJiAhdGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcjtcblxuICAgIGlmICghbm9kZSB8fCBkb2VzTm90SGF2ZVRpbWVvdXRPckxpc3RlbmVyKSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMubmV4dENhbGxiYWNrLCAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcikge1xuICAgICAgdmFyIF9yZWYzID0gdGhpcy5wcm9wcy5ub2RlUmVmID8gW3RoaXMubmV4dENhbGxiYWNrXSA6IFtub2RlLCB0aGlzLm5leHRDYWxsYmFja10sXG4gICAgICAgICAgbWF5YmVOb2RlID0gX3JlZjNbMF0sXG4gICAgICAgICAgbWF5YmVOZXh0Q2FsbGJhY2sgPSBfcmVmM1sxXTtcblxuICAgICAgdGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcihtYXliZU5vZGUsIG1heWJlTmV4dENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMubmV4dENhbGxiYWNrLCB0aW1lb3V0KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgc3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXM7XG5cbiAgICBpZiAoc3RhdHVzID09PSBVTk1PVU5URUQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIF9pbiA9IF90aGlzJHByb3BzLmluLFxuICAgICAgICBfbW91bnRPbkVudGVyID0gX3RoaXMkcHJvcHMubW91bnRPbkVudGVyLFxuICAgICAgICBfdW5tb3VudE9uRXhpdCA9IF90aGlzJHByb3BzLnVubW91bnRPbkV4aXQsXG4gICAgICAgIF9hcHBlYXIgPSBfdGhpcyRwcm9wcy5hcHBlYXIsXG4gICAgICAgIF9lbnRlciA9IF90aGlzJHByb3BzLmVudGVyLFxuICAgICAgICBfZXhpdCA9IF90aGlzJHByb3BzLmV4aXQsXG4gICAgICAgIF90aW1lb3V0ID0gX3RoaXMkcHJvcHMudGltZW91dCxcbiAgICAgICAgX2FkZEVuZExpc3RlbmVyID0gX3RoaXMkcHJvcHMuYWRkRW5kTGlzdGVuZXIsXG4gICAgICAgIF9vbkVudGVyID0gX3RoaXMkcHJvcHMub25FbnRlcixcbiAgICAgICAgX29uRW50ZXJpbmcgPSBfdGhpcyRwcm9wcy5vbkVudGVyaW5nLFxuICAgICAgICBfb25FbnRlcmVkID0gX3RoaXMkcHJvcHMub25FbnRlcmVkLFxuICAgICAgICBfb25FeGl0ID0gX3RoaXMkcHJvcHMub25FeGl0LFxuICAgICAgICBfb25FeGl0aW5nID0gX3RoaXMkcHJvcHMub25FeGl0aW5nLFxuICAgICAgICBfb25FeGl0ZWQgPSBfdGhpcyRwcm9wcy5vbkV4aXRlZCxcbiAgICAgICAgX25vZGVSZWYgPSBfdGhpcyRwcm9wcy5ub2RlUmVmLFxuICAgICAgICBjaGlsZFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3RoaXMkcHJvcHMsIFtcImNoaWxkcmVuXCIsIFwiaW5cIiwgXCJtb3VudE9uRW50ZXJcIiwgXCJ1bm1vdW50T25FeGl0XCIsIFwiYXBwZWFyXCIsIFwiZW50ZXJcIiwgXCJleGl0XCIsIFwidGltZW91dFwiLCBcImFkZEVuZExpc3RlbmVyXCIsIFwib25FbnRlclwiLCBcIm9uRW50ZXJpbmdcIiwgXCJvbkVudGVyZWRcIiwgXCJvbkV4aXRcIiwgXCJvbkV4aXRpbmdcIiwgXCJvbkV4aXRlZFwiLCBcIm5vZGVSZWZcIl0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgIC8vIGFsbG93cyBmb3IgbmVzdGVkIFRyYW5zaXRpb25zXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zaXRpb25Hcm91cENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sIHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKHN0YXR1cywgY2hpbGRQcm9wcykgOiBSZWFjdC5jbG9uZUVsZW1lbnQoUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbiksIGNoaWxkUHJvcHMpKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFRyYW5zaXRpb247XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblRyYW5zaXRpb24uY29udGV4dFR5cGUgPSBUcmFuc2l0aW9uR3JvdXBDb250ZXh0O1xuVHJhbnNpdGlvbi5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBBIFJlYWN0IHJlZmVyZW5jZSB0byBET00gZWxlbWVudCB0aGF0IG5lZWQgdG8gdHJhbnNpdGlvbjpcbiAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUxMTI3MTMwLzQ2NzE5MzJcbiAgICpcbiAgICogICAtIFdoZW4gYG5vZGVSZWZgIHByb3AgaXMgdXNlZCwgYG5vZGVgIGlzIG5vdCBwYXNzZWQgdG8gY2FsbGJhY2sgZnVuY3Rpb25zXG4gICAqICAgICAgKGUuZy4gYG9uRW50ZXJgKSBiZWNhdXNlIHVzZXIgYWxyZWFkeSBoYXMgZGlyZWN0IGFjY2VzcyB0byB0aGUgbm9kZS5cbiAgICogICAtIFdoZW4gY2hhbmdpbmcgYGtleWAgcHJvcCBvZiBgVHJhbnNpdGlvbmAgaW4gYSBgVHJhbnNpdGlvbkdyb3VwYCBhIG5ld1xuICAgKiAgICAgYG5vZGVSZWZgIG5lZWQgdG8gYmUgcHJvdmlkZWQgdG8gYFRyYW5zaXRpb25gIHdpdGggY2hhbmdlZCBga2V5YCBwcm9wXG4gICAqICAgICAoc2VlXG4gICAqICAgICBbdGVzdC9DU1NUcmFuc2l0aW9uLXRlc3QuanNdKGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvYmxvYi8xMzQzNWY4OTdiM2FiNzFmNmUxOWQ3MjRmMTQ1NTk2ZjU5MTA1ODFjL3Rlc3QvQ1NTVHJhbnNpdGlvbi10ZXN0LmpzI0wzNjItTDQzNykpLlxuICAgKi9cbiAgbm9kZVJlZjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBjdXJyZW50OiB0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyBQcm9wVHlwZXMuYW55IDogUHJvcFR5cGVzLmluc3RhbmNlT2YoRWxlbWVudClcbiAgfSksXG5cbiAgLyoqXG4gICAqIEEgYGZ1bmN0aW9uYCBjaGlsZCBjYW4gYmUgdXNlZCBpbnN0ZWFkIG9mIGEgUmVhY3QgZWxlbWVudC4gVGhpcyBmdW5jdGlvbiBpc1xuICAgKiBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCB0cmFuc2l0aW9uIHN0YXR1cyAoYCdlbnRlcmluZydgLCBgJ2VudGVyZWQnYCxcbiAgICogYCdleGl0aW5nJ2AsIGAnZXhpdGVkJ2ApLCB3aGljaCBjYW4gYmUgdXNlZCB0byBhcHBseSBjb250ZXh0XG4gICAqIHNwZWNpZmljIHByb3BzIHRvIGEgY29tcG9uZW50LlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogPFRyYW5zaXRpb24gaW49e3RoaXMuc3RhdGUuaW59IHRpbWVvdXQ9ezE1MH0+XG4gICAqICAge3N0YXRlID0+IChcbiAgICogICAgIDxNeUNvbXBvbmVudCBjbGFzc05hbWU9e2BmYWRlIGZhZGUtJHtzdGF0ZX1gfSAvPlxuICAgKiAgICl9XG4gICAqIDwvVHJhbnNpdGlvbj5cbiAgICogYGBgXG4gICAqL1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmVsZW1lbnQuaXNSZXF1aXJlZF0pLmlzUmVxdWlyZWQsXG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGNvbXBvbmVudDsgdHJpZ2dlcnMgdGhlIGVudGVyIG9yIGV4aXQgc3RhdGVzXG4gICAqL1xuICBpbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBtb3VudGVkIGltbWVkaWF0ZWx5IGFsb25nIHdpdGhcbiAgICogdGhlIHBhcmVudCBgVHJhbnNpdGlvbmAgY29tcG9uZW50LiBJZiB5b3Ugd2FudCB0byBcImxhenkgbW91bnRcIiB0aGUgY29tcG9uZW50IG9uIHRoZVxuICAgKiBmaXJzdCBgaW49e3RydWV9YCB5b3UgY2FuIHNldCBgbW91bnRPbkVudGVyYC4gQWZ0ZXIgdGhlIGZpcnN0IGVudGVyIHRyYW5zaXRpb24gdGhlIGNvbXBvbmVudCB3aWxsIHN0YXlcbiAgICogbW91bnRlZCwgZXZlbiBvbiBcImV4aXRlZFwiLCB1bmxlc3MgeW91IGFsc28gc3BlY2lmeSBgdW5tb3VudE9uRXhpdGAuXG4gICAqL1xuICBtb3VudE9uRW50ZXI6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBjaGlsZCBjb21wb25lbnQgc3RheXMgbW91bnRlZCBhZnRlciBpdCByZWFjaGVzIHRoZSBgJ2V4aXRlZCdgIHN0YXRlLlxuICAgKiBTZXQgYHVubW91bnRPbkV4aXRgIGlmIHlvdSdkIHByZWZlciB0byB1bm1vdW50IHRoZSBjb21wb25lbnQgYWZ0ZXIgaXQgZmluaXNoZXMgZXhpdGluZy5cbiAgICovXG4gIHVubW91bnRPbkV4aXQ6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBjaGlsZCBjb21wb25lbnQgZG9lcyBub3QgcGVyZm9ybSB0aGUgZW50ZXIgdHJhbnNpdGlvbiB3aGVuXG4gICAqIGl0IGZpcnN0IG1vdW50cywgcmVnYXJkbGVzcyBvZiB0aGUgdmFsdWUgb2YgYGluYC4gSWYgeW91IHdhbnQgdGhpc1xuICAgKiBiZWhhdmlvciwgc2V0IGJvdGggYGFwcGVhcmAgYW5kIGBpbmAgdG8gYHRydWVgLlxuICAgKlxuICAgKiA+ICoqTm90ZSoqOiB0aGVyZSBhcmUgbm8gc3BlY2lhbCBhcHBlYXIgc3RhdGVzIGxpa2UgYGFwcGVhcmluZ2AvYGFwcGVhcmVkYCwgdGhpcyBwcm9wXG4gICAqID4gb25seSBhZGRzIGFuIGFkZGl0aW9uYWwgZW50ZXIgdHJhbnNpdGlvbi4gSG93ZXZlciwgaW4gdGhlXG4gICAqID4gYDxDU1NUcmFuc2l0aW9uPmAgY29tcG9uZW50IHRoYXQgZmlyc3QgZW50ZXIgdHJhbnNpdGlvbiBkb2VzIHJlc3VsdCBpblxuICAgKiA+IGFkZGl0aW9uYWwgYC5hcHBlYXItKmAgY2xhc3NlcywgdGhhdCB3YXkgeW91IGNhbiBjaG9vc2UgdG8gc3R5bGUgaXRcbiAgICogPiBkaWZmZXJlbnRseS5cbiAgICovXG4gIGFwcGVhcjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEVuYWJsZSBvciBkaXNhYmxlIGVudGVyIHRyYW5zaXRpb25zLlxuICAgKi9cbiAgZW50ZXI6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBFbmFibGUgb3IgZGlzYWJsZSBleGl0IHRyYW5zaXRpb25zLlxuICAgKi9cbiAgZXhpdDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbiBvZiB0aGUgdHJhbnNpdGlvbiwgaW4gbWlsbGlzZWNvbmRzLlxuICAgKiBSZXF1aXJlZCB1bmxlc3MgYGFkZEVuZExpc3RlbmVyYCBpcyBwcm92aWRlZC5cbiAgICpcbiAgICogWW91IG1heSBzcGVjaWZ5IGEgc2luZ2xlIHRpbWVvdXQgZm9yIGFsbCB0cmFuc2l0aW9uczpcbiAgICpcbiAgICogYGBganN4XG4gICAqIHRpbWVvdXQ9ezUwMH1cbiAgICogYGBgXG4gICAqXG4gICAqIG9yIGluZGl2aWR1YWxseTpcbiAgICpcbiAgICogYGBganN4XG4gICAqIHRpbWVvdXQ9e3tcbiAgICogIGFwcGVhcjogNTAwLFxuICAgKiAgZW50ZXI6IDMwMCxcbiAgICogIGV4aXQ6IDUwMCxcbiAgICogfX1cbiAgICogYGBgXG4gICAqXG4gICAqIC0gYGFwcGVhcmAgZGVmYXVsdHMgdG8gdGhlIHZhbHVlIG9mIGBlbnRlcmBcbiAgICogLSBgZW50ZXJgIGRlZmF1bHRzIHRvIGAwYFxuICAgKiAtIGBleGl0YCBkZWZhdWx0cyB0byBgMGBcbiAgICpcbiAgICogQHR5cGUge251bWJlciB8IHsgZW50ZXI/OiBudW1iZXIsIGV4aXQ/OiBudW1iZXIsIGFwcGVhcj86IG51bWJlciB9fVxuICAgKi9cbiAgdGltZW91dDogZnVuY3Rpb24gdGltZW91dChwcm9wcykge1xuICAgIHZhciBwdCA9IHRpbWVvdXRzU2hhcGU7XG4gICAgaWYgKCFwcm9wcy5hZGRFbmRMaXN0ZW5lcikgcHQgPSBwdC5pc1JlcXVpcmVkO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHB0LmFwcGx5KHZvaWQgMCwgW3Byb3BzXS5jb25jYXQoYXJncykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSBjdXN0b20gdHJhbnNpdGlvbiBlbmQgdHJpZ2dlci4gQ2FsbGVkIHdpdGggdGhlIHRyYW5zaXRpb25pbmdcbiAgICogRE9NIG5vZGUgYW5kIGEgYGRvbmVgIGNhbGxiYWNrLiBBbGxvd3MgZm9yIG1vcmUgZmluZSBncmFpbmVkIHRyYW5zaXRpb24gZW5kXG4gICAqIGxvZ2ljLiBUaW1lb3V0cyBhcmUgc3RpbGwgdXNlZCBhcyBhIGZhbGxiYWNrIGlmIHByb3ZpZGVkLlxuICAgKlxuICAgKiAqKk5vdGUqKjogd2hlbiBgbm9kZVJlZmAgcHJvcCBpcyBwYXNzZWQsIGBub2RlYCBpcyBub3QgcGFzc2VkLlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogYWRkRW5kTGlzdGVuZXI9eyhub2RlLCBkb25lKSA9PiB7XG4gICAqICAgLy8gdXNlIHRoZSBjc3MgdHJhbnNpdGlvbmVuZCBldmVudCB0byBtYXJrIHRoZSBmaW5pc2ggb2YgYSB0cmFuc2l0aW9uXG4gICAqICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZG9uZSwgZmFsc2UpO1xuICAgKiB9fVxuICAgKiBgYGBcbiAgICovXG4gIGFkZEVuZExpc3RlbmVyOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYmVmb3JlIHRoZSBcImVudGVyaW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuIEFuIGV4dHJhIHBhcmFtZXRlclxuICAgKiBgaXNBcHBlYXJpbmdgIGlzIHN1cHBsaWVkIHRvIGluZGljYXRlIGlmIHRoZSBlbnRlciBzdGFnZSBpcyBvY2N1cnJpbmcgb24gdGhlIGluaXRpYWwgbW91bnRcbiAgICpcbiAgICogKipOb3RlKio6IHdoZW4gYG5vZGVSZWZgIHByb3AgaXMgcGFzc2VkLCBgbm9kZWAgaXMgbm90IHBhc3NlZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQsIGlzQXBwZWFyaW5nOiBib29sKSAtPiB2b2lkXG4gICAqL1xuICBvbkVudGVyOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYWZ0ZXIgdGhlIFwiZW50ZXJpbmdcIiBzdGF0dXMgaXMgYXBwbGllZC4gQW4gZXh0cmEgcGFyYW1ldGVyXG4gICAqIGBpc0FwcGVhcmluZ2AgaXMgc3VwcGxpZWQgdG8gaW5kaWNhdGUgaWYgdGhlIGVudGVyIHN0YWdlIGlzIG9jY3VycmluZyBvbiB0aGUgaW5pdGlhbCBtb3VudFxuICAgKlxuICAgKiAqKk5vdGUqKjogd2hlbiBgbm9kZVJlZmAgcHJvcCBpcyBwYXNzZWQsIGBub2RlYCBpcyBub3QgcGFzc2VkLlxuICAgKlxuICAgKiBAdHlwZSBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudCwgaXNBcHBlYXJpbmc6IGJvb2wpXG4gICAqL1xuICBvbkVudGVyaW5nOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYWZ0ZXIgdGhlIFwiZW50ZXJlZFwiIHN0YXR1cyBpcyBhcHBsaWVkLiBBbiBleHRyYSBwYXJhbWV0ZXJcbiAgICogYGlzQXBwZWFyaW5nYCBpcyBzdXBwbGllZCB0byBpbmRpY2F0ZSBpZiB0aGUgZW50ZXIgc3RhZ2UgaXMgb2NjdXJyaW5nIG9uIHRoZSBpbml0aWFsIG1vdW50XG4gICAqXG4gICAqICoqTm90ZSoqOiB3aGVuIGBub2RlUmVmYCBwcm9wIGlzIHBhc3NlZCwgYG5vZGVgIGlzIG5vdCBwYXNzZWQuXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50LCBpc0FwcGVhcmluZzogYm9vbCkgLT4gdm9pZFxuICAgKi9cbiAgb25FbnRlcmVkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYmVmb3JlIHRoZSBcImV4aXRpbmdcIiBzdGF0dXMgaXMgYXBwbGllZC5cbiAgICpcbiAgICogKipOb3RlKio6IHdoZW4gYG5vZGVSZWZgIHByb3AgaXMgcGFzc2VkLCBgbm9kZWAgaXMgbm90IHBhc3NlZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpIC0+IHZvaWRcbiAgICovXG4gIG9uRXhpdDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImV4aXRpbmdcIiBzdGF0dXMgaXMgYXBwbGllZC5cbiAgICpcbiAgICogKipOb3RlKio6IHdoZW4gYG5vZGVSZWZgIHByb3AgaXMgcGFzc2VkLCBgbm9kZWAgaXMgbm90IHBhc3NlZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpIC0+IHZvaWRcbiAgICovXG4gIG9uRXhpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImV4aXRlZFwiIHN0YXR1cyBpcyBhcHBsaWVkLlxuICAgKlxuICAgKiAqKk5vdGUqKjogd2hlbiBgbm9kZVJlZmAgcHJvcCBpcyBwYXNzZWQsIGBub2RlYCBpcyBub3QgcGFzc2VkXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50KSAtPiB2b2lkXG4gICAqL1xuICBvbkV4aXRlZDogUHJvcFR5cGVzLmZ1bmNcbn0gOiB7fTsgLy8gTmFtZSB0aGUgZnVuY3Rpb24gc28gaXQgaXMgY2xlYXJlciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuXG5mdW5jdGlvbiBub29wKCkge31cblxuVHJhbnNpdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIGluOiBmYWxzZSxcbiAgbW91bnRPbkVudGVyOiBmYWxzZSxcbiAgdW5tb3VudE9uRXhpdDogZmFsc2UsXG4gIGFwcGVhcjogZmFsc2UsXG4gIGVudGVyOiB0cnVlLFxuICBleGl0OiB0cnVlLFxuICBvbkVudGVyOiBub29wLFxuICBvbkVudGVyaW5nOiBub29wLFxuICBvbkVudGVyZWQ6IG5vb3AsXG4gIG9uRXhpdDogbm9vcCxcbiAgb25FeGl0aW5nOiBub29wLFxuICBvbkV4aXRlZDogbm9vcFxufTtcblRyYW5zaXRpb24uVU5NT1VOVEVEID0gVU5NT1VOVEVEO1xuVHJhbnNpdGlvbi5FWElURUQgPSBFWElURUQ7XG5UcmFuc2l0aW9uLkVOVEVSSU5HID0gRU5URVJJTkc7XG5UcmFuc2l0aW9uLkVOVEVSRUQgPSBFTlRFUkVEO1xuVHJhbnNpdGlvbi5FWElUSU5HID0gRVhJVElORztcbmV4cG9ydCBkZWZhdWx0IFRyYW5zaXRpb247IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcblxudmFyIF9mYWRlU3R5bGVzO1xuXG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB0cmFuc2l0aW9uRW5kIGZyb20gJ2RvbS1oZWxwZXJzL3RyYW5zaXRpb25FbmQnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFRyYW5zaXRpb24sIHsgRU5URVJFRCwgRU5URVJJTkcgfSBmcm9tICdyZWFjdC10cmFuc2l0aW9uLWdyb3VwL1RyYW5zaXRpb24nO1xuaW1wb3J0IHRyaWdnZXJCcm93c2VyUmVmbG93IGZyb20gJy4vdHJpZ2dlckJyb3dzZXJSZWZsb3cnO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgaW46IGZhbHNlLFxuICB0aW1lb3V0OiAzMDAsXG4gIG1vdW50T25FbnRlcjogZmFsc2UsXG4gIHVubW91bnRPbkV4aXQ6IGZhbHNlLFxuICBhcHBlYXI6IGZhbHNlXG59O1xudmFyIGZhZGVTdHlsZXMgPSAoX2ZhZGVTdHlsZXMgPSB7fSwgX2ZhZGVTdHlsZXNbRU5URVJJTkddID0gJ3Nob3cnLCBfZmFkZVN0eWxlc1tFTlRFUkVEXSA9ICdzaG93JywgX2ZhZGVTdHlsZXMpO1xudmFyIEZhZGUgPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmLCByZWYpIHtcbiAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJjbGFzc05hbWVcIiwgXCJjaGlsZHJlblwiXSk7XG5cbiAgdmFyIGhhbmRsZUVudGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB0cmlnZ2VyQnJvd3NlclJlZmxvdyhub2RlKTtcbiAgICBpZiAocHJvcHMub25FbnRlcikgcHJvcHMub25FbnRlcihub2RlKTtcbiAgfSwgW3Byb3BzXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2l0aW9uLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgYWRkRW5kTGlzdGVuZXI6IHRyYW5zaXRpb25FbmRcbiAgfSwgcHJvcHMsIHtcbiAgICBvbkVudGVyOiBoYW5kbGVFbnRlclxuICB9KSwgZnVuY3Rpb24gKHN0YXR1cywgaW5uZXJQcm9wcykge1xuICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGRyZW4sIF9leHRlbmRzKHt9LCBpbm5lclByb3BzLCB7XG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2ZhZGUnLCBjbGFzc05hbWUsIGNoaWxkcmVuLnByb3BzLmNsYXNzTmFtZSwgZmFkZVN0eWxlc1tzdGF0dXNdKVxuICAgIH0pKTtcbiAgfSk7XG59KTtcbkZhZGUuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuRmFkZS5kaXNwbGF5TmFtZSA9ICdGYWRlJztcbmV4cG9ydCBkZWZhdWx0IEZhZGU7IiwiLy8gcmVhZGluZyBhIGRpbWVuc2lvbiBwcm9wIHdpbGwgY2F1c2UgdGhlIGJyb3dzZXIgdG8gcmVjYWxjdWxhdGUsXG4vLyB3aGljaCB3aWxsIGxldCBvdXIgYW5pbWF0aW9ucyB3b3JrXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmlnZ2VyQnJvd3NlclJlZmxvdyhub2RlKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gIG5vZGUub2Zmc2V0SGVpZ2h0O1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xudmFyIHByb3BUeXBlcyA9IHtcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgb25DbGljazogUHJvcFR5cGVzLmZ1bmNcbn07XG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBsYWJlbDogJ0Nsb3NlJ1xufTtcbnZhciBDbG9zZUJ1dHRvbiA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKF9yZWYsIHJlZikge1xuICB2YXIgbGFiZWwgPSBfcmVmLmxhYmVsLFxuICAgICAgb25DbGljayA9IF9yZWYub25DbGljayxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJsYWJlbFwiLCBcIm9uQ2xpY2tcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2Nsb3NlJywgY2xhc3NOYW1lKSxcbiAgICBvbkNsaWNrOiBvbkNsaWNrXG4gIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXG4gIH0sIFwiXFx4RDdcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNyLW9ubHlcIlxuICB9LCBsYWJlbCkpO1xufSk7XG5DbG9zZUJ1dHRvbi5kaXNwbGF5TmFtZSA9ICdDbG9zZUJ1dHRvbic7XG5DbG9zZUJ1dHRvbi5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5DbG9zZUJ1dHRvbi5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5leHBvcnQgZGVmYXVsdCBDbG9zZUJ1dHRvbjsiLCJ2YXIgckh5cGhlbiA9IC8tKC4pL2c7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYW1lbGl6ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHJIeXBoZW4sIGZ1bmN0aW9uIChfLCBjaHIpIHtcbiAgICByZXR1cm4gY2hyLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBjYW1lbGl6ZSBmcm9tICdkb20taGVscGVycy9jYW1lbGl6ZSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQm9vdHN0cmFwUHJlZml4IH0gZnJvbSAnLi9UaGVtZVByb3ZpZGVyJztcblxudmFyIHBhc2NhbENhc2UgPSBmdW5jdGlvbiBwYXNjYWxDYXNlKHN0cikge1xuICByZXR1cm4gc3RyWzBdLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZShzdHIpLnNsaWNlKDEpO1xufTtcblxuLy8gVE9ETzogZW1zdHJpY3RlbiAmIGZpeCB0aGUgdHlwaW5nIGhlcmUhIGBjcmVhdGVXaXRoQnNQcmVmaXg8VEVsZW1lbnRUeXBlPi4uLmBcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVdpdGhCc1ByZWZpeChwcmVmaXgsIF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBfcmVmJGRpc3BsYXlOYW1lID0gX3JlZi5kaXNwbGF5TmFtZSxcbiAgICAgIGRpc3BsYXlOYW1lID0gX3JlZiRkaXNwbGF5TmFtZSA9PT0gdm9pZCAwID8gcGFzY2FsQ2FzZShwcmVmaXgpIDogX3JlZiRkaXNwbGF5TmFtZSxcbiAgICAgIENvbXBvbmVudCA9IF9yZWYuQ29tcG9uZW50LFxuICAgICAgZGVmYXVsdFByb3BzID0gX3JlZi5kZWZhdWx0UHJvcHM7XG5cbiAgdmFyIEJzQ29tcG9uZW50ID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZjIsIHJlZikge1xuICAgIHZhciBjbGFzc05hbWUgPSBfcmVmMi5jbGFzc05hbWUsXG4gICAgICAgIGJzUHJlZml4ID0gX3JlZjIuYnNQcmVmaXgsXG4gICAgICAgIF9yZWYyJGFzID0gX3JlZjIuYXMsXG4gICAgICAgIFRhZyA9IF9yZWYyJGFzID09PSB2b2lkIDAgPyBDb21wb25lbnQgfHwgJ2RpdicgOiBfcmVmMiRhcyxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmMiwgW1wiY2xhc3NOYW1lXCIsIFwiYnNQcmVmaXhcIiwgXCJhc1wiXSk7XG5cbiAgICB2YXIgcmVzb2x2ZWRQcmVmaXggPSB1c2VCb290c3RyYXBQcmVmaXgoYnNQcmVmaXgsIHByZWZpeCk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhZywgX2V4dGVuZHMoe1xuICAgICAgcmVmOiByZWYsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NOYW1lLCByZXNvbHZlZFByZWZpeClcbiAgICB9LCBwcm9wcykpO1xuICB9KTtcbiAgQnNDb21wb25lbnQuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuICBCc0NvbXBvbmVudC5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICByZXR1cm4gQnNDb21wb25lbnQ7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVVuY29udHJvbGxlZCB9IGZyb20gJ3VuY29udHJvbGxhYmxlJztcbmltcG9ydCB1c2VFdmVudENhbGxiYWNrIGZyb20gJ0ByZXN0YXJ0L2hvb2tzL3VzZUV2ZW50Q2FsbGJhY2snO1xuaW1wb3J0IHsgdXNlQm9vdHN0cmFwUHJlZml4IH0gZnJvbSAnLi9UaGVtZVByb3ZpZGVyJztcbmltcG9ydCBGYWRlIGZyb20gJy4vRmFkZSc7XG5pbXBvcnQgQ2xvc2VCdXR0b24gZnJvbSAnLi9DbG9zZUJ1dHRvbic7XG5pbXBvcnQgZGl2V2l0aENsYXNzTmFtZSBmcm9tICcuL2RpdldpdGhDbGFzc05hbWUnO1xuaW1wb3J0IGNyZWF0ZVdpdGhCc1ByZWZpeCBmcm9tICcuL2NyZWF0ZVdpdGhCc1ByZWZpeCc7XG5pbXBvcnQgU2FmZUFuY2hvciBmcm9tICcuL1NhZmVBbmNob3InO1xudmFyIERpdlN0eWxlZEFzSDQgPSBkaXZXaXRoQ2xhc3NOYW1lKCdoNCcpO1xuRGl2U3R5bGVkQXNINC5kaXNwbGF5TmFtZSA9ICdEaXZTdHlsZWRBc0g0JztcbnZhciBBbGVydEhlYWRpbmcgPSBjcmVhdGVXaXRoQnNQcmVmaXgoJ2FsZXJ0LWhlYWRpbmcnLCB7XG4gIENvbXBvbmVudDogRGl2U3R5bGVkQXNINFxufSk7XG52YXIgQWxlcnRMaW5rID0gY3JlYXRlV2l0aEJzUHJlZml4KCdhbGVydC1saW5rJywge1xuICBDb21wb25lbnQ6IFNhZmVBbmNob3Jcbn0pO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgc2hvdzogdHJ1ZSxcbiAgdHJhbnNpdGlvbjogRmFkZSxcbiAgY2xvc2VMYWJlbDogJ0Nsb3NlIGFsZXJ0J1xufTtcbnZhciBBbGVydCA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHVuY29udHJvbGxlZFByb3BzLCByZWYpIHtcbiAgdmFyIF91c2VVbmNvbnRyb2xsZWQgPSB1c2VVbmNvbnRyb2xsZWQodW5jb250cm9sbGVkUHJvcHMsIHtcbiAgICBzaG93OiAnb25DbG9zZSdcbiAgfSksXG4gICAgICBic1ByZWZpeCA9IF91c2VVbmNvbnRyb2xsZWQuYnNQcmVmaXgsXG4gICAgICBzaG93ID0gX3VzZVVuY29udHJvbGxlZC5zaG93LFxuICAgICAgY2xvc2VMYWJlbCA9IF91c2VVbmNvbnRyb2xsZWQuY2xvc2VMYWJlbCxcbiAgICAgIGNsYXNzTmFtZSA9IF91c2VVbmNvbnRyb2xsZWQuY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4gPSBfdXNlVW5jb250cm9sbGVkLmNoaWxkcmVuLFxuICAgICAgdmFyaWFudCA9IF91c2VVbmNvbnRyb2xsZWQudmFyaWFudCxcbiAgICAgIG9uQ2xvc2UgPSBfdXNlVW5jb250cm9sbGVkLm9uQ2xvc2UsXG4gICAgICBkaXNtaXNzaWJsZSA9IF91c2VVbmNvbnRyb2xsZWQuZGlzbWlzc2libGUsXG4gICAgICB0cmFuc2l0aW9uID0gX3VzZVVuY29udHJvbGxlZC50cmFuc2l0aW9uLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfdXNlVW5jb250cm9sbGVkLCBbXCJic1ByZWZpeFwiLCBcInNob3dcIiwgXCJjbG9zZUxhYmVsXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2hpbGRyZW5cIiwgXCJ2YXJpYW50XCIsIFwib25DbG9zZVwiLCBcImRpc21pc3NpYmxlXCIsIFwidHJhbnNpdGlvblwiXSk7XG5cbiAgdmFyIHByZWZpeCA9IHVzZUJvb3RzdHJhcFByZWZpeChic1ByZWZpeCwgJ2FsZXJ0Jyk7XG4gIHZhciBoYW5kbGVDbG9zZSA9IHVzZUV2ZW50Q2FsbGJhY2soZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAob25DbG9zZSkge1xuICAgICAgb25DbG9zZShmYWxzZSwgZSk7XG4gICAgfVxuICB9KTtcbiAgdmFyIFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uID09PSB0cnVlID8gRmFkZSA6IHRyYW5zaXRpb247XG4gIHZhciBhbGVydCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9leHRlbmRzKHtcbiAgICByb2xlOiBcImFsZXJ0XCJcbiAgfSwgVHJhbnNpdGlvbiA/IHByb3BzIDogdW5kZWZpbmVkLCB7XG4gICAgcmVmOiByZWYsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzTmFtZSwgcHJlZml4LCB2YXJpYW50ICYmIHByZWZpeCArIFwiLVwiICsgdmFyaWFudCwgZGlzbWlzc2libGUgJiYgcHJlZml4ICsgXCItZGlzbWlzc2libGVcIilcbiAgfSksIGRpc21pc3NpYmxlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENsb3NlQnV0dG9uLCB7XG4gICAgb25DbGljazogaGFuZGxlQ2xvc2UsXG4gICAgbGFiZWw6IGNsb3NlTGFiZWxcbiAgfSksIGNoaWxkcmVuKTtcbiAgaWYgKCFUcmFuc2l0aW9uKSByZXR1cm4gc2hvdyA/IGFsZXJ0IDogbnVsbDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zaXRpb24sIF9leHRlbmRzKHtcbiAgICB1bm1vdW50T25FeGl0OiB0cnVlXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiB1bmRlZmluZWQsXG4gICAgaW46IHNob3dcbiAgfSksIGFsZXJ0KTtcbn0pO1xuQWxlcnQuZGlzcGxheU5hbWUgPSAnQWxlcnQnO1xuQWxlcnQuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuQWxlcnQuTGluayA9IEFsZXJ0TGluaztcbkFsZXJ0LkhlYWRpbmcgPSBBbGVydEhlYWRpbmc7XG5leHBvcnQgZGVmYXVsdCBBbGVydDsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gIHJldHVybiBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwLCByZWYpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe30sIHAsIHtcbiAgICAgIHJlZjogcmVmLFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHAuY2xhc3NOYW1lLCBjbGFzc05hbWUpXG4gICAgfSkpO1xuICB9KTtcbn0pOyIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSBcInJlYWN0LWJvb3RzdHJhcFwiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuXG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcblxuaW1wb3J0IHsgU2FtcGxlLCBSZWNvcmRpbmcgfSBmcm9tIFwicGl0Y2gvcGl0Y2hcIjtcbmltcG9ydCB7IFBpdGNoIH0gZnJvbSBcInBpdGNoL25vdGVzXCI7XG5cbnR5cGUgU3VtbWFyeVByb3BzID0ge1xuICByZWNvcmRpbmc6IFJlY29yZGluZztcbiAgcmVmZXJlbmNlOiBQaXRjaDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBTdW1tYXJ5KHsgcmVjb3JkaW5nLCByZWZlcmVuY2UgfTogU3VtbWFyeVByb3BzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHJlY29yZGluZ1xuICAgIC5maWx0ZXIoKHM/OiBTYW1wbGUpID0+ICEhcylcbiAgICAubWFwKChzOiBTYW1wbGUpID0+IHMhLmZyZXF1ZW5jeSAtIHJlZmVyZW5jZS5mcmVxdWVuY3kpO1xuICBjb25zdCBzdW0gPSByZXN1bHQucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gIExPRy5pbmZvKFwiU3VtOiAlZlwiLCBzdW0pO1xuXG4gIHJldHVybiAoXG4gICAgPEFsZXJ0IHZhcmlhbnQ9e1wic3VjY2Vzc1wifT5cbiAgICAgIFJlY2VpdmVkIHtyZXN1bHQubGVuZ3RofSBzYW1wbGUocykgYXZlcmFnaW5nIHRvIHtzdW0gLyByZXN1bHQubGVuZ3RofSBmcm9tXG4gICAgICBDPHN1Yj40PC9zdWI+LlxuICAgIDwvQWxlcnQ+XG4gICk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcInJlYWN0LWJvb3RzdHJhcFwiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuXG5pbXBvcnQgeyBtbDVQaXRjaERldGVjdGlvbiwgUGl0Y2hHZW5lcmF0b3IsIFJlY29yZGluZyB9IGZyb20gXCJwaXRjaC9waXRjaFwiO1xuaW1wb3J0IHsgUGl0Y2gsIG5vdGUsIG5vdGVUb0ZyZXEgfSBmcm9tIFwicGl0Y2gvbm90ZXNcIjtcblxuaW1wb3J0IHsgUGl0Y2hSZWNvcmRlciB9IGZyb20gXCIuL1BpdGNoUmVjb3JkZXJcIjtcbmltcG9ydCB7IFN1bW1hcnkgfSBmcm9tIFwiLi9TdW1tYXJ5XCI7XG5cbmNvbnN0IExPRyA9IGdldExvZ2dlcigpO1xuY29uc3QgUGl0Y2hEZXRlY3Rpb24gPSAoKSA9PiB7XG4gIGNvbnN0IFtzdGFydGVkLCBzZXRJc1N0YXJ0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIEF1ZGlvIGludGVyZmFjZXNcbiAgY29uc3QgW2F1ZGlvQ29udGV4dCwgX10gPSB1c2VTdGF0ZShuZXcgQXVkaW9Db250ZXh0KCkpOyAvLyByZWFkLW9ubHlcbiAgY29uc3QgW3N0cmVhbSwgc2V0U3RyZWFtXSA9IHVzZVN0YXRlPE1lZGlhU3RyZWFtPigpO1xuICBjb25zdCBbcGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IsIHNldFBpdGNoRGV0ZWN0aW9uR2VuZXJhdG9yXSA9IHVzZVN0YXRlPFxuICAgIFBpdGNoR2VuZXJhdG9yXG4gID4oKTtcbiAgY29uc3QgW3JlY29yZGluZywgc2V0UmVjb3JkaW5nXSA9IHVzZVN0YXRlPFJlY29yZGluZz4oKTtcblxuICAvLyBTZXQgdXAgdGhlIG1pY3JvcGhvbmUuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzdGFydGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgTE9HLmluZm8oXCJBY3F1aXJpbmcgbWljcm9waG9uZS5cIik7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmdldFVzZXJNZWRpYSh7XG4gICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICB2aWRlbzogZmFsc2UsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKG5ld1N0cmVhbSkgPT4ge1xuICAgICAgICBMT0cuZGVidWcoXG4gICAgICAgICAgXCJNaWNyb3Bob25lIGluaXRpYWxpemVkIHdpdGggc3RyZWFtOiAlaiwgYWN0aXZlPywgJXMsIHN0YXRlOiAlcy5cIixcbiAgICAgICAgICBuZXdTdHJlYW0sXG4gICAgICAgICAgbmV3U3RyZWFtLmFjdGl2ZSxcbiAgICAgICAgICBuZXdTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5yZWFkeVN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIHNldFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfSk7XG4gIH0sIFtzdGFydGVkXSk7XG5cbiAgLy8gQ29uZmlndXJlIHRoZSBhdWRpbyBzdHJlYW0uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzdGFydGVkIHx8IHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgTE9HLmluZm8oXCJTZXR0aW5nIHVwIHRoZSBjb250ZXh0ICVqIGFuZCBzdHJlYW0gJWpcIiwgYXVkaW9Db250ZXh0LCBzdHJlYW0pO1xuICAgIGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuXG4gICAgTE9HLmluZm8oXCJJbml0aWFsaXplZCBhdWRpby5cIik7XG4gICAgc2V0UGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IobWw1UGl0Y2hEZXRlY3Rpb24oYXVkaW9Db250ZXh0LCBzdHJlYW0pKTtcbiAgICBhdWRpb0NvbnRleHQucmVzdW1lKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgTE9HLmluZm8oXCJDbGVhbnVwIHRoZSBhdWRpbyBzZXR0aW5nc1wiKTtcblxuICAgICAgTE9HLmRlYnVnKFwiU3RvcCBhbGwgdHJhY2tzIGluIHRoZSBzdHJlYW0gJWouXCIsIHN0cmVhbSk7XG4gICAgICBzdHJlYW0/LmdldFRyYWNrcygpLmZvckVhY2goKHQpID0+IHQuc3RvcCgpKTtcblxuICAgICAgTE9HLmRlYnVnKFwiU3VzcGVuZCBhdWRpbyBjb250ZXh0ICVqLlwiLCBhdWRpb0NvbnRleHQpO1xuICAgICAgYXVkaW9Db250ZXh0LnN1c3BlbmQoKTtcbiAgICB9O1xuICB9LCBbc3RyZWFtLCBzdGFydGVkXSk7XG5cbiAgaWYgKHJlY29yZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgcmVmZXJlbmNlUGl0Y2ggPSBub3RlKG5vdGVUb0ZyZXEoNjApKSBhcyBQaXRjaDtcblxuICAgIHJldHVybiA8U3VtbWFyeSByZWNvcmRpbmc9e3JlY29yZGluZ30gcmVmZXJlbmNlPXtyZWZlcmVuY2VQaXRjaH0gLz47XG4gIH0gZWxzZSBpZiAoc3RhcnRlZCAmJiBwaXRjaERldGVjdGlvbkdlbmVyYXRvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8UGl0Y2hSZWNvcmRlclxuICAgICAgICBvbkZpbmlzaD17KHJlc3VsdCkgPT4ge1xuICAgICAgICAgIExPRy5pbmZvKFwiUmVzdWx0LCAlalwiLCByZXN1bHQpO1xuICAgICAgICAgIHNldFJlY29yZGluZyhyZXN1bHQpO1xuICAgICAgICAgIHNldElzU3RhcnRlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHBpdGNoR2VuZXJhdG9yPXtwaXRjaERldGVjdGlvbkdlbmVyYXRvcn1cbiAgICAgICAgdGltZW91dE1zPXs1MDAwfVxuICAgICAgLz5cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICA8QnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzU3RhcnRlZCh0cnVlKX1cbiAgICAgICAgdmFyaWFudD1cIm91dGxpbmUtcHJpbWFyeVwiXG4gICAgICAgIHNpemU9XCJsZ1wiXG4gICAgICA+XG4gICAgICAgIFN0YXJ0XG4gICAgICA8L0J1dHRvbj5cbiAgICApO1xuICB9XG59O1xuXG5leHBvcnQgeyBQaXRjaERldGVjdGlvbiB9O1xuIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUJvb3RzdHJhcFByZWZpeCB9IGZyb20gJy4vVGhlbWVQcm92aWRlcic7XG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBmbHVpZDogZmFsc2Vcbn07XG52YXIgQ29udGFpbmVyID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBic1ByZWZpeCA9IF9yZWYuYnNQcmVmaXgsXG4gICAgICBmbHVpZCA9IF9yZWYuZmx1aWQsXG4gICAgICBfcmVmJGFzID0gX3JlZi5hcyxcbiAgICAgIENvbXBvbmVudCA9IF9yZWYkYXMgPT09IHZvaWQgMCA/ICdkaXYnIDogX3JlZiRhcyxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJic1ByZWZpeFwiLCBcImZsdWlkXCIsIFwiYXNcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHZhciBwcmVmaXggPSB1c2VCb290c3RyYXBQcmVmaXgoYnNQcmVmaXgsICdjb250YWluZXInKTtcbiAgdmFyIHN1ZmZpeCA9IHR5cGVvZiBmbHVpZCA9PT0gJ3N0cmluZycgPyBcIi1cIiArIGZsdWlkIDogJy1mbHVpZCc7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICByZWY6IHJlZlxuICB9LCBwcm9wcywge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjbGFzc05hbWUsIGZsdWlkID8gXCJcIiArIHByZWZpeCArIHN1ZmZpeCA6IHByZWZpeClcbiAgfSkpO1xufSk7XG5Db250YWluZXIuZGlzcGxheU5hbWUgPSAnQ29udGFpbmVyJztcbkNvbnRhaW5lci5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5leHBvcnQgZGVmYXVsdCBDb250YWluZXI7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUJvb3RzdHJhcFByZWZpeCB9IGZyb20gJy4vVGhlbWVQcm92aWRlcic7XG52YXIgREVWSUNFX1NJWkVTID0gWyd4bCcsICdsZycsICdtZCcsICdzbScsICd4cyddO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgbm9HdXR0ZXJzOiBmYWxzZVxufTtcbnZhciBSb3cgPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmLCByZWYpIHtcbiAgdmFyIGJzUHJlZml4ID0gX3JlZi5ic1ByZWZpeCxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgbm9HdXR0ZXJzID0gX3JlZi5ub0d1dHRlcnMsXG4gICAgICBfcmVmJGFzID0gX3JlZi5hcyxcbiAgICAgIENvbXBvbmVudCA9IF9yZWYkYXMgPT09IHZvaWQgMCA/ICdkaXYnIDogX3JlZiRhcyxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZiwgW1wiYnNQcmVmaXhcIiwgXCJjbGFzc05hbWVcIiwgXCJub0d1dHRlcnNcIiwgXCJhc1wiXSk7XG5cbiAgdmFyIGRlY29yYXRlZEJzUHJlZml4ID0gdXNlQm9vdHN0cmFwUHJlZml4KGJzUHJlZml4LCAncm93Jyk7XG4gIHZhciBzaXplUHJlZml4ID0gZGVjb3JhdGVkQnNQcmVmaXggKyBcIi1jb2xzXCI7XG4gIHZhciBjbGFzc2VzID0gW107XG4gIERFVklDRV9TSVpFUy5mb3JFYWNoKGZ1bmN0aW9uIChicmtQb2ludCkge1xuICAgIHZhciBwcm9wVmFsdWUgPSBwcm9wc1ticmtQb2ludF07XG4gICAgZGVsZXRlIHByb3BzW2Jya1BvaW50XTtcbiAgICB2YXIgY29scztcblxuICAgIGlmIChwcm9wVmFsdWUgIT0gbnVsbCAmJiB0eXBlb2YgcHJvcFZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgY29scyA9IHByb3BWYWx1ZS5jb2xzO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb2xzID0gcHJvcFZhbHVlO1xuICAgIH1cblxuICAgIHZhciBpbmZpeCA9IGJya1BvaW50ICE9PSAneHMnID8gXCItXCIgKyBicmtQb2ludCA6ICcnO1xuICAgIGlmIChjb2xzICE9IG51bGwpIGNsYXNzZXMucHVzaChcIlwiICsgc2l6ZVByZWZpeCArIGluZml4ICsgXCItXCIgKyBjb2xzKTtcbiAgfSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICByZWY6IHJlZlxuICB9LCBwcm9wcywge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcy5hcHBseSh2b2lkIDAsIFtjbGFzc05hbWUsIGRlY29yYXRlZEJzUHJlZml4LCBub0d1dHRlcnMgJiYgJ25vLWd1dHRlcnMnXS5jb25jYXQoY2xhc3NlcykpXG4gIH0pKTtcbn0pO1xuUm93LmRpc3BsYXlOYW1lID0gJ1Jvdyc7XG5Sb3cuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuZXhwb3J0IGRlZmF1bHQgUm93OyIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyB1c2VCb290c3RyYXBQcmVmaXggfSBmcm9tICcuL1RoZW1lUHJvdmlkZXInO1xudmFyIERFVklDRV9TSVpFUyA9IFsneGwnLCAnbGcnLCAnbWQnLCAnc20nLCAneHMnXTtcbnZhciBDb2wgPSBSZWFjdC5mb3J3YXJkUmVmKCAvLyBOZWVkIHRvIGRlZmluZSB0aGUgZGVmYXVsdCBcImFzXCIgZHVyaW5nIHByb3AgZGVzdHJ1Y3R1cmluZyB0byBiZSBjb21wYXRpYmxlIHdpdGggc3R5bGVkLWNvbXBvbmVudHMgZ2l0aHViLmNvbS9yZWFjdC1ib290c3RyYXAvcmVhY3QtYm9vdHN0cmFwL2lzc3Vlcy8zNTk1XG5mdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBic1ByZWZpeCA9IF9yZWYuYnNQcmVmaXgsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIF9yZWYkYXMgPSBfcmVmLmFzLFxuICAgICAgQ29tcG9uZW50ID0gX3JlZiRhcyA9PT0gdm9pZCAwID8gJ2RpdicgOiBfcmVmJGFzLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJic1ByZWZpeFwiLCBcImNsYXNzTmFtZVwiLCBcImFzXCJdKTtcblxuICB2YXIgcHJlZml4ID0gdXNlQm9vdHN0cmFwUHJlZml4KGJzUHJlZml4LCAnY29sJyk7XG4gIHZhciBzcGFucyA9IFtdO1xuICB2YXIgY2xhc3NlcyA9IFtdO1xuICBERVZJQ0VfU0laRVMuZm9yRWFjaChmdW5jdGlvbiAoYnJrUG9pbnQpIHtcbiAgICB2YXIgcHJvcFZhbHVlID0gcHJvcHNbYnJrUG9pbnRdO1xuICAgIGRlbGV0ZSBwcm9wc1ticmtQb2ludF07XG4gICAgdmFyIHNwYW47XG4gICAgdmFyIG9mZnNldDtcbiAgICB2YXIgb3JkZXI7XG5cbiAgICBpZiAodHlwZW9mIHByb3BWYWx1ZSA9PT0gJ29iamVjdCcgJiYgcHJvcFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHZhciBfcHJvcFZhbHVlJHNwYW4gPSBwcm9wVmFsdWUuc3BhbjtcbiAgICAgIHNwYW4gPSBfcHJvcFZhbHVlJHNwYW4gPT09IHZvaWQgMCA/IHRydWUgOiBfcHJvcFZhbHVlJHNwYW47XG4gICAgICBvZmZzZXQgPSBwcm9wVmFsdWUub2Zmc2V0O1xuICAgICAgb3JkZXIgPSBwcm9wVmFsdWUub3JkZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNwYW4gPSBwcm9wVmFsdWU7XG4gICAgfVxuXG4gICAgdmFyIGluZml4ID0gYnJrUG9pbnQgIT09ICd4cycgPyBcIi1cIiArIGJya1BvaW50IDogJyc7XG4gICAgaWYgKHNwYW4pIHNwYW5zLnB1c2goc3BhbiA9PT0gdHJ1ZSA/IFwiXCIgKyBwcmVmaXggKyBpbmZpeCA6IFwiXCIgKyBwcmVmaXggKyBpbmZpeCArIFwiLVwiICsgc3Bhbik7XG4gICAgaWYgKG9yZGVyICE9IG51bGwpIGNsYXNzZXMucHVzaChcIm9yZGVyXCIgKyBpbmZpeCArIFwiLVwiICsgb3JkZXIpO1xuICAgIGlmIChvZmZzZXQgIT0gbnVsbCkgY2xhc3Nlcy5wdXNoKFwib2Zmc2V0XCIgKyBpbmZpeCArIFwiLVwiICsgb2Zmc2V0KTtcbiAgfSk7XG5cbiAgaWYgKCFzcGFucy5sZW5ndGgpIHtcbiAgICBzcGFucy5wdXNoKHByZWZpeCk7IC8vIHBsYWluICdjb2wnXG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7fSwgcHJvcHMsIHtcbiAgICByZWY6IHJlZixcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMuYXBwbHkodm9pZCAwLCBbY2xhc3NOYW1lXS5jb25jYXQoc3BhbnMsIGNsYXNzZXMpKVxuICB9KSk7XG59KTtcbkNvbC5kaXNwbGF5TmFtZSA9ICdDb2wnO1xuZXhwb3J0IGRlZmF1bHQgQ29sOyIsImZ1bmN0aW9uIHRvVmFsKG1peCkge1xuXHR2YXIgaywgeSwgc3RyPScnO1xuXG5cdGlmICh0eXBlb2YgbWl4ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbWl4ID09PSAnbnVtYmVyJykge1xuXHRcdHN0ciArPSBtaXg7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1peCA9PT0gJ29iamVjdCcpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShtaXgpKSB7XG5cdFx0XHRmb3IgKGs9MDsgayA8IG1peC5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRpZiAobWl4W2tdKSB7XG5cdFx0XHRcdFx0aWYgKHkgPSB0b1ZhbChtaXhba10pKSB7XG5cdFx0XHRcdFx0XHRzdHIgJiYgKHN0ciArPSAnICcpO1xuXHRcdFx0XHRcdFx0c3RyICs9IHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoayBpbiBtaXgpIHtcblx0XHRcdFx0aWYgKG1peFtrXSkge1xuXHRcdFx0XHRcdHN0ciAmJiAoc3RyICs9ICcgJyk7XG5cdFx0XHRcdFx0c3RyICs9IGs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG5cdHZhciBpPTAsIHRtcCwgeCwgc3RyPScnO1xuXHR3aGlsZSAoaSA8IGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRpZiAodG1wID0gYXJndW1lbnRzW2krK10pIHtcblx0XHRcdGlmICh4ID0gdG9WYWwodG1wKSkge1xuXHRcdFx0XHRzdHIgJiYgKHN0ciArPSAnICcpO1xuXHRcdFx0XHRzdHIgKz0geFxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gc3RyO1xufVxuIiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFwiLi9BcHAuY3NzXCI7XG5cbmltcG9ydCB7IFBpdGNoRGV0ZWN0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9QaXRjaERldGVjdGlvblwiO1xuaW1wb3J0IHsgQ29udGFpbmVyLCBSb3csIENvbCB9IGZyb20gXCJyZWFjdC1ib290c3RyYXBcIjtcblxuaW1wb3J0IGNsc3ggZnJvbSBcImNsc3hcIjtcblxuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuY29uc3QgTE9HID0gZ2V0TG9nZ2VyKCk7XG5cbmV4cG9ydCBjb25zdCBBcHAgPSAoKSA9PiB7XG4gIExPRy5pbmZvKFwiU3RhcnRpbmcgYXBwLlwiKTtcbiAgcmV0dXJuIChcbiAgICA8Q29udGFpbmVyPlxuICAgICAgPFJvdyBhcz1cImhlYWRlclwiIGNsYXNzTmFtZT1cInRleHQtY2VudGVyXCI+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9e2Nsc3goXCJkaXNwbGF5LTFcIiwgXCJtdC01XCIsIFwidGl0bGVcIil9PnZvY2FsbHk8L2gxPlxuICAgICAgICA8aDI+XG4gICAgICAgICAgc2luZyBDPHN1Yj40PC9zdWI+XG4gICAgICAgIDwvaDI+XG4gICAgICA8L1Jvdz5cblxuICAgICAgPFJvdyBhcz1cInNlY3Rpb25cIiBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICA8Q29sPlxuICAgICAgICAgIDxQaXRjaERldGVjdGlvbiAvPlxuICAgICAgICA8L0NvbD5cbiAgICAgIDwvUm93PlxuXG4gICAgICA8Um93IGFzPVwiZm9vdGVyXCI+PC9Sb3c+XG4gICAgPC9Db250YWluZXI+XG4gICk7XG59O1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9BcHBcIjtcblxuUmVhY3RET00ucmVuZGVyKDxBcHA+PC9BcHA+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7XG4iXSwic291cmNlUm9vdCI6IiJ9