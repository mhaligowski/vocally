!function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=20)}([function(e,t){e.exports=React},function(e,t,n){"use strict";function r(){return(r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}n.d(t,"a",(function(){return r}))},function(e,t,n){var r;
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)&&r.length){var o=a.apply(null,r);o&&e.push(o)}else if("object"===i)for(var s in r)n.call(r,s)&&r[s]&&e.push(s)}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},function(e,t){e.exports=ReactDOM},function(e,t,n){"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";t.a=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t){e.exports=PropTypes},,function(e,t,n){"use strict";e.exports=function(e,t,n,r,a,i,o,s){if(!e){var c;if(void 0===t)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,a,i,o,s],l=0;(c=new Error(t.replace(/%s/g,(function(){return u[l++]})))).name="Invariant Violation"}throw c.framesToPop=1,c}}},function(e,t,n){"use strict";var r=n(6),a=!1,i=!1;try{var o={get passive(){return a=!0},get once(){return i=a=!0}};r.a&&(window.addEventListener("test",o,o),window.removeEventListener("test",o,!0))}catch(e){}var s=function(e,t,n,r){if(r&&"boolean"!=typeof r&&!i){var o=r.once,s=r.capture,c=n;!i&&o&&(c=n.__once||function e(r){this.removeEventListener(t,e,s),n.call(this,r)},n.__once=c),e.addEventListener(t,c,a?r:s)}e.addEventListener(t,n,r)};var c=function(e,t,n,r){var a=r&&"boolean"!=typeof r?r.capture:r;e.removeEventListener(t,n,a),n.__once&&e.removeEventListener(t,n.__once,a)};t.a=function(e,t,n,r){return s(e,t,n,r),function(){c(e,t,n,r)}}},function(e,t){e.exports=reactLifecyclesCompat},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(12);function a(e,t){return function(e){var t=Object(r.a)(e);return t&&t.defaultView||window}(e).getComputedStyle(e,t)}var i=/([A-Z])/g;var o=/^ms-/;function s(e){return function(e){return e.replace(i,"-$1").toLowerCase()}(e).replace(o,"-ms-")}var c=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;t.a=function(e,t){var n="",r="";if("string"==typeof t)return e.style.getPropertyValue(s(t))||a(e).getPropertyValue(s(t));Object.keys(t).forEach((function(a){var i=t[a];i||0===i?!function(e){return!(!e||!c.test(e))}(a)?n+=s(a)+": "+i+";":r+=a+"("+i+") ":e.style.removeProperty(s(a))})),r&&(n+="transform: "+r+";"),e.style.cssText+=";"+n}},function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(1),a=n(2),i=n(0);n(9);function o(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function c(e,t){return Object.keys(t).reduce((function(n,c){var u,l=n,f=l[o(c)],d=l[c],p=Object(a.a)(l,[o(c),c].map(s)),m=t[c],v=function(e,t,n){var r=Object(i.useRef)(void 0!==e),a=Object(i.useState)(t),o=a[0],s=a[1],c=void 0!==e,u=r.current;return r.current=c,!c&&u&&o!==t&&s(t),[c?e:o,Object(i.useCallback)((function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];n&&n.apply(void 0,[e].concat(r)),s(e)}),[n])]}(d,f,e[m]),h=v[0],b=v[1];return Object(r.a)({},p,((u={})[c]=h,u[m]=b,u))}),e)}n(5),n(11)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);var a=function(e){var t=Object(r.useRef)(e);return Object(r.useEffect)((function(){t.current=e}),[e]),t};function i(e){var t=a(e);return Object(r.useCallback)((function(){return t.current&&t.current.apply(t,arguments)}),[t])}},function(e,t,n){var r=n(17),a=n(18);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1};r(a,i);e.exports=a.locals||{}},function(e,t,n){"use strict";var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var e={};return function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}e[t]=n}return e[t]}}(),o=[];function s(e){for(var t=-1,n=0;n<o.length;n++)if(o[n].identifier===e){t=n;break}return t}function c(e,t){for(var n={},r=[],a=0;a<e.length;a++){var i=e[a],c=t.base?i[0]+t.base:i[0],u=n[c]||0,l="".concat(c," ").concat(u);n[c]=u+1;var f=s(l),d={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(o[f].references++,o[f].updater(d)):o.push({identifier:l,updater:h(d,t),references:1}),r.push(l)}return r}function u(e){var t=document.createElement("style"),r=e.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(e){t.setAttribute(e,r[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var l,f=(l=[],function(e,t){return l[e]=t,l.filter(Boolean).join("\n")});function d(e,t,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function p(e,t,n){var r=n.css,a=n.media,i=n.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}var m=null,v=0;function h(e,t){var n,r,a;if(t.singleton){var i=v++;n=m||(m=u(t)),r=d.bind(null,n,i,!1),a=d.bind(null,n,i,!0)}else n=u(t),r=p.bind(null,n,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)};return r(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;r(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var n=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var r=0;r<n.length;r++){var a=s(n[r]);o[a].references--}for(var i=c(e,t),u=0;u<n.length;u++){var l=s(n[u]);0===o[l].references&&(o[l].updater(),o.splice(l,1))}n=i}}}},function(e,t,n){},function(e,t){e.exports=ml5},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),i=n(4),o=n.n(i),s=(n(16),n(1)),c=n(2),u=n(3),l=n.n(u),f=a.a.createContext({});f.Consumer,f.Provider;function d(e,t){var n=Object(r.useContext)(f);return e||n[t]||t}var p=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return null!=e})).reduce((function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];e.apply(this,r),t.apply(this,r)}}),null)};function m(e){return!e||"#"===e.trim()}var v=a.a.forwardRef((function(e,t){var n=e.as,r=void 0===n?"a":n,i=e.disabled,o=e.onKeyDown,u=Object(c.a)(e,["as","disabled","onKeyDown"]),l=function(e){var t=u.href,n=u.onClick;(i||m(t))&&e.preventDefault(),i?e.stopPropagation():n&&n(e)};return m(u.href)&&(u.role=u.role||"button",u.href=u.href||"#"),i&&(u.tabIndex=-1,u["aria-disabled"]=!0),a.a.createElement(r,Object(s.a)({ref:t},u,{onClick:l,onKeyDown:p((function(e){" "===e.key&&(e.preventDefault(),l(e))}),o)}))}));v.displayName="SafeAnchor";var h=v,b=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.size,o=e.active,u=e.className,f=e.block,p=e.type,m=e.as,v=Object(c.a)(e,["bsPrefix","variant","size","active","className","block","type","as"]),b=d(n,"btn"),y=l()(u,b,o&&"active",b+"-"+r,f&&b+"-block",i&&b+"-"+i);if(v.href)return a.a.createElement(h,Object(s.a)({},v,{as:m,ref:t,className:l()(y,v.disabled&&"disabled")}));t&&(v.ref=t),p?v.type=p:m||(v.type="button");var E=m||"button";return a.a.createElement(E,Object(s.a)({},v,{className:y}))}));b.displayName="Button",b.defaultProps={variant:"primary",active:!1,disabled:!1};var y=b;const E=()=>console;n(19);const g=["A","B♭","B","C","C♯","D","D♯","E","F","F♯","G","G♯"],x=e=>440*Math.pow(2,(e-69)/12),O=e=>69+12*Math.log2(e/440);class j{constructor(e){this._freq=e,this.note=Math.round(O(e)),this.frequency=x(this.note),this.name=(e=>g[(e-21)%12])(this.note),this.octave=(e=>Math.floor(e/12-1))(this.note)}}const w=e=>{if(null==e)return;const t=new j(e);return{frequency:e,target:t,note:O(e),diff:(n=t.frequency,r=e,1200*Math.log2(r/n))};var n,r};var C=function(e){return this instanceof C?(this.v=e,this):new C(e)},S=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,a=n.apply(e,t||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(e){a[e]&&(r[e]=function(t){return new Promise((function(n,r){i.push([e,t,n,r])>1||s(e,t)}))})}function s(e,t){try{(n=a[e](t)).value instanceof C?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(e){l(i[0][3],e)}var n}function c(e){s("next",e)}function u(e){s("throw",e)}function l(e,t){e(t),i.shift(),i.length&&s(i[0][0],i[0][1])}};const N=E(),k="https://cdn.jsdelivr.net/gh/ml5js/ml5-data-and-models/models/pitch-detection/crepe/";function T(e){const[t,n]=Object(r.useState)(!1),[a,i]=Object(r.useState)();return Object(r.useEffect)(()=>{let r=!0;return e.generator.next().then(e=>{!e.done&&r&&(i(e.value),n(!t))}),()=>{r=!1}},[t]),Object(r.useEffect)(()=>{e.onTick&&a&&e.onTick(a)},[a]),"function"==typeof e.children?e.children(a):e.children}var P=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.variant,i=e.animation,o=e.size,u=e.children,f=e.as,p=void 0===f?"div":f,m=e.className,v=Object(c.a)(e,["bsPrefix","variant","animation","size","children","as","className"]),h=(n=d(n,"spinner"))+"-"+i;return a.a.createElement(p,Object(s.a)({ref:t},v,{className:l()(m,h,o&&h+"-"+o,r&&"text-"+r)}),u)}));P.displayName="Spinner";var M=P;const R=E();function D({pitchGenerator:e,timeoutMs:t,onFinish:n}){const[i,o]=Object(r.useState)([]),[s,c]=Object(r.useState)(!1),[u,l]=Object(r.useState)(!1);Object(r.useEffect)(()=>{if(!s)return;R.info("Setting up the timeout.");const e=setTimeout(()=>{l(!0),c(!1)},t);return R.info("Set up timer %d for %d ms.",e,t),()=>{R.info("Clearing out the timeout %d.",e),clearTimeout(e)}},[s]),Object(r.useEffect)(()=>{u&&(R.info("Finishing recording."),n(i))},[u,i]);const f=s?a.a.createElement(M,{animation:"grow",variant:"danger"}):a.a.createElement("span",null,"sing now!");return e?a.a.createElement(T,{generator:e,onTick:e=>{const t=i.concat([e]);o(t),s||c(!0)}},a.a.createElement("h3",null,f)):a.a.createElement(M,{animation:"border",variant:"primary"})}var L=n(14),A=n(15),_=n(6),I=n(13),F=n(10);_.a&&window;function U(e,t,n){void 0===n&&(n=5);var r=!1,a=setTimeout((function(){r||function(e){var t=document.createEvent("HTMLEvents");t.initEvent("transitionend",!0,!0),e.dispatchEvent(t)}(e)}),t+n),i=Object(F.a)(e,"transitionend",(function(){r=!0}),{once:!0});return function(){clearTimeout(a),i()}}var q=function(e,t,n){var r,a,i;null==n&&(r=e,a=Object(I.a)(r,"transitionDuration")||"",i=-1===a.indexOf("ms")?1e3:1,n=parseFloat(a)*i||0);var o=U(e,n),s=Object(F.a)(e,"transitionend",t);return function(){o(),s()}},z=n(5),B=n(7),G=n.n(B),H=!1,V=a.a.createContext(null),X=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var a,i=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(a="exited",r.appearStatus="entering"):a="entered":a=t.unmountOnExit||t.mountOnEnter?"unmounted":"exited",r.state={status:a},r.nextCallback=null,r}Object(z.a)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&"unmounted"===t.status?{status:"exited"}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?"entering"!==n&&"entered"!==n&&(t="entering"):"entering"!==n&&"entered"!==n||(t="exiting")}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),"entering"===t?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&"exited"===this.state.status&&this.setState({status:"unmounted"})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,a=this.props.nodeRef?[r]:[o.a.findDOMNode(this),r],i=a[0],s=a[1],c=this.getTimeouts(),u=r?c.appear:c.enter;!e&&!n||H?this.safeSetState({status:"entered"},(function(){t.props.onEntered(i)})):(this.props.onEnter(i,s),this.safeSetState({status:"entering"},(function(){t.props.onEntering(i,s),t.onTransitionEnd(u,(function(){t.safeSetState({status:"entered"},(function(){t.props.onEntered(i,s)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:o.a.findDOMNode(this);t&&!H?(this.props.onExit(r),this.safeSetState({status:"exiting"},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:"exited"},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:o.a.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var a=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],i=a[0],s=a[1];this.props.addEndListener(i,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if("unmounted"===e)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,Object(c.a)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.a.createElement(V.Provider,{value:null},"function"==typeof n?n(e,r):a.a.cloneElement(a.a.Children.only(n),r))},t}(a.a.Component);function K(){}X.contextType=V,X.propTypes={},X.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:K,onEntering:K,onEntered:K,onExit:K,onExiting:K,onExited:K},X.UNMOUNTED="unmounted",X.EXITED="exited",X.ENTERING="entering",X.ENTERED="entered",X.EXITING="exiting";var Y,Z=X;var $=((Y={}).entering="show",Y.entered="show",Y),J=a.a.forwardRef((function(e,t){var n=e.className,i=e.children,o=Object(c.a)(e,["className","children"]),u=Object(r.useCallback)((function(e){!function(e){e.offsetHeight}(e),o.onEnter&&o.onEnter(e)}),[o]);return a.a.createElement(Z,Object(s.a)({ref:t,addEndListener:q},o,{onEnter:u}),(function(e,t){return a.a.cloneElement(i,Object(s.a)({},t,{className:l()("fade",n,i.props.className,$[e])}))}))}));J.defaultProps={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},J.displayName="Fade";var W=J,Q={label:G.a.string.isRequired,onClick:G.a.func},ee=a.a.forwardRef((function(e,t){var n=e.label,r=e.onClick,i=e.className,o=Object(c.a)(e,["label","onClick","className"]);return a.a.createElement("button",Object(s.a)({ref:t,type:"button",className:l()("close",i),onClick:r},o),a.a.createElement("span",{"aria-hidden":"true"},"×"),a.a.createElement("span",{className:"sr-only"},n))}));ee.displayName="CloseButton",ee.propTypes=Q,ee.defaultProps={label:"Close"};var te=ee,ne=/-(.)/g;var re=function(e){return e[0].toUpperCase()+(t=e,t.replace(ne,(function(e,t){return t.toUpperCase()}))).slice(1);var t};function ae(e,t){var n=void 0===t?{}:t,r=n.displayName,i=void 0===r?re(e):r,o=n.Component,u=n.defaultProps,f=a.a.forwardRef((function(t,n){var r=t.className,i=t.bsPrefix,u=t.as,f=void 0===u?o||"div":u,p=Object(c.a)(t,["className","bsPrefix","as"]),m=d(i,e);return a.a.createElement(f,Object(s.a)({ref:n,className:l()(r,m)},p))}));return f.defaultProps=u,f.displayName=i,f}var ie,oe=(ie="h4",a.a.forwardRef((function(e,t){return a.a.createElement("div",Object(s.a)({},e,{ref:t,className:l()(e.className,ie)}))})));oe.displayName="DivStyledAsH4";var se=ae("alert-heading",{Component:oe}),ce=ae("alert-link",{Component:h}),ue={show:!0,transition:W,closeLabel:"Close alert"},le=a.a.forwardRef((function(e,t){var n=Object(L.a)(e,{show:"onClose"}),r=n.bsPrefix,i=n.show,o=n.closeLabel,u=n.className,f=n.children,p=n.variant,m=n.onClose,v=n.dismissible,h=n.transition,b=Object(c.a)(n,["bsPrefix","show","closeLabel","className","children","variant","onClose","dismissible","transition"]),y=d(r,"alert"),E=Object(A.a)((function(e){m&&m(!1,e)})),g=!0===h?W:h,x=a.a.createElement("div",Object(s.a)({role:"alert"},g?b:void 0,{ref:t,className:l()(u,y,p&&y+"-"+p,v&&y+"-dismissible")}),v&&a.a.createElement(te,{onClick:E,label:o}),f);return g?a.a.createElement(g,Object(s.a)({unmountOnExit:!0},b,{ref:void 0,in:i}),x):i?x:null}));le.displayName="Alert",le.defaultProps=ue,le.Link=ce,le.Heading=se;var fe=le;const de=E();function pe({recording:e,reference:t}){const n=e.filter(e=>!!e).map(e=>e.frequency-t.frequency),r=n.reduce((e,t)=>e+t,0);return de.info("Sum: %f",r),a.a.createElement(fe,{variant:"success"},"Received ",n.length," sample(s) averaging to ",r/n.length," from C",a.a.createElement("sub",null,"4"),".")}const me=E(),ve=()=>{const[e,t]=Object(r.useState)(!1),[n,i]=Object(r.useState)(new AudioContext),[o,s]=Object(r.useState)(),[c,u]=Object(r.useState)(),[l,f]=Object(r.useState)();if(Object(r.useEffect)(()=>{e&&(me.info("Acquiring microphone."),navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(e=>{me.debug("Microphone initialized with stream: %j, active?, %s, state: %s.",e,e.active,e.getAudioTracks()[0].readyState),s(e)}))},[e]),Object(r.useEffect)(()=>{if(e&&void 0!==o)return me.info("Setting up the context %j and stream %j",n,o),n.createMediaStreamSource(o),me.info("Initialized audio."),u(function(e,t){return S(this,arguments,(function*(){const n=ml5.pitchDetection(k,e,t);for(N.info("Created pitch detection.",n),yield C(n.ready),N.info("Initialized the model.");t.active&&"running"===e.state;){const e=yield C(n.getPitch());null!==e?yield yield C(w(e)):N.debug("Skipping")}return yield C(void 0)}))}(n,o)),n.resume(),()=>{me.info("Cleanup the audio settings"),me.debug("Stop all tracks in the stream %j.",o),null==o||o.getTracks().forEach(e=>e.stop()),me.debug("Suspend audio context %j.",n),n.suspend()}},[o,e]),void 0!==l){const e=w(x(60));return a.a.createElement(pe,{recording:l,reference:e})}return e&&c?a.a.createElement(D,{onFinish:e=>{me.info("Result, %j",e),f(e),t(!1)},pitchGenerator:c,timeoutMs:5e3}):a.a.createElement(y,{onClick:()=>t(!0),variant:"outline-primary",size:"lg"},"I'm ready")};function he(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=he(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var be=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=he(e))&&(r&&(r+=" "),r+=t);return r},ye=a.a.forwardRef((function(e,t){var n=e.bsPrefix,r=e.fluid,i=e.as,o=void 0===i?"div":i,u=e.className,f=Object(c.a)(e,["bsPrefix","fluid","as","className"]),p=d(n,"container"),m="string"==typeof r?"-"+r:"-fluid";return a.a.createElement(o,Object(s.a)({ref:t},f,{className:l()(u,r?""+p+m:p)}))}));ye.displayName="Container",ye.defaultProps={fluid:!1};var Ee=ye;const ge=E();i.render(r.createElement(()=>(ge.info("Starting app."),a.a.createElement(Ee,null,a.a.createElement("header",{className:be("text-center","mt-5")},a.a.createElement("h1",{className:be("display-1","title")},"vocally"),a.a.createElement("h2",null,"sing C",a.a.createElement("sub",null,"4"),"!")),a.a.createElement("main",{className:be("text-center","py-5"),role:"main"},a.a.createElement(ve,null)),a.a.createElement("footer",{className:be("py-3","border-top","text-muted")},a.a.createElement(Ee,null,a.a.createElement("p",null,"vocally.app 2020"))))),null),document.getElementById("app"))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vL2V4dGVybmFsIFwiUmVhY3RcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kcy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xhc3NuYW1lcy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJSZWFjdERPTVwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0c0xvb3NlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vY2FuVXNlRE9NLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcIlByb3BUeXBlc1wiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9pbnZhcmlhbnQvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2FkZEV2ZW50TGlzdGVuZXIuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9yZW1vdmVFdmVudExpc3RlbmVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vbGlzdGVuLmpzIiwid2VicGFjazovLy9leHRlcm5hbCBcInJlYWN0TGlmZWN5Y2xlc0NvbXBhdFwiIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vb3duZXJEb2N1bWVudC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2dldENvbXB1dGVkU3R5bGUuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9vd25lcldpbmRvdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2h5cGhlbmF0ZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2h5cGhlbmF0ZVN0eWxlLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9kb20taGVscGVycy9lc20vaXNUcmFuc2Zvcm0uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS9jc3MuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VuY29udHJvbGxhYmxlL2VzbS91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvdW5jb250cm9sbGFibGUvZXNtL2hvb2suanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0ByZXN0YXJ0L2hvb2tzL2VzbS91c2VDb21taXR0ZWRSZWYuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL0ByZXN0YXJ0L2hvb2tzL2VzbS91c2VFdmVudENhbGxiYWNrLmpzIiwid2VicGFjazovLy8uL3NyYy9BcHAuY3NzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qcyIsIndlYnBhY2s6Ly8vZXh0ZXJuYWwgXCJtbDVcIiIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9UaGVtZVByb3ZpZGVyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL2NyZWF0ZUNoYWluZWRGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9TYWZlQW5jaG9yLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL0J1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9nLnRlc3RpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3BpdGNoL25vdGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9waXRjaC9waXRjaC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9HZW5lcmF0b3JDb21wb25lbnQudHN4Iiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL1NwaW5uZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvUGl0Y2hSZWNvcmRlci50c3giLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2RvbS1oZWxwZXJzL2VzbS90cmFuc2l0aW9uRW5kLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC10cmFuc2l0aW9uLWdyb3VwL2VzbS9jb25maWcuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvZXNtL1RyYW5zaXRpb25Hcm91cENvbnRleHQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvZXNtL1RyYW5zaXRpb24uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3JlYWN0LWJvb3RzdHJhcC9lc20vRmFkZS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS90cmlnZ2VyQnJvd3NlclJlZmxvdy5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9DbG9zZUJ1dHRvbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvZG9tLWhlbHBlcnMvZXNtL2NhbWVsaXplLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9yZWFjdC1ib290c3RyYXAvZXNtL2NyZWF0ZVdpdGhCc1ByZWZpeC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9BbGVydC5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9kaXZXaXRoQ2xhc3NOYW1lLmpzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1N1bW1hcnkudHN4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL1BpdGNoRGV0ZWN0aW9uLnRzeCIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvY2xzeC9kaXN0L2Nsc3gubS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcmVhY3QtYm9vdHN0cmFwL2VzbS9Db250YWluZXIuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL0FwcC50c3giLCJ3ZWJwYWNrOi8vLy4vc3JjL2luZGV4LnRzeCJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlJlYWN0IiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJ0YXJnZXQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzb3VyY2UiLCJhcHBseSIsInRoaXMiLCJfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSIsImV4Y2x1ZGVkIiwic291cmNlS2V5cyIsImtleXMiLCJpbmRleE9mIiwiaGFzT3duIiwiY2xhc3NOYW1lcyIsImNsYXNzZXMiLCJhcmciLCJhcmdUeXBlIiwicHVzaCIsIkFycmF5IiwiaXNBcnJheSIsImlubmVyIiwiam9pbiIsImRlZmF1bHQiLCJSZWFjdERPTSIsIl9pbmhlcml0c0xvb3NlIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY29uc3RydWN0b3IiLCJfX3Byb3RvX18iLCJQcm9wVHlwZXMiLCJjb25kaXRpb24iLCJmb3JtYXQiLCJhIiwiYiIsImUiLCJmIiwiZXJyb3IiLCJ1bmRlZmluZWQiLCJFcnJvciIsImFyZ3MiLCJhcmdJbmRleCIsInJlcGxhY2UiLCJmcmFtZXNUb1BvcCIsIm9wdGlvbnNTdXBwb3J0ZWQiLCJvbmNlU3VwcG9ydGVkIiwiY2FuVXNlRE9NIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJub2RlIiwiZXZlbnROYW1lIiwiaGFuZGxlciIsIm9wdGlvbnMiLCJvbmNlIiwiY2FwdHVyZSIsIndyYXBwZWRIYW5kbGVyIiwiX19vbmNlIiwib25jZUhhbmRsZXIiLCJldmVudCIsInJlYWN0TGlmZWN5Y2xlc0NvbXBhdCIsIm93bmVyRG9jdW1lbnQiLCJkb2N1bWVudCIsImdldENvbXB1dGVkU3R5bGUiLCJwc3VlZG9FbGVtZW50IiwiZG9jIiwiZGVmYXVsdFZpZXciLCJvd25lcldpbmRvdyIsInJVcHBlciIsIm1zUGF0dGVybiIsImh5cGhlbmF0ZVN0eWxlTmFtZSIsInN0cmluZyIsInRvTG93ZXJDYXNlIiwiaHlwaGVuYXRlIiwic3VwcG9ydGVkVHJhbnNmb3JtcyIsImNzcyIsInRyYW5zZm9ybXMiLCJzdHlsZSIsImdldFByb3BlcnR5VmFsdWUiLCJmb3JFYWNoIiwidGVzdCIsImlzVHJhbnNmb3JtIiwicmVtb3ZlUHJvcGVydHkiLCJjc3NUZXh0IiwiZGVmYXVsdEtleSIsImNoYXJBdCIsInRvVXBwZXJDYXNlIiwic3Vic3RyIiwiX3RvUHJvcGVydHlLZXkiLCJpbnB1dCIsImhpbnQiLCJwcmltIiwidG9QcmltaXRpdmUiLCJyZXMiLCJUeXBlRXJyb3IiLCJTdHJpbmciLCJOdW1iZXIiLCJfdG9QcmltaXRpdmUiLCJ1c2VVbmNvbnRyb2xsZWQiLCJwcm9wcyIsImNvbmZpZyIsInJlZHVjZSIsInJlc3VsdCIsImZpZWxkTmFtZSIsIl9leHRlbmRzMiIsIl9yZWYiLCJkZWZhdWx0VmFsdWUiLCJwcm9wc1ZhbHVlIiwicmVzdCIsIm1hcCIsImhhbmRsZXJOYW1lIiwiX3VzZVVuY29udHJvbGxlZFByb3AiLCJwcm9wVmFsdWUiLCJ3YXNQcm9wUmVmIiwiX3VzZVN0YXRlIiwic3RhdGVWYWx1ZSIsInNldFN0YXRlIiwiaXNQcm9wIiwid2FzUHJvcCIsImN1cnJlbnQiLCJfbGVuIiwiX2tleSIsImNvbmNhdCIsInVzZVVuY29udHJvbGxlZFByb3AiLCJyZWYiLCJ1c2VFdmVudENhbGxiYWNrIiwiZm4iLCJhcGkiLCJjb250ZW50IiwibG9jYWxzIiwibWVtbyIsImlzT2xkSUUiLCJCb29sZWFuIiwiYWxsIiwiYXRvYiIsImdldFRhcmdldCIsInN0eWxlVGFyZ2V0IiwicXVlcnlTZWxlY3RvciIsIkhUTUxJRnJhbWVFbGVtZW50IiwiY29udGVudERvY3VtZW50IiwiaGVhZCIsInN0eWxlc0luRG9tIiwiZ2V0SW5kZXhCeUlkZW50aWZpZXIiLCJpZGVudGlmaWVyIiwibW9kdWxlc1RvRG9tIiwibGlzdCIsImlkQ291bnRNYXAiLCJpZGVudGlmaWVycyIsIml0ZW0iLCJpZCIsImJhc2UiLCJjb3VudCIsImluZGV4Iiwib2JqIiwibWVkaWEiLCJzb3VyY2VNYXAiLCJyZWZlcmVuY2VzIiwidXBkYXRlciIsImFkZFN0eWxlIiwiaW5zZXJ0U3R5bGVFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImF0dHJpYnV0ZXMiLCJub25jZSIsInNldEF0dHJpYnV0ZSIsImluc2VydCIsImFwcGVuZENoaWxkIiwidGV4dFN0b3JlIiwicmVwbGFjZVRleHQiLCJyZXBsYWNlbWVudCIsImZpbHRlciIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJyZW1vdmUiLCJzdHlsZVNoZWV0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwbHlUb1RhZyIsInJlbW92ZUF0dHJpYnV0ZSIsImJ0b2EiLCJ1bmVzY2FwZSIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpTT04iLCJzdHJpbmdpZnkiLCJmaXJzdENoaWxkIiwic2luZ2xldG9uIiwic2luZ2xldG9uQ291bnRlciIsInVwZGF0ZSIsInN0eWxlSW5kZXgiLCJwYXJlbnROb2RlIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwibmV3T2JqIiwibGFzdElkZW50aWZpZXJzIiwibmV3TGlzdCIsInRvU3RyaW5nIiwibmV3TGFzdElkZW50aWZpZXJzIiwiX2kiLCJfaW5kZXgiLCJzcGxpY2UiLCJtbDUiLCJUaGVtZUNvbnRleHQiLCJjcmVhdGVDb250ZXh0IiwiQ29uc3VtZXIiLCJQcm92aWRlciIsInVzZUJvb3RzdHJhcFByZWZpeCIsInByZWZpeCIsImRlZmF1bHRQcmVmaXgiLCJwcmVmaXhlcyIsImZ1bmNzIiwiYWNjIiwiX2xlbjIiLCJfa2V5MiIsImlzVHJpdmlhbEhyZWYiLCJocmVmIiwidHJpbSIsIlNhZmVBbmNob3IiLCJmb3J3YXJkUmVmIiwiX3JlZiRhcyIsImFzIiwiQ29tcG9uZW50IiwiZGlzYWJsZWQiLCJvbktleURvd24iLCJoYW5kbGVDbGljayIsIm9uQ2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsInN0b3BQcm9wYWdhdGlvbiIsInJvbGUiLCJ0YWJJbmRleCIsImRpc3BsYXlOYW1lIiwiQnV0dG9uIiwiYnNQcmVmaXgiLCJ2YXJpYW50Iiwic2l6ZSIsImFjdGl2ZSIsImNsYXNzTmFtZSIsImJsb2NrIiwidHlwZSIsImRlZmF1bHRQcm9wcyIsImdldExvZ2dlciIsImNvbnNvbGUiLCJub3RlcyIsIm5vdGVUb0ZyZXEiLCJub3RlIiwiTWF0aCIsInBvdyIsImZyZXFUb05vdGUiLCJmcmVxIiwibG9nMiIsIk5vdGUiLCJfZnJlcSIsInJvdW5kIiwiZnJlcXVlbmN5Iiwib2N0YXZlIiwiZmxvb3IiLCJkaWZmIiwiTE9HIiwiTU9ERUxfVVJMIiwiR2VuZXJhdG9yQ29tcG9uZW50IiwiZmxhZyIsInNldEZsYWciLCJjdXJyZW50VmFsdWUiLCJzZXRDdXJyZW50VmFsdWUiLCJtb3VudGVkIiwiZ2VuZXJhdG9yIiwibmV4dCIsInRoZW4iLCJkb25lIiwib25UaWNrIiwiY2hpbGRyZW4iLCJTcGlubmVyIiwiYW5pbWF0aW9uIiwiYnNTcGlubmVyUHJlZml4IiwiUGl0Y2hSZWNvcmRlciIsInBpdGNoR2VuZXJhdG9yIiwidGltZW91dE1zIiwib25GaW5pc2giLCJyZWNvcmRpbmciLCJzZXRSZWNvcmRpbmciLCJzdGFydGVkIiwic2V0U3RhcnRlZCIsImZpbmlzaGVkIiwic2V0RmluaXNoZWQiLCJpbmZvIiwic2V0VGltZW91dCIsImNsZWFyVGltZW91dCIsImxhYmVsIiwibmV3UmVjb3JkaW5nIiwiZW11bGF0ZVRyYW5zaXRpb25FbmQiLCJlbGVtZW50IiwiZHVyYXRpb24iLCJwYWRkaW5nIiwiY2FsbGVkIiwiaGFuZGxlIiwiZXZ0IiwiY3JlYXRlRXZlbnQiLCJpbml0RXZlbnQiLCJkaXNwYXRjaEV2ZW50IiwidHJpZ2dlclRyYW5zaXRpb25FbmQiLCJsaXN0ZW4iLCJzdHIiLCJtdWx0IiwicGFyc2VGbG9hdCIsInJlbW92ZUVtdWxhdGUiLCJfUmVhY3QkQ29tcG9uZW50IiwiVHJhbnNpdGlvbiIsImNvbnRleHQiLCJfdGhpcyIsImluaXRpYWxTdGF0dXMiLCJhcHBlYXIiLCJpc01vdW50aW5nIiwiZW50ZXIiLCJhcHBlYXJTdGF0dXMiLCJpbiIsInVubW91bnRPbkV4aXQiLCJtb3VudE9uRW50ZXIiLCJzdGF0ZSIsInN0YXR1cyIsIm5leHRDYWxsYmFjayIsImdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyIsInByZXZTdGF0ZSIsIl9wcm90byIsImNvbXBvbmVudERpZE1vdW50IiwidXBkYXRlU3RhdHVzIiwiY29tcG9uZW50RGlkVXBkYXRlIiwicHJldlByb3BzIiwibmV4dFN0YXR1cyIsImNvbXBvbmVudFdpbGxVbm1vdW50IiwiY2FuY2VsTmV4dENhbGxiYWNrIiwiZ2V0VGltZW91dHMiLCJleGl0IiwidGltZW91dCIsIm1vdW50aW5nIiwicGVyZm9ybUVudGVyIiwicGVyZm9ybUV4aXQiLCJfdGhpczIiLCJhcHBlYXJpbmciLCJfcmVmMiIsIm5vZGVSZWYiLCJmaW5kRE9NTm9kZSIsIm1heWJlTm9kZSIsIm1heWJlQXBwZWFyaW5nIiwidGltZW91dHMiLCJlbnRlclRpbWVvdXQiLCJzYWZlU2V0U3RhdGUiLCJvbkVudGVyZWQiLCJvbkVudGVyIiwib25FbnRlcmluZyIsIm9uVHJhbnNpdGlvbkVuZCIsIl90aGlzMyIsIm9uRXhpdCIsIm9uRXhpdGluZyIsIm9uRXhpdGVkIiwiY2FuY2VsIiwibmV4dFN0YXRlIiwiY2FsbGJhY2siLCJzZXROZXh0Q2FsbGJhY2siLCJfdGhpczQiLCJkb2VzTm90SGF2ZVRpbWVvdXRPckxpc3RlbmVyIiwiYWRkRW5kTGlzdGVuZXIiLCJfcmVmMyIsIm1heWJlTmV4dENhbGxiYWNrIiwicmVuZGVyIiwiX3RoaXMkcHJvcHMiLCJjaGlsZFByb3BzIiwiVHJhbnNpdGlvbkdyb3VwQ29udGV4dCIsImNsb25lRWxlbWVudCIsIkNoaWxkcmVuIiwib25seSIsIm5vb3AiLCJjb250ZXh0VHlwZSIsInByb3BUeXBlcyIsIlVOTU9VTlRFRCIsIkVYSVRFRCIsIkVOVEVSSU5HIiwiRU5URVJFRCIsIkVYSVRJTkciLCJfZmFkZVN0eWxlcyIsImZhZGVTdHlsZXMiLCJGYWRlIiwiaGFuZGxlRW50ZXIiLCJvZmZzZXRIZWlnaHQiLCJ0cmlnZ2VyQnJvd3NlclJlZmxvdyIsImlubmVyUHJvcHMiLCJpc1JlcXVpcmVkIiwiZnVuYyIsIkNsb3NlQnV0dG9uIiwickh5cGhlbiIsIl8iLCJjaHIiLCJzbGljZSIsImNyZWF0ZVdpdGhCc1ByZWZpeCIsIl90ZW1wIiwiX3JlZiRkaXNwbGF5TmFtZSIsIkJzQ29tcG9uZW50IiwiX3JlZjIkYXMiLCJUYWciLCJyZXNvbHZlZFByZWZpeCIsIkRpdlN0eWxlZEFzSDQiLCJBbGVydEhlYWRpbmciLCJBbGVydExpbmsiLCJzaG93IiwidHJhbnNpdGlvbiIsImNsb3NlTGFiZWwiLCJBbGVydCIsInVuY29udHJvbGxlZFByb3BzIiwiX3VzZVVuY29udHJvbGxlZCIsIm9uQ2xvc2UiLCJkaXNtaXNzaWJsZSIsImhhbmRsZUNsb3NlIiwiYWxlcnQiLCJMaW5rIiwiSGVhZGluZyIsIlN1bW1hcnkiLCJyZWZlcmVuY2UiLCJzdW0iLCJQaXRjaERldGVjdGlvbiIsInNldElzU3RhcnRlZCIsImF1ZGlvQ29udGV4dCIsIkF1ZGlvQ29udGV4dCIsInN0cmVhbSIsInNldFN0cmVhbSIsInBpdGNoRGV0ZWN0aW9uR2VuZXJhdG9yIiwic2V0UGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IiLCJuYXZpZ2F0b3IiLCJtZWRpYURldmljZXMiLCJnZXRVc2VyTWVkaWEiLCJhdWRpbyIsInZpZGVvIiwibmV3U3RyZWFtIiwiZGVidWciLCJnZXRBdWRpb1RyYWNrcyIsInJlYWR5U3RhdGUiLCJjcmVhdGVNZWRpYVN0cmVhbVNvdXJjZSIsImN0eCIsInBpdGNoRGV0ZWN0aW9uIiwicmVhZHkiLCJwaXRjaCIsImdldFBpdGNoIiwibWw1UGl0Y2hEZXRlY3Rpb24iLCJyZXN1bWUiLCJnZXRUcmFja3MiLCJzdG9wIiwic3VzcGVuZCIsInJlZmVyZW5jZVBpdGNoIiwidG9WYWwiLCJtaXgiLCJrIiwieSIsInRtcCIsIngiLCJDb250YWluZXIiLCJmbHVpZCIsInN1ZmZpeCIsImdldEVsZW1lbnRCeUlkIl0sIm1hcHBpbmdzIjoiYUFDRSxJQUFJQSxFQUFtQixHQUd2QixTQUFTQyxFQUFvQkMsR0FHNUIsR0FBR0YsRUFBaUJFLEdBQ25CLE9BQU9GLEVBQWlCRSxHQUFVQyxRQUduQyxJQUFJQyxFQUFTSixFQUFpQkUsR0FBWSxDQUN6Q0csRUFBR0gsRUFDSEksR0FBRyxFQUNISCxRQUFTLElBVVYsT0FOQUksRUFBUUwsR0FBVU0sS0FBS0osRUFBT0QsUUFBU0MsRUFBUUEsRUFBT0QsUUFBU0YsR0FH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LEVBQU1tQixHQUMvQyxJQUFJMkcsRUFBVzlILEVBQUs4SCxTQUNoQjZOLEVBQVEzVixFQUFLMlYsTUFDYjFPLEVBQVVqSCxFQUFLa0gsR0FDZkMsT0FBd0IsSUFBWkYsRUFBcUIsTUFBUUEsRUFDekNpQixFQUFZbEksRUFBS2tJLFVBQ2pCeEksRUFBUSxZQUE4Qk0sRUFBTSxDQUFDLFdBQVksUUFBUyxLQUFNLGNBRXhFcUcsRUFBU0QsRUFBbUIwQixFQUFVLGFBQ3RDOE4sRUFBMEIsaUJBQVZELEVBQXFCLElBQU1BLEVBQVEsU0FDdkQsT0FBb0IsSUFBTXBTLGNBQWM0RCxFQUFXLFlBQVMsQ0FDMURoRyxJQUFLQSxHQUNKekIsRUFBTyxDQUNSd0ksVUFBVyxJQUFXQSxFQUFXeU4sRUFBUSxHQUFLdFAsRUFBU3VQLEVBQVN2UCxTQUdwRXFQLEdBQVU5TixZQUFjLFlBQ3hCOE4sR0FBVXJOLGFBcEJTLENBQ2pCc04sT0FBTyxHQW9CTSxVQ2pCZixNQUFNLEdBQU1yTixJQ0xaLFNBQWdCLGdCRE9HLEtBQ2pCLEdBQUk0QyxLQUFLLGlCQUVQLGtCQUFDLEdBQVMsS0FDUiw0QkFBUWhELFVBQVcsR0FBSyxjQUFlLFNBQ3JDLHdCQUFJQSxVQUFXLEdBQUssWUFBYSxVQUFRLFdBQ3pDLDRCLFNBQ1Esa0MsTUFJViwwQkFBTUEsVUFBVyxHQUFLLGNBQWUsUUFBU1IsS0FBSyxRQUNqRCxrQkFBQzZMLEdBQWMsT0FHakIsNEJBQVFyTCxVQUFXLEdBQUssT0FBUSxhQUFjLGVBQzVDLGtCQUFDLEdBQVMsS0FDUixtREN4QlUsTUFBUzdLLFNBQVN3WSxlQUFlIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMjApO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBSZWFjdDsiLCJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBfZXh0ZW5kcygpIHtcbiAgX2V4dGVuZHMgPSBPYmplY3QuYXNzaWduIHx8IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHNvdXJjZSA9IGFyZ3VtZW50c1tpXTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHNvdXJjZSkge1xuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHNvdXJjZSwga2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFyZ2V0O1xuICB9O1xuXG4gIHJldHVybiBfZXh0ZW5kcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlKHNvdXJjZSwgZXhjbHVkZWQpIHtcbiAgaWYgKHNvdXJjZSA9PSBudWxsKSByZXR1cm4ge307XG4gIHZhciB0YXJnZXQgPSB7fTtcbiAgdmFyIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuICB2YXIga2V5LCBpO1xuXG4gIGZvciAoaSA9IDA7IGkgPCBzb3VyY2VLZXlzLmxlbmd0aDsgaSsrKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpXTtcbiAgICBpZiAoZXhjbHVkZWQuaW5kZXhPZihrZXkpID49IDApIGNvbnRpbnVlO1xuICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gIH1cblxuICByZXR1cm4gdGFyZ2V0O1xufSIsIi8qIVxuICBDb3B5cmlnaHQgKGMpIDIwMTcgSmVkIFdhdHNvbi5cbiAgTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlIChNSVQpLCBzZWVcbiAgaHR0cDovL2plZHdhdHNvbi5naXRodWIuaW8vY2xhc3NuYW1lc1xuKi9cbi8qIGdsb2JhbCBkZWZpbmUgKi9cblxuKGZ1bmN0aW9uICgpIHtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBoYXNPd24gPSB7fS5oYXNPd25Qcm9wZXJ0eTtcblxuXHRmdW5jdGlvbiBjbGFzc05hbWVzICgpIHtcblx0XHR2YXIgY2xhc3NlcyA9IFtdO1xuXG5cdFx0Zm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBhcmcgPSBhcmd1bWVudHNbaV07XG5cdFx0XHRpZiAoIWFyZykgY29udGludWU7XG5cblx0XHRcdHZhciBhcmdUeXBlID0gdHlwZW9mIGFyZztcblxuXHRcdFx0aWYgKGFyZ1R5cGUgPT09ICdzdHJpbmcnIHx8IGFyZ1R5cGUgPT09ICdudW1iZXInKSB7XG5cdFx0XHRcdGNsYXNzZXMucHVzaChhcmcpO1xuXHRcdFx0fSBlbHNlIGlmIChBcnJheS5pc0FycmF5KGFyZykgJiYgYXJnLmxlbmd0aCkge1xuXHRcdFx0XHR2YXIgaW5uZXIgPSBjbGFzc05hbWVzLmFwcGx5KG51bGwsIGFyZyk7XG5cdFx0XHRcdGlmIChpbm5lcikge1xuXHRcdFx0XHRcdGNsYXNzZXMucHVzaChpbm5lcik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSBpZiAoYXJnVHlwZSA9PT0gJ29iamVjdCcpIHtcblx0XHRcdFx0Zm9yICh2YXIga2V5IGluIGFyZykge1xuXHRcdFx0XHRcdGlmIChoYXNPd24uY2FsbChhcmcsIGtleSkgJiYgYXJnW2tleV0pIHtcblx0XHRcdFx0XHRcdGNsYXNzZXMucHVzaChrZXkpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBjbGFzc2VzLmpvaW4oJyAnKTtcblx0fVxuXG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdGNsYXNzTmFtZXMuZGVmYXVsdCA9IGNsYXNzTmFtZXM7XG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBjbGFzc05hbWVzO1xuXHR9IGVsc2UgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIGRlZmluZS5hbWQgPT09ICdvYmplY3QnICYmIGRlZmluZS5hbWQpIHtcblx0XHQvLyByZWdpc3RlciBhcyAnY2xhc3NuYW1lcycsIGNvbnNpc3RlbnQgd2l0aCBucG0gcGFja2FnZSBuYW1lXG5cdFx0ZGVmaW5lKCdjbGFzc25hbWVzJywgW10sIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBjbGFzc05hbWVzO1xuXHRcdH0pO1xuXHR9IGVsc2Uge1xuXHRcdHdpbmRvdy5jbGFzc05hbWVzID0gY2xhc3NOYW1lcztcblx0fVxufSgpKTtcbiIsIm1vZHVsZS5leHBvcnRzID0gUmVhY3RET007IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX2luaGVyaXRzTG9vc2Uoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHtcbiAgc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzLnByb3RvdHlwZSk7XG4gIHN1YkNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IHN1YkNsYXNzO1xuICBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzO1xufSIsImV4cG9ydCBkZWZhdWx0ICEhKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5kb2N1bWVudCAmJiB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCk7IiwibW9kdWxlLmV4cG9ydHMgPSBQcm9wVHlwZXM7IiwiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogVXNlIGludmFyaWFudCgpIHRvIGFzc2VydCBzdGF0ZSB3aGljaCB5b3VyIHByb2dyYW0gYXNzdW1lcyB0byBiZSB0cnVlLlxuICpcbiAqIFByb3ZpZGUgc3ByaW50Zi1zdHlsZSBmb3JtYXQgKG9ubHkgJXMgaXMgc3VwcG9ydGVkKSBhbmQgYXJndW1lbnRzXG4gKiB0byBwcm92aWRlIGluZm9ybWF0aW9uIGFib3V0IHdoYXQgYnJva2UgYW5kIHdoYXQgeW91IHdlcmVcbiAqIGV4cGVjdGluZy5cbiAqXG4gKiBUaGUgaW52YXJpYW50IG1lc3NhZ2Ugd2lsbCBiZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uLCBidXQgdGhlIGludmFyaWFudFxuICogd2lsbCByZW1haW4gdG8gZW5zdXJlIGxvZ2ljIGRvZXMgbm90IGRpZmZlciBpbiBwcm9kdWN0aW9uLlxuICovXG5cbnZhciBpbnZhcmlhbnQgPSBmdW5jdGlvbihjb25kaXRpb24sIGZvcm1hdCwgYSwgYiwgYywgZCwgZSwgZikge1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdpbnZhcmlhbnQgcmVxdWlyZXMgYW4gZXJyb3IgbWVzc2FnZSBhcmd1bWVudCcpO1xuICAgIH1cbiAgfVxuXG4gIGlmICghY29uZGl0aW9uKSB7XG4gICAgdmFyIGVycm9yO1xuICAgIGlmIChmb3JtYXQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgICdNaW5pZmllZCBleGNlcHRpb24gb2NjdXJyZWQ7IHVzZSB0aGUgbm9uLW1pbmlmaWVkIGRldiBlbnZpcm9ubWVudCAnICtcbiAgICAgICAgJ2ZvciB0aGUgZnVsbCBlcnJvciBtZXNzYWdlIGFuZCBhZGRpdGlvbmFsIGhlbHBmdWwgd2FybmluZ3MuJ1xuICAgICAgKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIGFyZ3MgPSBbYSwgYiwgYywgZCwgZSwgZl07XG4gICAgICB2YXIgYXJnSW5kZXggPSAwO1xuICAgICAgZXJyb3IgPSBuZXcgRXJyb3IoXG4gICAgICAgIGZvcm1hdC5yZXBsYWNlKC8lcy9nLCBmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3NbYXJnSW5kZXgrK107IH0pXG4gICAgICApO1xuICAgICAgZXJyb3IubmFtZSA9ICdJbnZhcmlhbnQgVmlvbGF0aW9uJztcbiAgICB9XG5cbiAgICBlcnJvci5mcmFtZXNUb1BvcCA9IDE7IC8vIHdlIGRvbid0IGNhcmUgYWJvdXQgaW52YXJpYW50J3Mgb3duIGZyYW1lXG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gaW52YXJpYW50O1xuIiwiLyogZXNsaW50LWRpc2FibGUgbm8tcmV0dXJuLWFzc2lnbiAqL1xuaW1wb3J0IGNhblVzZURPTSBmcm9tICcuL2NhblVzZURPTSc7XG5leHBvcnQgdmFyIG9wdGlvbnNTdXBwb3J0ZWQgPSBmYWxzZTtcbmV4cG9ydCB2YXIgb25jZVN1cHBvcnRlZCA9IGZhbHNlO1xuXG50cnkge1xuICB2YXIgb3B0aW9ucyA9IHtcbiAgICBnZXQgcGFzc2l2ZSgpIHtcbiAgICAgIHJldHVybiBvcHRpb25zU3VwcG9ydGVkID0gdHJ1ZTtcbiAgICB9LFxuXG4gICAgZ2V0IG9uY2UoKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tbXVsdGktYXNzaWduXG4gICAgICByZXR1cm4gb25jZVN1cHBvcnRlZCA9IG9wdGlvbnNTdXBwb3J0ZWQgPSB0cnVlO1xuICAgIH1cblxuICB9O1xuXG4gIGlmIChjYW5Vc2VET00pIHtcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndGVzdCcsIG9wdGlvbnMsIG9wdGlvbnMpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCd0ZXN0Jywgb3B0aW9ucywgdHJ1ZSk7XG4gIH1cbn0gY2F0Y2ggKGUpIHtcbiAgLyogKi9cbn1cblxuLyoqXG4gKiBBbiBgYWRkRXZlbnRMaXN0ZW5lcmAgcG9ueWZpbGwsIHN1cHBvcnRzIHRoZSBgb25jZWAgb3B0aW9uXG4gKi9cbmZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIGlmIChvcHRpb25zICYmIHR5cGVvZiBvcHRpb25zICE9PSAnYm9vbGVhbicgJiYgIW9uY2VTdXBwb3J0ZWQpIHtcbiAgICB2YXIgb25jZSA9IG9wdGlvbnMub25jZSxcbiAgICAgICAgY2FwdHVyZSA9IG9wdGlvbnMuY2FwdHVyZTtcbiAgICB2YXIgd3JhcHBlZEhhbmRsZXIgPSBoYW5kbGVyO1xuXG4gICAgaWYgKCFvbmNlU3VwcG9ydGVkICYmIG9uY2UpIHtcbiAgICAgIHdyYXBwZWRIYW5kbGVyID0gaGFuZGxlci5fX29uY2UgfHwgZnVuY3Rpb24gb25jZUhhbmRsZXIoZXZlbnQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgb25jZUhhbmRsZXIsIGNhcHR1cmUpO1xuICAgICAgICBoYW5kbGVyLmNhbGwodGhpcywgZXZlbnQpO1xuICAgICAgfTtcblxuICAgICAgaGFuZGxlci5fX29uY2UgPSB3cmFwcGVkSGFuZGxlcjtcbiAgICB9XG5cbiAgICBub2RlLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCB3cmFwcGVkSGFuZGxlciwgb3B0aW9uc1N1cHBvcnRlZCA/IG9wdGlvbnMgOiBjYXB0dXJlKTtcbiAgfVxuXG4gIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpO1xufVxuXG5leHBvcnQgZGVmYXVsdCBhZGRFdmVudExpc3RlbmVyOyIsImZ1bmN0aW9uIHJlbW92ZUV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gIHZhciBjYXB0dXJlID0gb3B0aW9ucyAmJiB0eXBlb2Ygb3B0aW9ucyAhPT0gJ2Jvb2xlYW4nID8gb3B0aW9ucy5jYXB0dXJlIDogb3B0aW9ucztcbiAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlciwgY2FwdHVyZSk7XG5cbiAgaWYgKGhhbmRsZXIuX19vbmNlKSB7XG4gICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgaGFuZGxlci5fX29uY2UsIGNhcHR1cmUpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IHJlbW92ZUV2ZW50TGlzdGVuZXI7IiwiaW1wb3J0IGFkZEV2ZW50TGlzdGVuZXIgZnJvbSAnLi9hZGRFdmVudExpc3RlbmVyJztcbmltcG9ydCByZW1vdmVFdmVudExpc3RlbmVyIGZyb20gJy4vcmVtb3ZlRXZlbnRMaXN0ZW5lcic7XG5cbmZ1bmN0aW9uIGxpc3Rlbihub2RlLCBldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgYWRkRXZlbnRMaXN0ZW5lcihub2RlLCBldmVudE5hbWUsIGhhbmRsZXIsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIobm9kZSwgZXZlbnROYW1lLCBoYW5kbGVyLCBvcHRpb25zKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgbGlzdGVuOyIsIm1vZHVsZS5leHBvcnRzID0gcmVhY3RMaWZlY3ljbGVzQ29tcGF0OyIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG93bmVyRG9jdW1lbnQobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiBub2RlLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQ7XG59IiwiaW1wb3J0IG93bmVyV2luZG93IGZyb20gJy4vb3duZXJXaW5kb3cnO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZ2V0Q29tcHV0ZWRTdHlsZShub2RlLCBwc3VlZG9FbGVtZW50KSB7XG4gIHJldHVybiBvd25lcldpbmRvdyhub2RlKS5nZXRDb21wdXRlZFN0eWxlKG5vZGUsIHBzdWVkb0VsZW1lbnQpO1xufSIsImltcG9ydCBvd25lckRvY3VtZW50IGZyb20gJy4vb3duZXJEb2N1bWVudCc7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBvd25lcldpbmRvdyhub2RlKSB7XG4gIHZhciBkb2MgPSBvd25lckRvY3VtZW50KG5vZGUpO1xuICByZXR1cm4gZG9jICYmIGRvYy5kZWZhdWx0VmlldyB8fCB3aW5kb3c7XG59IiwidmFyIHJVcHBlciA9IC8oW0EtWl0pL2c7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBoeXBoZW5hdGUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmcucmVwbGFjZShyVXBwZXIsICctJDEnKS50b0xvd2VyQ2FzZSgpO1xufSIsIi8qKlxuICogQ29weXJpZ2h0IDIwMTMtMjAxNCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvYmxvYi8yYWViOGEyYTZiZWIwMDYxN2E0MjE3ZjdmODI4NDkyNGZhMmFkODE5L3NyYy92ZW5kb3IvY29yZS9oeXBoZW5hdGVTdHlsZU5hbWUuanNcbiAqL1xuaW1wb3J0IGh5cGhlbmF0ZSBmcm9tICcuL2h5cGhlbmF0ZSc7XG52YXIgbXNQYXR0ZXJuID0gL15tcy0vO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaHlwaGVuYXRlU3R5bGVOYW1lKHN0cmluZykge1xuICByZXR1cm4gaHlwaGVuYXRlKHN0cmluZykucmVwbGFjZShtc1BhdHRlcm4sICctbXMtJyk7XG59IiwidmFyIHN1cHBvcnRlZFRyYW5zZm9ybXMgPSAvXigodHJhbnNsYXRlfHJvdGF0ZXxzY2FsZSkoWHxZfFp8M2QpP3xtYXRyaXgoM2QpP3xwZXJzcGVjdGl2ZXxza2V3KFh8WSk/KSQvaTtcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGlzVHJhbnNmb3JtKHZhbHVlKSB7XG4gIHJldHVybiAhISh2YWx1ZSAmJiBzdXBwb3J0ZWRUcmFuc2Zvcm1zLnRlc3QodmFsdWUpKTtcbn0iLCJpbXBvcnQgZ2V0Q29tcHV0ZWRTdHlsZSBmcm9tICcuL2dldENvbXB1dGVkU3R5bGUnO1xuaW1wb3J0IGh5cGhlbmF0ZSBmcm9tICcuL2h5cGhlbmF0ZVN0eWxlJztcbmltcG9ydCBpc1RyYW5zZm9ybSBmcm9tICcuL2lzVHJhbnNmb3JtJztcblxuZnVuY3Rpb24gc3R5bGUobm9kZSwgcHJvcGVydHkpIHtcbiAgdmFyIGNzcyA9ICcnO1xuICB2YXIgdHJhbnNmb3JtcyA9ICcnO1xuXG4gIGlmICh0eXBlb2YgcHJvcGVydHkgPT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG5vZGUuc3R5bGUuZ2V0UHJvcGVydHlWYWx1ZShoeXBoZW5hdGUocHJvcGVydHkpKSB8fCBnZXRDb21wdXRlZFN0eWxlKG5vZGUpLmdldFByb3BlcnR5VmFsdWUoaHlwaGVuYXRlKHByb3BlcnR5KSk7XG4gIH1cblxuICBPYmplY3Qua2V5cyhwcm9wZXJ0eSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIHZhbHVlID0gcHJvcGVydHlba2V5XTtcblxuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHtcbiAgICAgIG5vZGUuc3R5bGUucmVtb3ZlUHJvcGVydHkoaHlwaGVuYXRlKGtleSkpO1xuICAgIH0gZWxzZSBpZiAoaXNUcmFuc2Zvcm0oa2V5KSkge1xuICAgICAgdHJhbnNmb3JtcyArPSBrZXkgKyBcIihcIiArIHZhbHVlICsgXCIpIFwiO1xuICAgIH0gZWxzZSB7XG4gICAgICBjc3MgKz0gaHlwaGVuYXRlKGtleSkgKyBcIjogXCIgKyB2YWx1ZSArIFwiO1wiO1xuICAgIH1cbiAgfSk7XG5cbiAgaWYgKHRyYW5zZm9ybXMpIHtcbiAgICBjc3MgKz0gXCJ0cmFuc2Zvcm06IFwiICsgdHJhbnNmb3JtcyArIFwiO1wiO1xuICB9XG5cbiAgbm9kZS5zdHlsZS5jc3NUZXh0ICs9IFwiO1wiICsgY3NzO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzdHlsZTsiLCJpbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnZhciBub29wID0gZnVuY3Rpb24gbm9vcCgpIHt9O1xuXG5mdW5jdGlvbiByZWFkT25seVByb3BUeXBlKGhhbmRsZXIsIG5hbWUpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChwcm9wcywgcHJvcE5hbWUpIHtcbiAgICBpZiAocHJvcHNbcHJvcE5hbWVdICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmICghcHJvcHNbaGFuZGxlcl0pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBFcnJvcihcIllvdSBoYXZlIHByb3ZpZGVkIGEgYFwiICsgcHJvcE5hbWUgKyBcImAgcHJvcCB0byBgXCIgKyBuYW1lICsgXCJgIFwiICsgKFwid2l0aG91dCBhbiBgXCIgKyBoYW5kbGVyICsgXCJgIGhhbmRsZXIgcHJvcC4gVGhpcyB3aWxsIHJlbmRlciBhIHJlYWQtb25seSBmaWVsZC4gXCIpICsgKFwiSWYgdGhlIGZpZWxkIHNob3VsZCBiZSBtdXRhYmxlIHVzZSBgXCIgKyBkZWZhdWx0S2V5KHByb3BOYW1lKSArIFwiYC4gXCIpICsgKFwiT3RoZXJ3aXNlLCBzZXQgYFwiICsgaGFuZGxlciArIFwiYC5cIikpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVuY29udHJvbGxlZFByb3BUeXBlcyhjb250cm9sbGVkVmFsdWVzLCBkaXNwbGF5TmFtZSkge1xuICB2YXIgcHJvcFR5cGVzID0ge307XG4gIE9iamVjdC5rZXlzKGNvbnRyb2xsZWRWYWx1ZXMpLmZvckVhY2goZnVuY3Rpb24gKHByb3ApIHtcbiAgICAvLyBhZGQgZGVmYXVsdCBwcm9wVHlwZXMgZm9yIGZvbGtzIHRoYXQgdXNlIHJ1bnRpbWUgY2hlY2tzXG4gICAgcHJvcFR5cGVzW2RlZmF1bHRLZXkocHJvcCldID0gbm9vcDtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgaGFuZGxlciA9IGNvbnRyb2xsZWRWYWx1ZXNbcHJvcF07XG4gICAgICAhKHR5cGVvZiBoYW5kbGVyID09PSAnc3RyaW5nJyAmJiBoYW5kbGVyLnRyaW0oKS5sZW5ndGgpID8gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09IFwicHJvZHVjdGlvblwiID8gaW52YXJpYW50KGZhbHNlLCAnVW5jb250cm9sbGFibGUgLSBbJXNdOiB0aGUgcHJvcCBgJXNgIG5lZWRzIGEgdmFsaWQgaGFuZGxlciBrZXkgbmFtZSBpbiBvcmRlciB0byBtYWtlIGl0IHVuY29udHJvbGxhYmxlJywgZGlzcGxheU5hbWUsIHByb3ApIDogaW52YXJpYW50KGZhbHNlKSA6IHZvaWQgMDtcbiAgICAgIHByb3BUeXBlc1twcm9wXSA9IHJlYWRPbmx5UHJvcFR5cGUoaGFuZGxlciwgZGlzcGxheU5hbWUpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwcm9wVHlwZXM7XG59XG5leHBvcnQgZnVuY3Rpb24gaXNQcm9wKHByb3BzLCBwcm9wKSB7XG4gIHJldHVybiBwcm9wc1twcm9wXSAhPT0gdW5kZWZpbmVkO1xufVxuZXhwb3J0IGZ1bmN0aW9uIGRlZmF1bHRLZXkoa2V5KSB7XG4gIHJldHVybiAnZGVmYXVsdCcgKyBrZXkuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBrZXkuc3Vic3RyKDEpO1xufVxuLyoqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTMtcHJlc2VudCwgRmFjZWJvb2ssIEluYy5cbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgQlNELXN0eWxlIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuIEFuIGFkZGl0aW9uYWwgZ3JhbnRcbiAqIG9mIHBhdGVudCByaWdodHMgY2FuIGJlIGZvdW5kIGluIHRoZSBQQVRFTlRTIGZpbGUgaW4gdGhlIHNhbWUgZGlyZWN0b3J5LlxuICovXG5cbmV4cG9ydCBmdW5jdGlvbiBjYW5BY2NlcHRSZWYoY29tcG9uZW50KSB7XG4gIHJldHVybiAhIWNvbXBvbmVudCAmJiAodHlwZW9mIGNvbXBvbmVudCAhPT0gJ2Z1bmN0aW9uJyB8fCBjb21wb25lbnQucHJvdG90eXBlICYmIGNvbXBvbmVudC5wcm90b3R5cGUuaXNSZWFjdENvbXBvbmVudCk7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcblxuZnVuY3Rpb24gX3RvUHJvcGVydHlLZXkoYXJnKSB7IHZhciBrZXkgPSBfdG9QcmltaXRpdmUoYXJnLCBcInN0cmluZ1wiKTsgcmV0dXJuIHR5cGVvZiBrZXkgPT09IFwic3ltYm9sXCIgPyBrZXkgOiBTdHJpbmcoa2V5KTsgfVxuXG5mdW5jdGlvbiBfdG9QcmltaXRpdmUoaW5wdXQsIGhpbnQpIHsgaWYgKHR5cGVvZiBpbnB1dCAhPT0gXCJvYmplY3RcIiB8fCBpbnB1dCA9PT0gbnVsbCkgcmV0dXJuIGlucHV0OyB2YXIgcHJpbSA9IGlucHV0W1N5bWJvbC50b1ByaW1pdGl2ZV07IGlmIChwcmltICE9PSB1bmRlZmluZWQpIHsgdmFyIHJlcyA9IHByaW0uY2FsbChpbnB1dCwgaGludCB8fCBcImRlZmF1bHRcIik7IGlmICh0eXBlb2YgcmVzICE9PSBcIm9iamVjdFwiKSByZXR1cm4gcmVzOyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQEB0b1ByaW1pdGl2ZSBtdXN0IHJldHVybiBhIHByaW1pdGl2ZSB2YWx1ZS5cIik7IH0gcmV0dXJuIChoaW50ID09PSBcInN0cmluZ1wiID8gU3RyaW5nIDogTnVtYmVyKShpbnB1dCk7IH1cblxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZVJlZiwgdXNlU3RhdGUgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgKiBhcyBVdGlscyBmcm9tICcuL3V0aWxzJztcblxuZnVuY3Rpb24gdXNlVW5jb250cm9sbGVkUHJvcChwcm9wVmFsdWUsIGRlZmF1bHRWYWx1ZSwgaGFuZGxlcikge1xuICB2YXIgd2FzUHJvcFJlZiA9IHVzZVJlZihwcm9wVmFsdWUgIT09IHVuZGVmaW5lZCk7XG5cbiAgdmFyIF91c2VTdGF0ZSA9IHVzZVN0YXRlKGRlZmF1bHRWYWx1ZSksXG4gICAgICBzdGF0ZVZhbHVlID0gX3VzZVN0YXRlWzBdLFxuICAgICAgc2V0U3RhdGUgPSBfdXNlU3RhdGVbMV07XG5cbiAgdmFyIGlzUHJvcCA9IHByb3BWYWx1ZSAhPT0gdW5kZWZpbmVkO1xuICB2YXIgd2FzUHJvcCA9IHdhc1Byb3BSZWYuY3VycmVudDtcbiAgd2FzUHJvcFJlZi5jdXJyZW50ID0gaXNQcm9wO1xuICAvKipcbiAgICogSWYgYSBwcm9wIHN3aXRjaGVzIGZyb20gY29udHJvbGxlZCB0byBVbmNvbnRyb2xsZWRcbiAgICogcmVzZXQgaXRzIHZhbHVlIHRvIHRoZSBkZWZhdWx0VmFsdWVcbiAgICovXG5cbiAgaWYgKCFpc1Byb3AgJiYgd2FzUHJvcCAmJiBzdGF0ZVZhbHVlICE9PSBkZWZhdWx0VmFsdWUpIHtcbiAgICBzZXRTdGF0ZShkZWZhdWx0VmFsdWUpO1xuICB9XG5cbiAgcmV0dXJuIFtpc1Byb3AgPyBwcm9wVmFsdWUgOiBzdGF0ZVZhbHVlLCB1c2VDYWxsYmFjayhmdW5jdGlvbiAodmFsdWUpIHtcbiAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuID4gMSA/IF9sZW4gLSAxIDogMCksIF9rZXkgPSAxOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgICBhcmdzW19rZXkgLSAxXSA9IGFyZ3VtZW50c1tfa2V5XTtcbiAgICB9XG5cbiAgICBpZiAoaGFuZGxlcikgaGFuZGxlci5hcHBseSh2b2lkIDAsIFt2YWx1ZV0uY29uY2F0KGFyZ3MpKTtcbiAgICBzZXRTdGF0ZSh2YWx1ZSk7XG4gIH0sIFtoYW5kbGVyXSldO1xufVxuXG5leHBvcnQgeyB1c2VVbmNvbnRyb2xsZWRQcm9wIH07XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB1c2VVbmNvbnRyb2xsZWQocHJvcHMsIGNvbmZpZykge1xuICByZXR1cm4gT2JqZWN0LmtleXMoY29uZmlnKS5yZWR1Y2UoZnVuY3Rpb24gKHJlc3VsdCwgZmllbGROYW1lKSB7XG4gICAgdmFyIF9leHRlbmRzMjtcblxuICAgIHZhciBfcmVmID0gcmVzdWx0LFxuICAgICAgICBkZWZhdWx0VmFsdWUgPSBfcmVmW1V0aWxzLmRlZmF1bHRLZXkoZmllbGROYW1lKV0sXG4gICAgICAgIHByb3BzVmFsdWUgPSBfcmVmW2ZpZWxkTmFtZV0sXG4gICAgICAgIHJlc3QgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbVXRpbHMuZGVmYXVsdEtleShmaWVsZE5hbWUpLCBmaWVsZE5hbWVdLm1hcChfdG9Qcm9wZXJ0eUtleSkpO1xuXG4gICAgdmFyIGhhbmRsZXJOYW1lID0gY29uZmlnW2ZpZWxkTmFtZV07XG5cbiAgICB2YXIgX3VzZVVuY29udHJvbGxlZFByb3AgPSB1c2VVbmNvbnRyb2xsZWRQcm9wKHByb3BzVmFsdWUsIGRlZmF1bHRWYWx1ZSwgcHJvcHNbaGFuZGxlck5hbWVdKSxcbiAgICAgICAgdmFsdWUgPSBfdXNlVW5jb250cm9sbGVkUHJvcFswXSxcbiAgICAgICAgaGFuZGxlciA9IF91c2VVbmNvbnRyb2xsZWRQcm9wWzFdO1xuXG4gICAgcmV0dXJuIF9leHRlbmRzKHt9LCByZXN0LCAoX2V4dGVuZHMyID0ge30sIF9leHRlbmRzMltmaWVsZE5hbWVdID0gdmFsdWUsIF9leHRlbmRzMltoYW5kbGVyTmFtZV0gPSBoYW5kbGVyLCBfZXh0ZW5kczIpKTtcbiAgfSwgcHJvcHMpO1xufSIsImltcG9ydCB7IHVzZUVmZmVjdCwgdXNlUmVmIH0gZnJvbSAncmVhY3QnO1xuLyoqXG4gKiBDcmVhdGVzIGEgYFJlZmAgd2hvc2UgdmFsdWUgaXMgdXBkYXRlZCBpbiBhbiBlZmZlY3QsIGVuc3VyaW5nIHRoZSBtb3N0IHJlY2VudFxuICogdmFsdWUgaXMgdGhlIG9uZSByZW5kZXJlZCB3aXRoLiBHZW5lcmFsbHkgb25seSByZXF1aXJlZCBmb3IgQ29uY3VycmVudCBtb2RlIHVzYWdlXG4gKiB3aGVyZSBwcmV2aW91cyB3b3JrIGluIGByZW5kZXIoKWAgbWF5IGJlIGRpc2NhcmRlZCBiZWZvciBiZWluZyB1c2VkLlxuICpcbiAqIFRoaXMgaXMgc2FmZSB0byBhY2Nlc3MgaW4gYW4gZXZlbnQgaGFuZGxlci5cbiAqXG4gKiBAcGFyYW0gdmFsdWUgVGhlIGBSZWZgIHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gdXNlQ29tbWl0dGVkUmVmKHZhbHVlKSB7XG4gIHZhciByZWYgPSB1c2VSZWYodmFsdWUpO1xuICB1c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgIHJlZi5jdXJyZW50ID0gdmFsdWU7XG4gIH0sIFt2YWx1ZV0pO1xuICByZXR1cm4gcmVmO1xufVxuXG5leHBvcnQgZGVmYXVsdCB1c2VDb21taXR0ZWRSZWY7IiwiaW1wb3J0IHsgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdXNlQ29tbWl0dGVkUmVmIGZyb20gJy4vdXNlQ29tbWl0dGVkUmVmJztcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZUV2ZW50Q2FsbGJhY2soZm4pIHtcbiAgdmFyIHJlZiA9IHVzZUNvbW1pdHRlZFJlZihmbik7XG4gIHJldHVybiB1c2VDYWxsYmFjayhmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHJlZi5jdXJyZW50ICYmIHJlZi5jdXJyZW50LmFwcGx5KHJlZiwgYXJndW1lbnRzKTtcbiAgfSwgW3JlZl0pO1xufSIsInZhciBhcGkgPSByZXF1aXJlKFwiIS4uL25vZGVfbW9kdWxlcy9zdHlsZS1sb2FkZXIvZGlzdC9ydW50aW1lL2luamVjdFN0eWxlc0ludG9TdHlsZVRhZy5qc1wiKTtcbiAgICAgICAgICAgIHZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi4vbm9kZV9tb2R1bGVzL21pbmktY3NzLWV4dHJhY3QtcGx1Z2luL2Rpc3QvbG9hZGVyLmpzIS4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2Rpc3QvY2pzLmpzIS4vQXBwLmNzc1wiKTtcblxuICAgICAgICAgICAgY29udGVudCA9IGNvbnRlbnQuX19lc01vZHVsZSA/IGNvbnRlbnQuZGVmYXVsdCA6IGNvbnRlbnQ7XG5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuICAgICAgICAgICAgfVxuXG52YXIgb3B0aW9ucyA9IHt9O1xuXG5vcHRpb25zLmluc2VydCA9IFwiaGVhZFwiO1xub3B0aW9ucy5zaW5nbGV0b24gPSBmYWxzZTtcblxudmFyIHVwZGF0ZSA9IGFwaShjb250ZW50LCBvcHRpb25zKTtcblxuXG5cbm1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHMgfHwge307IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBpc09sZElFID0gZnVuY3Rpb24gaXNPbGRJRSgpIHtcbiAgdmFyIG1lbW87XG4gIHJldHVybiBmdW5jdGlvbiBtZW1vcml6ZSgpIHtcbiAgICBpZiAodHlwZW9mIG1lbW8gPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBUZXN0IGZvciBJRSA8PSA5IGFzIHByb3Bvc2VkIGJ5IEJyb3dzZXJoYWNrc1xuICAgICAgLy8gQHNlZSBodHRwOi8vYnJvd3NlcmhhY2tzLmNvbS8jaGFjay1lNzFkODY5MmY2NTMzNDE3M2ZlZTcxNWMyMjJjYjgwNVxuICAgICAgLy8gVGVzdHMgZm9yIGV4aXN0ZW5jZSBvZiBzdGFuZGFyZCBnbG9iYWxzIGlzIHRvIGFsbG93IHN0eWxlLWxvYWRlclxuICAgICAgLy8gdG8gb3BlcmF0ZSBjb3JyZWN0bHkgaW50byBub24tc3RhbmRhcmQgZW52aXJvbm1lbnRzXG4gICAgICAvLyBAc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93ZWJwYWNrLWNvbnRyaWIvc3R5bGUtbG9hZGVyL2lzc3Vlcy8xNzdcbiAgICAgIG1lbW8gPSBCb29sZWFuKHdpbmRvdyAmJiBkb2N1bWVudCAmJiBkb2N1bWVudC5hbGwgJiYgIXdpbmRvdy5hdG9iKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtbztcbiAgfTtcbn0oKTtcblxudmFyIGdldFRhcmdldCA9IGZ1bmN0aW9uIGdldFRhcmdldCgpIHtcbiAgdmFyIG1lbW8gPSB7fTtcbiAgcmV0dXJuIGZ1bmN0aW9uIG1lbW9yaXplKHRhcmdldCkge1xuICAgIGlmICh0eXBlb2YgbWVtb1t0YXJnZXRdID09PSAndW5kZWZpbmVkJykge1xuICAgICAgdmFyIHN0eWxlVGFyZ2V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0YXJnZXQpOyAvLyBTcGVjaWFsIGNhc2UgdG8gcmV0dXJuIGhlYWQgb2YgaWZyYW1lIGluc3RlYWQgb2YgaWZyYW1lIGl0c2VsZlxuXG4gICAgICBpZiAod2luZG93LkhUTUxJRnJhbWVFbGVtZW50ICYmIHN0eWxlVGFyZ2V0IGluc3RhbmNlb2Ygd2luZG93LkhUTUxJRnJhbWVFbGVtZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgLy8gVGhpcyB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhY2Nlc3MgdG8gaWZyYW1lIGlzIGJsb2NrZWRcbiAgICAgICAgICAvLyBkdWUgdG8gY3Jvc3Mtb3JpZ2luIHJlc3RyaWN0aW9uc1xuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gc3R5bGVUYXJnZXQuY29udGVudERvY3VtZW50LmhlYWQ7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAvLyBpc3RhbmJ1bCBpZ25vcmUgbmV4dFxuICAgICAgICAgIHN0eWxlVGFyZ2V0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtZW1vW3RhcmdldF0gPSBzdHlsZVRhcmdldDtcbiAgICB9XG5cbiAgICByZXR1cm4gbWVtb1t0YXJnZXRdO1xuICB9O1xufSgpO1xuXG52YXIgc3R5bGVzSW5Eb20gPSBbXTtcblxuZnVuY3Rpb24gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcikge1xuICB2YXIgcmVzdWx0ID0gLTE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHlsZXNJbkRvbS5sZW5ndGg7IGkrKykge1xuICAgIGlmIChzdHlsZXNJbkRvbVtpXS5pZGVudGlmaWVyID09PSBpZGVudGlmaWVyKSB7XG4gICAgICByZXN1bHQgPSBpO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpIHtcbiAgdmFyIGlkQ291bnRNYXAgPSB7fTtcbiAgdmFyIGlkZW50aWZpZXJzID0gW107XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIGl0ZW0gPSBsaXN0W2ldO1xuICAgIHZhciBpZCA9IG9wdGlvbnMuYmFzZSA/IGl0ZW1bMF0gKyBvcHRpb25zLmJhc2UgOiBpdGVtWzBdO1xuICAgIHZhciBjb3VudCA9IGlkQ291bnRNYXBbaWRdIHx8IDA7XG4gICAgdmFyIGlkZW50aWZpZXIgPSBcIlwiLmNvbmNhdChpZCwgXCIgXCIpLmNvbmNhdChjb3VudCk7XG4gICAgaWRDb3VudE1hcFtpZF0gPSBjb3VudCArIDE7XG4gICAgdmFyIGluZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoaWRlbnRpZmllcik7XG4gICAgdmFyIG9iaiA9IHtcbiAgICAgIGNzczogaXRlbVsxXSxcbiAgICAgIG1lZGlhOiBpdGVtWzJdLFxuICAgICAgc291cmNlTWFwOiBpdGVtWzNdXG4gICAgfTtcblxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzKys7XG4gICAgICBzdHlsZXNJbkRvbVtpbmRleF0udXBkYXRlcihvYmopO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZXNJbkRvbS5wdXNoKHtcbiAgICAgICAgaWRlbnRpZmllcjogaWRlbnRpZmllcixcbiAgICAgICAgdXBkYXRlcjogYWRkU3R5bGUob2JqLCBvcHRpb25zKSxcbiAgICAgICAgcmVmZXJlbmNlczogMVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWRlbnRpZmllcnMucHVzaChpZGVudGlmaWVyKTtcbiAgfVxuXG4gIHJldHVybiBpZGVudGlmaWVycztcbn1cblxuZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpIHtcbiAgdmFyIHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTtcbiAgdmFyIGF0dHJpYnV0ZXMgPSBvcHRpb25zLmF0dHJpYnV0ZXMgfHwge307XG5cbiAgaWYgKHR5cGVvZiBhdHRyaWJ1dGVzLm5vbmNlID09PSAndW5kZWZpbmVkJykge1xuICAgIHZhciBub25jZSA9IHR5cGVvZiBfX3dlYnBhY2tfbm9uY2VfXyAhPT0gJ3VuZGVmaW5lZCcgPyBfX3dlYnBhY2tfbm9uY2VfXyA6IG51bGw7XG5cbiAgICBpZiAobm9uY2UpIHtcbiAgICAgIGF0dHJpYnV0ZXMubm9uY2UgPSBub25jZTtcbiAgICB9XG4gIH1cblxuICBPYmplY3Qua2V5cyhhdHRyaWJ1dGVzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHtcbiAgICBzdHlsZS5zZXRBdHRyaWJ1dGUoa2V5LCBhdHRyaWJ1dGVzW2tleV0pO1xuICB9KTtcblxuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgb3B0aW9ucy5pbnNlcnQoc3R5bGUpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YXJnZXQgPSBnZXRUYXJnZXQob3B0aW9ucy5pbnNlcnQgfHwgJ2hlYWQnKTtcblxuICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJDb3VsZG4ndCBmaW5kIGEgc3R5bGUgdGFyZ2V0LiBUaGlzIHByb2JhYmx5IG1lYW5zIHRoYXQgdGhlIHZhbHVlIGZvciB0aGUgJ2luc2VydCcgcGFyYW1ldGVyIGlzIGludmFsaWQuXCIpO1xuICAgIH1cblxuICAgIHRhcmdldC5hcHBlbmRDaGlsZChzdHlsZSk7XG4gIH1cblxuICByZXR1cm4gc3R5bGU7XG59XG5cbmZ1bmN0aW9uIHJlbW92ZVN0eWxlRWxlbWVudChzdHlsZSkge1xuICAvLyBpc3RhbmJ1bCBpZ25vcmUgaWZcbiAgaWYgKHN0eWxlLnBhcmVudE5vZGUgPT09IG51bGwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdHlsZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlKTtcbn1cbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICAqL1xuXG5cbnZhciByZXBsYWNlVGV4dCA9IGZ1bmN0aW9uIHJlcGxhY2VUZXh0KCkge1xuICB2YXIgdGV4dFN0b3JlID0gW107XG4gIHJldHVybiBmdW5jdGlvbiByZXBsYWNlKGluZGV4LCByZXBsYWNlbWVudCkge1xuICAgIHRleHRTdG9yZVtpbmRleF0gPSByZXBsYWNlbWVudDtcbiAgICByZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcbiAgfTtcbn0oKTtcblxuZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZSwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG4gIHZhciBjc3MgPSByZW1vdmUgPyAnJyA6IG9iai5tZWRpYSA/IFwiQG1lZGlhIFwiLmNvbmNhdChvYmoubWVkaWEsIFwiIHtcIikuY29uY2F0KG9iai5jc3MsIFwifVwiKSA6IG9iai5jc3M7IC8vIEZvciBvbGQgSUVcblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgICovXG5cbiAgaWYgKHN0eWxlLnN0eWxlU2hlZXQpIHtcbiAgICBzdHlsZS5zdHlsZVNoZWV0LmNzc1RleHQgPSByZXBsYWNlVGV4dChpbmRleCwgY3NzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3NzTm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcyk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSBzdHlsZS5jaGlsZE5vZGVzO1xuXG4gICAgaWYgKGNoaWxkTm9kZXNbaW5kZXhdKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG4gICAgfVxuXG4gICAgaWYgKGNoaWxkTm9kZXMubGVuZ3RoKSB7XG4gICAgICBzdHlsZS5pbnNlcnRCZWZvcmUoY3NzTm9kZSwgY2hpbGROb2Rlc1tpbmRleF0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdHlsZS5hcHBlbmRDaGlsZChjc3NOb2RlKTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZSwgb3B0aW9ucywgb2JqKSB7XG4gIHZhciBjc3MgPSBvYmouY3NzO1xuICB2YXIgbWVkaWEgPSBvYmoubWVkaWE7XG4gIHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXG4gIGlmIChtZWRpYSkge1xuICAgIHN0eWxlLnNldEF0dHJpYnV0ZSgnbWVkaWEnLCBtZWRpYSk7XG4gIH0gZWxzZSB7XG4gICAgc3R5bGUucmVtb3ZlQXR0cmlidXRlKCdtZWRpYScpO1xuICB9XG5cbiAgaWYgKHNvdXJjZU1hcCAmJiBidG9hKSB7XG4gICAgY3NzICs9IFwiXFxuLyojIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxcIi5jb25jYXQoYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSwgXCIgKi9cIik7XG4gIH0gLy8gRm9yIG9sZCBJRVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAgKi9cblxuXG4gIGlmIChzdHlsZS5zdHlsZVNoZWV0KSB7XG4gICAgc3R5bGUuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuICB9IGVsc2Uge1xuICAgIHdoaWxlIChzdHlsZS5maXJzdENoaWxkKSB7XG4gICAgICBzdHlsZS5yZW1vdmVDaGlsZChzdHlsZS5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICBzdHlsZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpKTtcbiAgfVxufVxuXG52YXIgc2luZ2xldG9uID0gbnVsbDtcbnZhciBzaW5nbGV0b25Db3VudGVyID0gMDtcblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG4gIHZhciBzdHlsZTtcbiAgdmFyIHVwZGF0ZTtcbiAgdmFyIHJlbW92ZTtcblxuICBpZiAob3B0aW9ucy5zaW5nbGV0b24pIHtcbiAgICB2YXIgc3R5bGVJbmRleCA9IHNpbmdsZXRvbkNvdW50ZXIrKztcbiAgICBzdHlsZSA9IHNpbmdsZXRvbiB8fCAoc2luZ2xldG9uID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcbiAgICB1cGRhdGUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIGZhbHNlKTtcbiAgICByZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGUsIHN0eWxlSW5kZXgsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHN0eWxlID0gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMpO1xuICAgIHVwZGF0ZSA9IGFwcGx5VG9UYWcuYmluZChudWxsLCBzdHlsZSwgb3B0aW9ucyk7XG5cbiAgICByZW1vdmUgPSBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgICByZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGUpO1xuICAgIH07XG4gIH1cblxuICB1cGRhdGUob2JqKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuICAgIGlmIChuZXdPYmopIHtcbiAgICAgIGlmIChuZXdPYmouY3NzID09PSBvYmouY3NzICYmIG5ld09iai5tZWRpYSA9PT0gb2JqLm1lZGlhICYmIG5ld09iai5zb3VyY2VNYXAgPT09IG9iai5zb3VyY2VNYXApIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGUob2JqID0gbmV3T2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKCk7XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChsaXN0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9OyAvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cbiAgLy8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXG4gIGlmICghb3B0aW9ucy5zaW5nbGV0b24gJiYgdHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uICE9PSAnYm9vbGVhbicpIHtcbiAgICBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcbiAgfVxuXG4gIGxpc3QgPSBsaXN0IHx8IFtdO1xuICB2YXIgbGFzdElkZW50aWZpZXJzID0gbW9kdWxlc1RvRG9tKGxpc3QsIG9wdGlvbnMpO1xuICByZXR1cm4gZnVuY3Rpb24gdXBkYXRlKG5ld0xpc3QpIHtcbiAgICBuZXdMaXN0ID0gbmV3TGlzdCB8fCBbXTtcblxuICAgIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobmV3TGlzdCkgIT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxhc3RJZGVudGlmaWVycy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIGlkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbaV07XG4gICAgICB2YXIgaW5kZXggPSBnZXRJbmRleEJ5SWRlbnRpZmllcihpZGVudGlmaWVyKTtcbiAgICAgIHN0eWxlc0luRG9tW2luZGV4XS5yZWZlcmVuY2VzLS07XG4gICAgfVxuXG4gICAgdmFyIG5ld0xhc3RJZGVudGlmaWVycyA9IG1vZHVsZXNUb0RvbShuZXdMaXN0LCBvcHRpb25zKTtcblxuICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBsYXN0SWRlbnRpZmllcnMubGVuZ3RoOyBfaSsrKSB7XG4gICAgICB2YXIgX2lkZW50aWZpZXIgPSBsYXN0SWRlbnRpZmllcnNbX2ldO1xuXG4gICAgICB2YXIgX2luZGV4ID0gZ2V0SW5kZXhCeUlkZW50aWZpZXIoX2lkZW50aWZpZXIpO1xuXG4gICAgICBpZiAoc3R5bGVzSW5Eb21bX2luZGV4XS5yZWZlcmVuY2VzID09PSAwKSB7XG4gICAgICAgIHN0eWxlc0luRG9tW19pbmRleF0udXBkYXRlcigpO1xuXG4gICAgICAgIHN0eWxlc0luRG9tLnNwbGljZShfaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxhc3RJZGVudGlmaWVycyA9IG5ld0xhc3RJZGVudGlmaWVycztcbiAgfTtcbn07IiwibW9kdWxlLmV4cG9ydHMgPSBtbDU7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgUmVhY3QsIHsgdXNlQ29udGV4dCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcbnZhciBUaGVtZUNvbnRleHQgPSBSZWFjdC5jcmVhdGVDb250ZXh0KHt9KTtcbnZhciBDb25zdW1lciA9IFRoZW1lQ29udGV4dC5Db25zdW1lcixcbiAgICBQcm92aWRlciA9IFRoZW1lQ29udGV4dC5Qcm92aWRlcjtcblxuZnVuY3Rpb24gVGhlbWVQcm92aWRlcihfcmVmKSB7XG4gIHZhciBwcmVmaXhlcyA9IF9yZWYucHJlZml4ZXMsXG4gICAgICBjaGlsZHJlbiA9IF9yZWYuY2hpbGRyZW47XG4gIHZhciBjb3BpZWRQcmVmaXhlcyA9IHVzZU1lbW8oZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBfZXh0ZW5kcyh7fSwgcHJlZml4ZXMpO1xuICB9LCBbcHJlZml4ZXNdKTtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFByb3ZpZGVyLCB7XG4gICAgdmFsdWU6IGNvcGllZFByZWZpeGVzXG4gIH0sIGNoaWxkcmVuKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUJvb3RzdHJhcFByZWZpeChwcmVmaXgsIGRlZmF1bHRQcmVmaXgpIHtcbiAgdmFyIHByZWZpeGVzID0gdXNlQ29udGV4dChUaGVtZUNvbnRleHQpO1xuICByZXR1cm4gcHJlZml4IHx8IHByZWZpeGVzW2RlZmF1bHRQcmVmaXhdIHx8IGRlZmF1bHRQcmVmaXg7XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUJvb3RzdHJhcENvbXBvbmVudChDb21wb25lbnQsIG9wdHMpIHtcbiAgaWYgKHR5cGVvZiBvcHRzID09PSAnc3RyaW5nJykgb3B0cyA9IHtcbiAgICBwcmVmaXg6IG9wdHNcbiAgfTtcbiAgdmFyIGlzQ2xhc3N5ID0gQ29tcG9uZW50LnByb3RvdHlwZSAmJiBDb21wb25lbnQucHJvdG90eXBlLmlzUmVhY3RDb21wb25lbnQ7IC8vIElmIGl0J3MgYSBmdW5jdGlvbmFsIGNvbXBvbmVudCBtYWtlIHN1cmUgd2UgZG9uJ3QgYnJlYWsgaXQgd2l0aCBhIHJlZlxuXG4gIHZhciBfb3B0cyA9IG9wdHMsXG4gICAgICBwcmVmaXggPSBfb3B0cy5wcmVmaXgsXG4gICAgICBfb3B0cyRmb3J3YXJkUmVmQXMgPSBfb3B0cy5mb3J3YXJkUmVmQXMsXG4gICAgICBmb3J3YXJkUmVmQXMgPSBfb3B0cyRmb3J3YXJkUmVmQXMgPT09IHZvaWQgMCA/IGlzQ2xhc3N5ID8gJ3JlZicgOiAnaW5uZXJSZWYnIDogX29wdHMkZm9yd2FyZFJlZkFzO1xuICB2YXIgV3JhcHBlZCA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKF9yZWYyLCByZWYpIHtcbiAgICB2YXIgcHJvcHMgPSBfZXh0ZW5kcyh7fSwgX3JlZjIpO1xuXG4gICAgcHJvcHNbZm9yd2FyZFJlZkFzXSA9IHJlZjtcbiAgICB2YXIgYnNQcmVmaXggPSB1c2VCb290c3RyYXBQcmVmaXgocHJvcHMuYnNQcmVmaXgsIHByZWZpeCk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe30sIHByb3BzLCB7XG4gICAgICBic1ByZWZpeDogYnNQcmVmaXhcbiAgICB9KSk7XG4gIH0pO1xuICBXcmFwcGVkLmRpc3BsYXlOYW1lID0gXCJCb290c3RyYXAoXCIgKyAoQ29tcG9uZW50LmRpc3BsYXlOYW1lIHx8IENvbXBvbmVudC5uYW1lKSArIFwiKVwiO1xuICByZXR1cm4gV3JhcHBlZDtcbn1cblxuZXhwb3J0IHsgY3JlYXRlQm9vdHN0cmFwQ29tcG9uZW50LCBDb25zdW1lciBhcyBUaGVtZUNvbnN1bWVyIH07XG5leHBvcnQgZGVmYXVsdCBUaGVtZVByb3ZpZGVyOyIsIi8qKlxuICogU2FmZSBjaGFpbmVkIGZ1bmN0aW9uXG4gKlxuICogV2lsbCBvbmx5IGNyZWF0ZSBhIG5ldyBmdW5jdGlvbiBpZiBuZWVkZWQsXG4gKiBvdGhlcndpc2Ugd2lsbCBwYXNzIGJhY2sgZXhpc3RpbmcgZnVuY3Rpb25zIG9yIG51bGwuXG4gKlxuICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY3Rpb25zIHRvIGNoYWluXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb258bnVsbH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2hhaW5lZEZ1bmN0aW9uKCkge1xuICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgZnVuY3MgPSBuZXcgQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG4gICAgZnVuY3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICByZXR1cm4gZnVuY3MuZmlsdGVyKGZ1bmN0aW9uIChmKSB7XG4gICAgcmV0dXJuIGYgIT0gbnVsbDtcbiAgfSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGYpIHtcbiAgICBpZiAodHlwZW9mIGYgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBBcmd1bWVudCBUeXBlLCBtdXN0IG9ubHkgcHJvdmlkZSBmdW5jdGlvbnMsIHVuZGVmaW5lZCwgb3IgbnVsbC4nKTtcbiAgICB9XG5cbiAgICBpZiAoYWNjID09PSBudWxsKSByZXR1cm4gZjtcbiAgICByZXR1cm4gZnVuY3Rpb24gY2hhaW5lZEZ1bmN0aW9uKCkge1xuICAgICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4yKSwgX2tleTIgPSAwOyBfa2V5MiA8IF9sZW4yOyBfa2V5MisrKSB7XG4gICAgICAgIGFyZ3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICAgIH1cblxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgYWNjLmFwcGx5KHRoaXMsIGFyZ3MpOyAvLyBAdHMtaWdub3JlXG5cbiAgICAgIGYuYXBwbHkodGhpcywgYXJncyk7XG4gICAgfTtcbiAgfSwgbnVsbCk7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNoYWluZWRGdW5jdGlvbjsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZVwiO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjcmVhdGVDaGFpbmVkRnVuY3Rpb24gZnJvbSAnLi9jcmVhdGVDaGFpbmVkRnVuY3Rpb24nO1xuXG5mdW5jdGlvbiBpc1RyaXZpYWxIcmVmKGhyZWYpIHtcbiAgcmV0dXJuICFocmVmIHx8IGhyZWYudHJpbSgpID09PSAnIyc7XG59XG4vKipcbiAqIFRoZXJlIGFyZSBzaXR1YXRpb25zIGR1ZSB0byBicm93c2VyIHF1aXJrcyBvciBCb290c3RyYXAgQ1NTIHdoZXJlXG4gKiBhbiBhbmNob3IgdGFnIGlzIG5lZWRlZCwgd2hlbiBzZW1hbnRpY2FsbHkgYSBidXR0b24gdGFnIGlzIHRoZVxuICogYmV0dGVyIGNob2ljZS4gU2FmZUFuY2hvciBlbnN1cmVzIHRoYXQgd2hlbiBhbiBhbmNob3IgaXMgdXNlZCBsaWtlIGFcbiAqIGJ1dHRvbiBpdHMgYWNjZXNzaWJsZS4gSXQgYWxzbyBlbXVsYXRlcyBpbnB1dCBgZGlzYWJsZWRgIGJlaGF2aW9yIGZvclxuICogbGlua3MsIHdoaWNoIGlzIHVzdWFsbHkgZGVzaXJhYmxlIGZvciBCdXR0b25zLCBOYXZJdGVtcywgRHJvcGRvd25JdGVtcywgZXRjLlxuICovXG5cblxudmFyIFNhZmVBbmNob3IgPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmLCByZWYpIHtcbiAgdmFyIF9yZWYkYXMgPSBfcmVmLmFzLFxuICAgICAgQ29tcG9uZW50ID0gX3JlZiRhcyA9PT0gdm9pZCAwID8gJ2EnIDogX3JlZiRhcyxcbiAgICAgIGRpc2FibGVkID0gX3JlZi5kaXNhYmxlZCxcbiAgICAgIG9uS2V5RG93biA9IF9yZWYub25LZXlEb3duLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJhc1wiLCBcImRpc2FibGVkXCIsIFwib25LZXlEb3duXCJdKTtcblxuICB2YXIgaGFuZGxlQ2xpY2sgPSBmdW5jdGlvbiBoYW5kbGVDbGljayhldmVudCkge1xuICAgIHZhciBocmVmID0gcHJvcHMuaHJlZixcbiAgICAgICAgb25DbGljayA9IHByb3BzLm9uQ2xpY2s7XG5cbiAgICBpZiAoZGlzYWJsZWQgfHwgaXNUcml2aWFsSHJlZihocmVmKSkge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9XG5cbiAgICBpZiAoZGlzYWJsZWQpIHtcbiAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChvbkNsaWNrKSB7XG4gICAgICBvbkNsaWNrKGV2ZW50KTtcbiAgICB9XG4gIH07XG5cbiAgdmFyIGhhbmRsZUtleURvd24gPSBmdW5jdGlvbiBoYW5kbGVLZXlEb3duKGV2ZW50KSB7XG4gICAgaWYgKGV2ZW50LmtleSA9PT0gJyAnKSB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgaGFuZGxlQ2xpY2soZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBpZiAoaXNUcml2aWFsSHJlZihwcm9wcy5ocmVmKSkge1xuICAgIHByb3BzLnJvbGUgPSBwcm9wcy5yb2xlIHx8ICdidXR0b24nOyAvLyB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB0aGVyZSBpcyBhIGhyZWYgYXR0cmlidXRlIG9uIHRoZSBub2RlXG4gICAgLy8gb3RoZXJ3aXNlLCB0aGUgY3Vyc29yIGluY29ycmVjdGx5IHN0eWxlZCAoZXhjZXB0IHdpdGggcm9sZT0nYnV0dG9uJylcblxuICAgIHByb3BzLmhyZWYgPSBwcm9wcy5ocmVmIHx8ICcjJztcbiAgfVxuXG4gIGlmIChkaXNhYmxlZCkge1xuICAgIHByb3BzLnRhYkluZGV4ID0gLTE7XG4gICAgcHJvcHNbJ2FyaWEtZGlzYWJsZWQnXSA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoQ29tcG9uZW50LCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWZcbiAgfSwgcHJvcHMsIHtcbiAgICBvbkNsaWNrOiBoYW5kbGVDbGljayxcbiAgICBvbktleURvd246IGNyZWF0ZUNoYWluZWRGdW5jdGlvbihoYW5kbGVLZXlEb3duLCBvbktleURvd24pXG4gIH0pKTtcbn0pO1xuU2FmZUFuY2hvci5kaXNwbGF5TmFtZSA9ICdTYWZlQW5jaG9yJztcbmV4cG9ydCBkZWZhdWx0IFNhZmVBbmNob3I7IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUJvb3RzdHJhcFByZWZpeCB9IGZyb20gJy4vVGhlbWVQcm92aWRlcic7XG5pbXBvcnQgU2FmZUFuY2hvciBmcm9tICcuL1NhZmVBbmNob3InO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgdmFyaWFudDogJ3ByaW1hcnknLFxuICBhY3RpdmU6IGZhbHNlLFxuICBkaXNhYmxlZDogZmFsc2Vcbn07XG52YXIgQnV0dG9uID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBic1ByZWZpeCA9IF9yZWYuYnNQcmVmaXgsXG4gICAgICB2YXJpYW50ID0gX3JlZi52YXJpYW50LFxuICAgICAgc2l6ZSA9IF9yZWYuc2l6ZSxcbiAgICAgIGFjdGl2ZSA9IF9yZWYuYWN0aXZlLFxuICAgICAgY2xhc3NOYW1lID0gX3JlZi5jbGFzc05hbWUsXG4gICAgICBibG9jayA9IF9yZWYuYmxvY2ssXG4gICAgICB0eXBlID0gX3JlZi50eXBlLFxuICAgICAgYXMgPSBfcmVmLmFzLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJic1ByZWZpeFwiLCBcInZhcmlhbnRcIiwgXCJzaXplXCIsIFwiYWN0aXZlXCIsIFwiY2xhc3NOYW1lXCIsIFwiYmxvY2tcIiwgXCJ0eXBlXCIsIFwiYXNcIl0pO1xuXG4gIHZhciBwcmVmaXggPSB1c2VCb290c3RyYXBQcmVmaXgoYnNQcmVmaXgsICdidG4nKTtcbiAgdmFyIGNsYXNzZXMgPSBjbGFzc05hbWVzKGNsYXNzTmFtZSwgcHJlZml4LCBhY3RpdmUgJiYgJ2FjdGl2ZScsIHByZWZpeCArIFwiLVwiICsgdmFyaWFudCwgYmxvY2sgJiYgcHJlZml4ICsgXCItYmxvY2tcIiwgc2l6ZSAmJiBwcmVmaXggKyBcIi1cIiArIHNpemUpO1xuXG4gIGlmIChwcm9wcy5ocmVmKSB7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFNhZmVBbmNob3IsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgICAgYXM6IGFzLFxuICAgICAgcmVmOiByZWYsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NlcywgcHJvcHMuZGlzYWJsZWQgJiYgJ2Rpc2FibGVkJylcbiAgICB9KSk7XG4gIH1cblxuICBpZiAocmVmKSB7XG4gICAgcHJvcHMucmVmID0gcmVmO1xuICB9XG5cbiAgaWYgKHR5cGUpIHtcbiAgICBwcm9wcy50eXBlID0gdHlwZTtcbiAgfSBlbHNlIGlmICghYXMpIHtcbiAgICBwcm9wcy50eXBlID0gJ2J1dHRvbic7XG4gIH1cblxuICB2YXIgQ29tcG9uZW50ID0gYXMgfHwgJ2J1dHRvbic7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHt9LCBwcm9wcywge1xuICAgIGNsYXNzTmFtZTogY2xhc3Nlc1xuICB9KSk7XG59KTtcbkJ1dHRvbi5kaXNwbGF5TmFtZSA9ICdCdXR0b24nO1xuQnV0dG9uLmRlZmF1bHRQcm9wcyA9IGRlZmF1bHRQcm9wcztcbmV4cG9ydCBkZWZhdWx0IEJ1dHRvbjsiLCJleHBvcnQgY29uc3QgZ2V0TG9nZ2VyID0gKCkgPT4gY29uc29sZTtcbiIsImNvbnN0IG5vdGVzOiBzdHJpbmdbXSA9IFtcbiAgXCJBXCIsIC8vIDIxXG4gIFwiQuKZrVwiLCAvLyAyMlxuICBcIkJcIiwgLy8gMjNcbiAgXCJDXCIsIC8vIDI0XG4gIFwiQ+KZr1wiLCAvLyAyNVxuICBcIkRcIiwgLy8gMjZcbiAgXCJE4pmvXCIsIC8vIDI3XG4gIFwiRVwiLCAvLyAyOFxuICBcIkZcIiwgLy8gMjlcbiAgXCJG4pmvXCIsIC8vIDMwXG4gIFwiR1wiLCAvLyAzMVxuICBcIkfima9cIiwgLy8gMzJcbl07XG5jb25zdCBuYW1lID0gKG5vdGU6IG51bWJlcik6IHN0cmluZyA9PiBub3Rlc1sobm90ZSAtIDIxKSAlIDEyXTtcbmNvbnN0IG9jdGF2ZSA9IChub3RlOiBudW1iZXIpOiBudW1iZXIgPT4gTWF0aC5mbG9vcihub3RlIC8gMTIgLSAxKTtcblxuY29uc3Qgbm90ZVRvRnJlcSA9IChub3RlOiBudW1iZXIpOiBudW1iZXIgPT5cbiAgNDQwICogTWF0aC5wb3coMiwgKG5vdGUgLSA2OSkgLyAxMik7XG5cbmNvbnN0IGZyZXFUb05vdGUgPSAoZnJlcTogbnVtYmVyKTogbnVtYmVyID0+IDY5ICsgMTIgKiBNYXRoLmxvZzIoZnJlcSAvIDQ0MCk7XG5cbmNvbnN0IGRpZmYgPSAoYTogbnVtYmVyLCBiOiBudW1iZXIpOiBudW1iZXIgPT4gMTIwMCAqIE1hdGgubG9nMihiIC8gYSk7XG5cbmNsYXNzIE5vdGUge1xuICByZWFkb25seSBmcmVxdWVuY3k6IG51bWJlcjtcbiAgcmVhZG9ubHkgbm90ZTogbnVtYmVyO1xuICByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gIHJlYWRvbmx5IG9jdGF2ZTogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHByaXZhdGUgcmVhZG9ubHkgX2ZyZXE6IG51bWJlcikge1xuICAgIHRoaXMubm90ZSA9IE1hdGgucm91bmQoZnJlcVRvTm90ZShfZnJlcSkpO1xuXG4gICAgdGhpcy5mcmVxdWVuY3kgPSBub3RlVG9GcmVxKHRoaXMubm90ZSk7XG4gICAgdGhpcy5uYW1lID0gbmFtZSh0aGlzLm5vdGUpO1xuICAgIHRoaXMub2N0YXZlID0gb2N0YXZlKHRoaXMubm90ZSk7XG4gIH1cbn1cblxudHlwZSBQaXRjaCA9IHtcbiAgdGFyZ2V0OiBOb3RlO1xuICBub3RlOiBudW1iZXI7XG4gIGZyZXF1ZW5jeTogbnVtYmVyO1xuICBkaWZmOiBudW1iZXI7XG59O1xuXG5jb25zdCBub3RlID0gKGZyZXE/OiBudW1iZXIgfCBudWxsKTogUGl0Y2ggfCB1bmRlZmluZWQgPT4ge1xuICBpZiAoZnJlcSA9PT0gdW5kZWZpbmVkIHx8IGZyZXEgPT09IG51bGwpIHJldHVybjtcblxuICBjb25zdCBuID0gbmV3IE5vdGUoZnJlcSk7XG4gIHJldHVybiB7XG4gICAgZnJlcXVlbmN5OiBmcmVxLFxuICAgIHRhcmdldDogbixcbiAgICBub3RlOiBmcmVxVG9Ob3RlKGZyZXEpLFxuICAgIGRpZmY6IGRpZmYobi5mcmVxdWVuY3ksIGZyZXEpLFxuICB9O1xufTtcblxuZXhwb3J0IHsgbmFtZSwgb2N0YXZlLCBub3RlLCBOb3RlLCBQaXRjaCwgZnJlcVRvTm90ZSwgbm90ZVRvRnJlcSwgZGlmZiB9O1xuIiwiaW1wb3J0IFwibWw1XCI7XG5cbmltcG9ydCB7IG5vdGUsIFBpdGNoIH0gZnJvbSBcInBpdGNoL25vdGVzXCI7XG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tIFwibG9nXCI7XG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcblxuZXhwb3J0IHR5cGUgU2FtcGxlID0gUGl0Y2ggfCB1bmRlZmluZWQ7XG5leHBvcnQgdHlwZSBSZWNvcmRpbmcgPSBTYW1wbGVbXTtcblxudHlwZSBQaXRjaEdlbmVyYXRvciA9IEFzeW5jR2VuZXJhdG9yPFNhbXBsZT47XG5cbmNvbnN0IE1PREVMX1VSTCA9XG4gIFwiaHR0cHM6Ly9jZG4uanNkZWxpdnIubmV0L2doL21sNWpzL21sNS1kYXRhLWFuZC1tb2RlbHMvbW9kZWxzL3BpdGNoLWRldGVjdGlvbi9jcmVwZS9cIjtcblxuYXN5bmMgZnVuY3Rpb24qIG1sNVBpdGNoRGV0ZWN0aW9uKFxuICBjdHg6IEF1ZGlvQ29udGV4dCxcbiAgc3RyZWFtOiBNZWRpYVN0cmVhbVxuKTogUGl0Y2hHZW5lcmF0b3Ige1xuICBjb25zdCBwaXRjaERldGVjdGlvbjogYW55ID0gbWw1LnBpdGNoRGV0ZWN0aW9uKE1PREVMX1VSTCwgY3R4LCBzdHJlYW0pO1xuICBMT0cuaW5mbyhcIkNyZWF0ZWQgcGl0Y2ggZGV0ZWN0aW9uLlwiLCBwaXRjaERldGVjdGlvbik7XG4gIFxuICBhd2FpdCBwaXRjaERldGVjdGlvbi5yZWFkeTtcbiAgTE9HLmluZm8oXCJJbml0aWFsaXplZCB0aGUgbW9kZWwuXCIpO1xuXG4gIHdoaWxlIChzdHJlYW0uYWN0aXZlICYmIGN0eC5zdGF0ZSA9PT0gXCJydW5uaW5nXCIpIHtcbiAgICBjb25zdCBwaXRjaCA9IGF3YWl0IHBpdGNoRGV0ZWN0aW9uLmdldFBpdGNoKCk7XG4gICAgaWYgKHBpdGNoID09PSBudWxsKSB7XG4gICAgICBMT0cuZGVidWcoXCJTa2lwcGluZ1wiKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHlpZWxkIG5vdGUocGl0Y2gpO1xuICB9XG5cbiAgcmV0dXJuO1xufVxuXG5leHBvcnQgeyBQaXRjaEdlbmVyYXRvciwgbWw1UGl0Y2hEZXRlY3Rpb24gfTtcbiIsImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QsIHVzZVN0YXRlIH0gZnJvbSBcInJlYWN0XCI7XG5cbnR5cGUgR2VuZXJhdG9yQ29tcG9uZW50UHJvcHM8VD4gPSB7XG4gIGdlbmVyYXRvcjogQXN5bmNHZW5lcmF0b3I8VCB8IHVuZGVmaW5lZCwgYW55LCBhbnk+O1xuICBjaGlsZHJlbjogYW55O1xuICBvblRpY2s/OiAodDogVCB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbn07XG5cbmZ1bmN0aW9uIEdlbmVyYXRvckNvbXBvbmVudDxUPihwcm9wczogR2VuZXJhdG9yQ29tcG9uZW50UHJvcHM8VD4pIHtcbiAgY29uc3QgW2ZsYWcsIHNldEZsYWddID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbY3VycmVudFZhbHVlLCBzZXRDdXJyZW50VmFsdWVdID0gdXNlU3RhdGU8VCB8IHVuZGVmaW5lZD4oKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGxldCBtb3VudGVkID0gdHJ1ZTtcblxuICAgIHByb3BzLmdlbmVyYXRvci5uZXh0KCkudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICBpZiAocmVzdWx0LmRvbmUgfHwgIW1vdW50ZWQpIHJldHVybjtcblxuICAgICAgc2V0Q3VycmVudFZhbHVlKHJlc3VsdC52YWx1ZSk7XG4gICAgICBzZXRGbGFnKCFmbGFnKTtcbiAgICB9KTtcblxuICAgIHJldHVybiAoKSA9PiB7XG4gICAgICBtb3VudGVkID0gZmFsc2U7XG4gICAgfTtcbiAgfSwgW2ZsYWddKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChwcm9wcy5vblRpY2sgJiYgY3VycmVudFZhbHVlKSB7XG4gICAgICBwcm9wcy5vblRpY2soY3VycmVudFZhbHVlKTtcbiAgICB9XG4gIH0sIFtjdXJyZW50VmFsdWVdKTtcblxuICBpZiAodHlwZW9mIHByb3BzLmNoaWxkcmVuID09PSBcImZ1bmN0aW9uXCIpIHtcbiAgICByZXR1cm4gcHJvcHMuY2hpbGRyZW4oY3VycmVudFZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gcHJvcHMuY2hpbGRyZW47XG4gIH1cbn1cblxuZXhwb3J0IHsgR2VuZXJhdG9yQ29tcG9uZW50IH07XG4iLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZVwiO1xuaW1wb3J0IGNsYXNzTmFtZXMgZnJvbSAnY2xhc3NuYW1lcyc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQm9vdHN0cmFwUHJlZml4IH0gZnJvbSAnLi9UaGVtZVByb3ZpZGVyJztcbnZhciBTcGlubmVyID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBic1ByZWZpeCA9IF9yZWYuYnNQcmVmaXgsXG4gICAgICB2YXJpYW50ID0gX3JlZi52YXJpYW50LFxuICAgICAgYW5pbWF0aW9uID0gX3JlZi5hbmltYXRpb24sXG4gICAgICBzaXplID0gX3JlZi5zaXplLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgX3JlZiRhcyA9IF9yZWYuYXMsXG4gICAgICBDb21wb25lbnQgPSBfcmVmJGFzID09PSB2b2lkIDAgPyAnZGl2JyA6IF9yZWYkYXMsXG4gICAgICBjbGFzc05hbWUgPSBfcmVmLmNsYXNzTmFtZSxcbiAgICAgIHByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3JlZiwgW1wiYnNQcmVmaXhcIiwgXCJ2YXJpYW50XCIsIFwiYW5pbWF0aW9uXCIsIFwic2l6ZVwiLCBcImNoaWxkcmVuXCIsIFwiYXNcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIGJzUHJlZml4ID0gdXNlQm9vdHN0cmFwUHJlZml4KGJzUHJlZml4LCAnc3Bpbm5lcicpO1xuICB2YXIgYnNTcGlubmVyUHJlZml4ID0gYnNQcmVmaXggKyBcIi1cIiArIGFuaW1hdGlvbjtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENvbXBvbmVudCwgX2V4dGVuZHMoe1xuICAgIHJlZjogcmVmXG4gIH0sIHByb3BzLCB7XG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzTmFtZSwgYnNTcGlubmVyUHJlZml4LCBzaXplICYmIGJzU3Bpbm5lclByZWZpeCArIFwiLVwiICsgc2l6ZSwgdmFyaWFudCAmJiBcInRleHQtXCIgKyB2YXJpYW50KVxuICB9KSwgY2hpbGRyZW4pO1xufSk7XG5TcGlubmVyLmRpc3BsYXlOYW1lID0gJ1NwaW5uZXInO1xuZXhwb3J0IGRlZmF1bHQgU3Bpbm5lcjsiLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuXG5pbXBvcnQgeyBQaXRjaEdlbmVyYXRvciwgU2FtcGxlIH0gZnJvbSBcInBpdGNoL3BpdGNoXCI7XG5cbmltcG9ydCB7IEdlbmVyYXRvckNvbXBvbmVudCB9IGZyb20gXCIuL0dlbmVyYXRvckNvbXBvbmVudFwiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuaW1wb3J0IHsgU3Bpbm5lciB9IGZyb20gXCJyZWFjdC1ib290c3RyYXBcIjtcblxuY29uc3QgTE9HID0gZ2V0TG9nZ2VyKCk7XG5cbnR5cGUgUmVjb3JkaW5nID0gU2FtcGxlW107XG50eXBlIFBpdGNoUmVjb3JkZXJQcm9wcyA9IHtcbiAgcGl0Y2hHZW5lcmF0b3I/OiBQaXRjaEdlbmVyYXRvcjtcbiAgdGltZW91dE1zOiBudW1iZXI7XG4gIG9uRmluaXNoOiAoc2FtcGxlczogUmVjb3JkaW5nKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIFBpdGNoUmVjb3JkZXIoe1xuICBwaXRjaEdlbmVyYXRvcixcbiAgdGltZW91dE1zLFxuICBvbkZpbmlzaCxcbn06IFBpdGNoUmVjb3JkZXJQcm9wcykge1xuICBjb25zdCBbcmVjb3JkaW5nLCBzZXRSZWNvcmRpbmddID0gdXNlU3RhdGU8UmVjb3JkaW5nPihbXSk7XG4gIGNvbnN0IFtzdGFydGVkLCBzZXRTdGFydGVkXSA9IHVzZVN0YXRlKGZhbHNlKTtcbiAgY29uc3QgW2ZpbmlzaGVkLCBzZXRGaW5pc2hlZF0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoIXN0YXJ0ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgTE9HLmluZm8oXCJTZXR0aW5nIHVwIHRoZSB0aW1lb3V0LlwiKTtcbiAgICBjb25zdCB0ID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICBzZXRGaW5pc2hlZCh0cnVlKTtcbiAgICAgIHNldFN0YXJ0ZWQoZmFsc2UpO1xuICAgIH0sIHRpbWVvdXRNcyk7XG5cbiAgICBMT0cuaW5mbyhcIlNldCB1cCB0aW1lciAlZCBmb3IgJWQgbXMuXCIsIHQsIHRpbWVvdXRNcyk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgTE9HLmluZm8oXCJDbGVhcmluZyBvdXQgdGhlIHRpbWVvdXQgJWQuXCIsIHQpO1xuICAgICAgY2xlYXJUaW1lb3V0KHQpO1xuICAgIH07XG4gIH0sIFtzdGFydGVkXSk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBpZiAoZmluaXNoZWQpIHtcbiAgICAgIExPRy5pbmZvKFwiRmluaXNoaW5nIHJlY29yZGluZy5cIik7XG4gICAgICBvbkZpbmlzaChyZWNvcmRpbmcpO1xuICAgIH1cbiAgfSwgW2ZpbmlzaGVkLCByZWNvcmRpbmddKTtcblxuICBjb25zdCBhZGRTYW1wbGUgPSAocDogU2FtcGxlKSA9PiB7XG4gICAgY29uc3QgbmV3UmVjb3JkaW5nID0gcmVjb3JkaW5nLmNvbmNhdChbcF0pO1xuICAgIHNldFJlY29yZGluZyhuZXdSZWNvcmRpbmcpO1xuICAgIGlmICghc3RhcnRlZCkge1xuICAgICAgc2V0U3RhcnRlZCh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgbGFiZWwgPSAhc3RhcnRlZCA/IChcbiAgICA8c3Bhbj5zaW5nIG5vdyE8L3NwYW4+XG4gICkgOiAoXG4gICAgPFNwaW5uZXIgYW5pbWF0aW9uPVwiZ3Jvd1wiIHZhcmlhbnQ9XCJkYW5nZXJcIiAvPlxuICApO1xuXG4gIHJldHVybiBwaXRjaEdlbmVyYXRvciA/IChcbiAgICA8R2VuZXJhdG9yQ29tcG9uZW50IGdlbmVyYXRvcj17cGl0Y2hHZW5lcmF0b3J9IG9uVGljaz17YWRkU2FtcGxlfT5cbiAgICAgIDxoMz57bGFiZWx9PC9oMz5cbiAgICA8L0dlbmVyYXRvckNvbXBvbmVudD5cbiAgKSA6IChcbiAgICA8U3Bpbm5lciBhbmltYXRpb249XCJib3JkZXJcIiB2YXJpYW50PVwicHJpbWFyeVwiIC8+XG4gICk7XG59XG4iLCJpbXBvcnQgY2FuVXNlRE9NIGZyb20gJy4vY2FuVXNlRE9NJztcbmltcG9ydCBjc3MgZnJvbSAnLi9jc3MnO1xuaW1wb3J0IGxpc3RlbiBmcm9tICcuL2xpc3Rlbic7XG5leHBvcnQgdmFyIFRSQU5TSVRJT05fU1VQUE9SVEVEID0gY2FuVXNlRE9NICYmICdvbnRyYW5zaXRpb25lbmQnIGluIHdpbmRvdztcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZUR1cmF0aW9uKG5vZGUpIHtcbiAgdmFyIHN0ciA9IGNzcyhub2RlLCAndHJhbnNpdGlvbkR1cmF0aW9uJykgfHwgJyc7XG4gIHZhciBtdWx0ID0gc3RyLmluZGV4T2YoJ21zJykgPT09IC0xID8gMTAwMCA6IDE7XG4gIHJldHVybiBwYXJzZUZsb2F0KHN0cikgKiBtdWx0O1xufVxuXG5mdW5jdGlvbiB0cmlnZ2VyVHJhbnNpdGlvbkVuZChlbGVtZW50KSB7XG4gIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICBldnQuaW5pdEV2ZW50KCd0cmFuc2l0aW9uZW5kJywgdHJ1ZSwgdHJ1ZSk7XG4gIGVsZW1lbnQuZGlzcGF0Y2hFdmVudChldnQpO1xufVxuXG5mdW5jdGlvbiBlbXVsYXRlVHJhbnNpdGlvbkVuZChlbGVtZW50LCBkdXJhdGlvbiwgcGFkZGluZykge1xuICBpZiAocGFkZGluZyA9PT0gdm9pZCAwKSB7XG4gICAgcGFkZGluZyA9IDU7XG4gIH1cblxuICB2YXIgY2FsbGVkID0gZmFsc2U7XG4gIHZhciBoYW5kbGUgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIWNhbGxlZCkgdHJpZ2dlclRyYW5zaXRpb25FbmQoZWxlbWVudCk7XG4gIH0sIGR1cmF0aW9uICsgcGFkZGluZyk7XG4gIHZhciByZW1vdmUgPSBsaXN0ZW4oZWxlbWVudCwgJ3RyYW5zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgY2FsbGVkID0gdHJ1ZTtcbiAgfSwge1xuICAgIG9uY2U6IHRydWVcbiAgfSk7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XG4gICAgcmVtb3ZlKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHRyYW5zaXRpb25FbmQoZWxlbWVudCwgaGFuZGxlciwgZHVyYXRpb24pIHtcbiAgaWYgKGR1cmF0aW9uID09IG51bGwpIGR1cmF0aW9uID0gcGFyc2VEdXJhdGlvbihlbGVtZW50KSB8fCAwO1xuICB2YXIgcmVtb3ZlRW11bGF0ZSA9IGVtdWxhdGVUcmFuc2l0aW9uRW5kKGVsZW1lbnQsIGR1cmF0aW9uKTtcbiAgdmFyIHJlbW92ZSA9IGxpc3RlbihlbGVtZW50LCAndHJhbnNpdGlvbmVuZCcsIGhhbmRsZXIpO1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZUVtdWxhdGUoKTtcbiAgICByZW1vdmUoKTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgdHJhbnNpdGlvbkVuZDsiLCJleHBvcnQgZGVmYXVsdCB7XG4gIGRpc2FibGVkOiBmYWxzZVxufTsiLCJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuZXhwb3J0IGRlZmF1bHQgUmVhY3QuY3JlYXRlQ29udGV4dChudWxsKTsiLCJpbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBfaW5oZXJpdHNMb29zZSBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHNMb29zZVwiO1xuaW1wb3J0IFByb3BUeXBlcyBmcm9tICdwcm9wLXR5cGVzJztcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgUmVhY3RET00gZnJvbSAncmVhY3QtZG9tJztcbmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnO1xuaW1wb3J0IHsgdGltZW91dHNTaGFwZSB9IGZyb20gJy4vdXRpbHMvUHJvcFR5cGVzJztcbmltcG9ydCBUcmFuc2l0aW9uR3JvdXBDb250ZXh0IGZyb20gJy4vVHJhbnNpdGlvbkdyb3VwQ29udGV4dCc7XG5leHBvcnQgdmFyIFVOTU9VTlRFRCA9ICd1bm1vdW50ZWQnO1xuZXhwb3J0IHZhciBFWElURUQgPSAnZXhpdGVkJztcbmV4cG9ydCB2YXIgRU5URVJJTkcgPSAnZW50ZXJpbmcnO1xuZXhwb3J0IHZhciBFTlRFUkVEID0gJ2VudGVyZWQnO1xuZXhwb3J0IHZhciBFWElUSU5HID0gJ2V4aXRpbmcnO1xuLyoqXG4gKiBUaGUgVHJhbnNpdGlvbiBjb21wb25lbnQgbGV0cyB5b3UgZGVzY3JpYmUgYSB0cmFuc2l0aW9uIGZyb20gb25lIGNvbXBvbmVudFxuICogc3RhdGUgdG8gYW5vdGhlciBfb3ZlciB0aW1lXyB3aXRoIGEgc2ltcGxlIGRlY2xhcmF0aXZlIEFQSS4gTW9zdCBjb21tb25seVxuICogaXQncyB1c2VkIHRvIGFuaW1hdGUgdGhlIG1vdW50aW5nIGFuZCB1bm1vdW50aW5nIG9mIGEgY29tcG9uZW50LCBidXQgY2FuIGFsc29cbiAqIGJlIHVzZWQgdG8gZGVzY3JpYmUgaW4tcGxhY2UgdHJhbnNpdGlvbiBzdGF0ZXMgYXMgd2VsbC5cbiAqXG4gKiAtLS1cbiAqXG4gKiAqKk5vdGUqKjogYFRyYW5zaXRpb25gIGlzIGEgcGxhdGZvcm0tYWdub3N0aWMgYmFzZSBjb21wb25lbnQuIElmIHlvdSdyZSB1c2luZ1xuICogdHJhbnNpdGlvbnMgaW4gQ1NTLCB5b3UnbGwgcHJvYmFibHkgd2FudCB0byB1c2VcbiAqIFtgQ1NTVHJhbnNpdGlvbmBdKGh0dHBzOi8vcmVhY3Rjb21tdW5pdHkub3JnL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvY3NzLXRyYW5zaXRpb24pXG4gKiBpbnN0ZWFkLiBJdCBpbmhlcml0cyBhbGwgdGhlIGZlYXR1cmVzIG9mIGBUcmFuc2l0aW9uYCwgYnV0IGNvbnRhaW5zXG4gKiBhZGRpdGlvbmFsIGZlYXR1cmVzIG5lY2Vzc2FyeSB0byBwbGF5IG5pY2Ugd2l0aCBDU1MgdHJhbnNpdGlvbnMgKGhlbmNlIHRoZVxuICogbmFtZSBvZiB0aGUgY29tcG9uZW50KS5cbiAqXG4gKiAtLS1cbiAqXG4gKiBCeSBkZWZhdWx0IHRoZSBgVHJhbnNpdGlvbmAgY29tcG9uZW50IGRvZXMgbm90IGFsdGVyIHRoZSBiZWhhdmlvciBvZiB0aGVcbiAqIGNvbXBvbmVudCBpdCByZW5kZXJzLCBpdCBvbmx5IHRyYWNrcyBcImVudGVyXCIgYW5kIFwiZXhpdFwiIHN0YXRlcyBmb3IgdGhlXG4gKiBjb21wb25lbnRzLiBJdCdzIHVwIHRvIHlvdSB0byBnaXZlIG1lYW5pbmcgYW5kIGVmZmVjdCB0byB0aG9zZSBzdGF0ZXMuIEZvclxuICogZXhhbXBsZSB3ZSBjYW4gYWRkIHN0eWxlcyB0byBhIGNvbXBvbmVudCB3aGVuIGl0IGVudGVycyBvciBleGl0czpcbiAqXG4gKiBgYGBqc3hcbiAqIGltcG9ydCB7IFRyYW5zaXRpb24gfSBmcm9tICdyZWFjdC10cmFuc2l0aW9uLWdyb3VwJztcbiAqXG4gKiBjb25zdCBkdXJhdGlvbiA9IDMwMDtcbiAqXG4gKiBjb25zdCBkZWZhdWx0U3R5bGUgPSB7XG4gKiAgIHRyYW5zaXRpb246IGBvcGFjaXR5ICR7ZHVyYXRpb259bXMgZWFzZS1pbi1vdXRgLFxuICogICBvcGFjaXR5OiAwLFxuICogfVxuICpcbiAqIGNvbnN0IHRyYW5zaXRpb25TdHlsZXMgPSB7XG4gKiAgIGVudGVyaW5nOiB7IG9wYWNpdHk6IDEgfSxcbiAqICAgZW50ZXJlZDogIHsgb3BhY2l0eTogMSB9LFxuICogICBleGl0aW5nOiAgeyBvcGFjaXR5OiAwIH0sXG4gKiAgIGV4aXRlZDogIHsgb3BhY2l0eTogMCB9LFxuICogfTtcbiAqXG4gKiBjb25zdCBGYWRlID0gKHsgaW46IGluUHJvcCB9KSA9PiAoXG4gKiAgIDxUcmFuc2l0aW9uIGluPXtpblByb3B9IHRpbWVvdXQ9e2R1cmF0aW9ufT5cbiAqICAgICB7c3RhdGUgPT4gKFxuICogICAgICAgPGRpdiBzdHlsZT17e1xuICogICAgICAgICAuLi5kZWZhdWx0U3R5bGUsXG4gKiAgICAgICAgIC4uLnRyYW5zaXRpb25TdHlsZXNbc3RhdGVdXG4gKiAgICAgICB9fT5cbiAqICAgICAgICAgSSdtIGEgZmFkZSBUcmFuc2l0aW9uIVxuICogICAgICAgPC9kaXY+XG4gKiAgICAgKX1cbiAqICAgPC9UcmFuc2l0aW9uPlxuICogKTtcbiAqIGBgYFxuICpcbiAqIFRoZXJlIGFyZSA0IG1haW4gc3RhdGVzIGEgVHJhbnNpdGlvbiBjYW4gYmUgaW46XG4gKiAgLSBgJ2VudGVyaW5nJ2BcbiAqICAtIGAnZW50ZXJlZCdgXG4gKiAgLSBgJ2V4aXRpbmcnYFxuICogIC0gYCdleGl0ZWQnYFxuICpcbiAqIFRyYW5zaXRpb24gc3RhdGUgaXMgdG9nZ2xlZCB2aWEgdGhlIGBpbmAgcHJvcC4gV2hlbiBgdHJ1ZWAgdGhlIGNvbXBvbmVudFxuICogYmVnaW5zIHRoZSBcIkVudGVyXCIgc3RhZ2UuIER1cmluZyB0aGlzIHN0YWdlLCB0aGUgY29tcG9uZW50IHdpbGwgc2hpZnQgZnJvbVxuICogaXRzIGN1cnJlbnQgdHJhbnNpdGlvbiBzdGF0ZSwgdG8gYCdlbnRlcmluZydgIGZvciB0aGUgZHVyYXRpb24gb2YgdGhlXG4gKiB0cmFuc2l0aW9uIGFuZCB0aGVuIHRvIHRoZSBgJ2VudGVyZWQnYCBzdGFnZSBvbmNlIGl0J3MgY29tcGxldGUuIExldCdzIHRha2VcbiAqIHRoZSBmb2xsb3dpbmcgZXhhbXBsZSAod2UnbGwgdXNlIHRoZVxuICogW3VzZVN0YXRlXShodHRwczovL3JlYWN0anMub3JnL2RvY3MvaG9va3MtcmVmZXJlbmNlLmh0bWwjdXNlc3RhdGUpIGhvb2spOlxuICpcbiAqIGBgYGpzeFxuICogZnVuY3Rpb24gQXBwKCkge1xuICogICBjb25zdCBbaW5Qcm9wLCBzZXRJblByb3BdID0gdXNlU3RhdGUoZmFsc2UpO1xuICogICByZXR1cm4gKFxuICogICAgIDxkaXY+XG4gKiAgICAgICA8VHJhbnNpdGlvbiBpbj17aW5Qcm9wfSB0aW1lb3V0PXs1MDB9PlxuICogICAgICAgICB7c3RhdGUgPT4gKFxuICogICAgICAgICAgIC8vIC4uLlxuICogICAgICAgICApfVxuICogICAgICAgPC9UcmFuc2l0aW9uPlxuICogICAgICAgPGJ1dHRvbiBvbkNsaWNrPXsoKSA9PiBzZXRJblByb3AodHJ1ZSl9PlxuICogICAgICAgICBDbGljayB0byBFbnRlclxuICogICAgICAgPC9idXR0b24+XG4gKiAgICAgPC9kaXY+XG4gKiAgICk7XG4gKiB9XG4gKiBgYGBcbiAqXG4gKiBXaGVuIHRoZSBidXR0b24gaXMgY2xpY2tlZCB0aGUgY29tcG9uZW50IHdpbGwgc2hpZnQgdG8gdGhlIGAnZW50ZXJpbmcnYCBzdGF0ZVxuICogYW5kIHN0YXkgdGhlcmUgZm9yIDUwMG1zICh0aGUgdmFsdWUgb2YgYHRpbWVvdXRgKSBiZWZvcmUgaXQgZmluYWxseSBzd2l0Y2hlc1xuICogdG8gYCdlbnRlcmVkJ2AuXG4gKlxuICogV2hlbiBgaW5gIGlzIGBmYWxzZWAgdGhlIHNhbWUgdGhpbmcgaGFwcGVucyBleGNlcHQgdGhlIHN0YXRlIG1vdmVzIGZyb21cbiAqIGAnZXhpdGluZydgIHRvIGAnZXhpdGVkJ2AuXG4gKi9cblxudmFyIFRyYW5zaXRpb24gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKF9SZWFjdCRDb21wb25lbnQpIHtcbiAgX2luaGVyaXRzTG9vc2UoVHJhbnNpdGlvbiwgX1JlYWN0JENvbXBvbmVudCk7XG5cbiAgZnVuY3Rpb24gVHJhbnNpdGlvbihwcm9wcywgY29udGV4dCkge1xuICAgIHZhciBfdGhpcztcblxuICAgIF90aGlzID0gX1JlYWN0JENvbXBvbmVudC5jYWxsKHRoaXMsIHByb3BzLCBjb250ZXh0KSB8fCB0aGlzO1xuICAgIHZhciBwYXJlbnRHcm91cCA9IGNvbnRleHQ7IC8vIEluIHRoZSBjb250ZXh0IG9mIGEgVHJhbnNpdGlvbkdyb3VwIGFsbCBlbnRlcnMgYXJlIHJlYWxseSBhcHBlYXJzXG5cbiAgICB2YXIgYXBwZWFyID0gcGFyZW50R3JvdXAgJiYgIXBhcmVudEdyb3VwLmlzTW91bnRpbmcgPyBwcm9wcy5lbnRlciA6IHByb3BzLmFwcGVhcjtcbiAgICB2YXIgaW5pdGlhbFN0YXR1cztcbiAgICBfdGhpcy5hcHBlYXJTdGF0dXMgPSBudWxsO1xuXG4gICAgaWYgKHByb3BzLmluKSB7XG4gICAgICBpZiAoYXBwZWFyKSB7XG4gICAgICAgIGluaXRpYWxTdGF0dXMgPSBFWElURUQ7XG4gICAgICAgIF90aGlzLmFwcGVhclN0YXR1cyA9IEVOVEVSSU5HO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdGlhbFN0YXR1cyA9IEVOVEVSRUQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwcm9wcy51bm1vdW50T25FeGl0IHx8IHByb3BzLm1vdW50T25FbnRlcikge1xuICAgICAgICBpbml0aWFsU3RhdHVzID0gVU5NT1VOVEVEO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaW5pdGlhbFN0YXR1cyA9IEVYSVRFRDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfdGhpcy5zdGF0ZSA9IHtcbiAgICAgIHN0YXR1czogaW5pdGlhbFN0YXR1c1xuICAgIH07XG4gICAgX3RoaXMubmV4dENhbGxiYWNrID0gbnVsbDtcbiAgICByZXR1cm4gX3RoaXM7XG4gIH1cblxuICBUcmFuc2l0aW9uLmdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyA9IGZ1bmN0aW9uIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhfcmVmLCBwcmV2U3RhdGUpIHtcbiAgICB2YXIgbmV4dEluID0gX3JlZi5pbjtcblxuICAgIGlmIChuZXh0SW4gJiYgcHJldlN0YXRlLnN0YXR1cyA9PT0gVU5NT1VOVEVEKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdGF0dXM6IEVYSVRFRFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfSAvLyBnZXRTbmFwc2hvdEJlZm9yZVVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgLy8gICBsZXQgbmV4dFN0YXR1cyA9IG51bGxcbiAgLy8gICBpZiAocHJldlByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gIC8vICAgICBjb25zdCB7IHN0YXR1cyB9ID0gdGhpcy5zdGF0ZVxuICAvLyAgICAgaWYgKHRoaXMucHJvcHMuaW4pIHtcbiAgLy8gICAgICAgaWYgKHN0YXR1cyAhPT0gRU5URVJJTkcgJiYgc3RhdHVzICE9PSBFTlRFUkVEKSB7XG4gIC8vICAgICAgICAgbmV4dFN0YXR1cyA9IEVOVEVSSU5HXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH0gZWxzZSB7XG4gIC8vICAgICAgIGlmIChzdGF0dXMgPT09IEVOVEVSSU5HIHx8IHN0YXR1cyA9PT0gRU5URVJFRCkge1xuICAvLyAgICAgICAgIG5leHRTdGF0dXMgPSBFWElUSU5HXG4gIC8vICAgICAgIH1cbiAgLy8gICAgIH1cbiAgLy8gICB9XG4gIC8vICAgcmV0dXJuIHsgbmV4dFN0YXR1cyB9XG4gIC8vIH1cbiAgO1xuXG4gIHZhciBfcHJvdG8gPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblxuICBfcHJvdG8uY29tcG9uZW50RGlkTW91bnQgPSBmdW5jdGlvbiBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyh0cnVlLCB0aGlzLmFwcGVhclN0YXR1cyk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uIGNvbXBvbmVudERpZFVwZGF0ZShwcmV2UHJvcHMpIHtcbiAgICB2YXIgbmV4dFN0YXR1cyA9IG51bGw7XG5cbiAgICBpZiAocHJldlByb3BzICE9PSB0aGlzLnByb3BzKSB7XG4gICAgICB2YXIgc3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXM7XG5cbiAgICAgIGlmICh0aGlzLnByb3BzLmluKSB7XG4gICAgICAgIGlmIChzdGF0dXMgIT09IEVOVEVSSU5HICYmIHN0YXR1cyAhPT0gRU5URVJFRCkge1xuICAgICAgICAgIG5leHRTdGF0dXMgPSBFTlRFUklORztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKHN0YXR1cyA9PT0gRU5URVJJTkcgfHwgc3RhdHVzID09PSBFTlRFUkVEKSB7XG4gICAgICAgICAgbmV4dFN0YXR1cyA9IEVYSVRJTkc7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhmYWxzZSwgbmV4dFN0YXR1cyk7XG4gIH07XG5cbiAgX3Byb3RvLmNvbXBvbmVudFdpbGxVbm1vdW50ID0gZnVuY3Rpb24gY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgdGhpcy5jYW5jZWxOZXh0Q2FsbGJhY2soKTtcbiAgfTtcblxuICBfcHJvdG8uZ2V0VGltZW91dHMgPSBmdW5jdGlvbiBnZXRUaW1lb3V0cygpIHtcbiAgICB2YXIgdGltZW91dCA9IHRoaXMucHJvcHMudGltZW91dDtcbiAgICB2YXIgZXhpdCwgZW50ZXIsIGFwcGVhcjtcbiAgICBleGl0ID0gZW50ZXIgPSBhcHBlYXIgPSB0aW1lb3V0O1xuXG4gICAgaWYgKHRpbWVvdXQgIT0gbnVsbCAmJiB0eXBlb2YgdGltZW91dCAhPT0gJ251bWJlcicpIHtcbiAgICAgIGV4aXQgPSB0aW1lb3V0LmV4aXQ7XG4gICAgICBlbnRlciA9IHRpbWVvdXQuZW50ZXI7IC8vIFRPRE86IHJlbW92ZSBmYWxsYmFjayBmb3IgbmV4dCBtYWpvclxuXG4gICAgICBhcHBlYXIgPSB0aW1lb3V0LmFwcGVhciAhPT0gdW5kZWZpbmVkID8gdGltZW91dC5hcHBlYXIgOiBlbnRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZXhpdDogZXhpdCxcbiAgICAgIGVudGVyOiBlbnRlcixcbiAgICAgIGFwcGVhcjogYXBwZWFyXG4gICAgfTtcbiAgfTtcblxuICBfcHJvdG8udXBkYXRlU3RhdHVzID0gZnVuY3Rpb24gdXBkYXRlU3RhdHVzKG1vdW50aW5nLCBuZXh0U3RhdHVzKSB7XG4gICAgaWYgKG1vdW50aW5nID09PSB2b2lkIDApIHtcbiAgICAgIG1vdW50aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKG5leHRTdGF0dXMgIT09IG51bGwpIHtcbiAgICAgIC8vIG5leHRTdGF0dXMgd2lsbCBhbHdheXMgYmUgRU5URVJJTkcgb3IgRVhJVElORy5cbiAgICAgIHRoaXMuY2FuY2VsTmV4dENhbGxiYWNrKCk7XG5cbiAgICAgIGlmIChuZXh0U3RhdHVzID09PSBFTlRFUklORykge1xuICAgICAgICB0aGlzLnBlcmZvcm1FbnRlcihtb3VudGluZyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBlcmZvcm1FeGl0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLnByb3BzLnVubW91bnRPbkV4aXQgJiYgdGhpcy5zdGF0ZS5zdGF0dXMgPT09IEVYSVRFRCkge1xuICAgICAgdGhpcy5zZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogVU5NT1VOVEVEXG4gICAgICB9KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnBlcmZvcm1FbnRlciA9IGZ1bmN0aW9uIHBlcmZvcm1FbnRlcihtb3VudGluZykge1xuICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gICAgdmFyIGVudGVyID0gdGhpcy5wcm9wcy5lbnRlcjtcbiAgICB2YXIgYXBwZWFyaW5nID0gdGhpcy5jb250ZXh0ID8gdGhpcy5jb250ZXh0LmlzTW91bnRpbmcgOiBtb3VudGluZztcblxuICAgIHZhciBfcmVmMiA9IHRoaXMucHJvcHMubm9kZVJlZiA/IFthcHBlYXJpbmddIDogW1JlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpLCBhcHBlYXJpbmddLFxuICAgICAgICBtYXliZU5vZGUgPSBfcmVmMlswXSxcbiAgICAgICAgbWF5YmVBcHBlYXJpbmcgPSBfcmVmMlsxXTtcblxuICAgIHZhciB0aW1lb3V0cyA9IHRoaXMuZ2V0VGltZW91dHMoKTtcbiAgICB2YXIgZW50ZXJUaW1lb3V0ID0gYXBwZWFyaW5nID8gdGltZW91dHMuYXBwZWFyIDogdGltZW91dHMuZW50ZXI7IC8vIG5vIGVudGVyIGFuaW1hdGlvbiBza2lwIHJpZ2h0IHRvIEVOVEVSRURcbiAgICAvLyBpZiB3ZSBhcmUgbW91bnRpbmcgYW5kIHJ1bm5pbmcgdGhpcyBpdCBtZWFucyBhcHBlYXIgX211c3RfIGJlIHNldFxuXG4gICAgaWYgKCFtb3VudGluZyAmJiAhZW50ZXIgfHwgY29uZmlnLmRpc2FibGVkKSB7XG4gICAgICB0aGlzLnNhZmVTZXRTdGF0ZSh7XG4gICAgICAgIHN0YXR1czogRU5URVJFRFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIucHJvcHMub25FbnRlcmVkKG1heWJlTm9kZSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnByb3BzLm9uRW50ZXIobWF5YmVOb2RlLCBtYXliZUFwcGVhcmluZyk7XG4gICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgc3RhdHVzOiBFTlRFUklOR1xuICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgIF90aGlzMi5wcm9wcy5vbkVudGVyaW5nKG1heWJlTm9kZSwgbWF5YmVBcHBlYXJpbmcpO1xuXG4gICAgICBfdGhpczIub25UcmFuc2l0aW9uRW5kKGVudGVyVGltZW91dCwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczIuc2FmZVNldFN0YXRlKHtcbiAgICAgICAgICBzdGF0dXM6IEVOVEVSRURcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMi5wcm9wcy5vbkVudGVyZWQobWF5YmVOb2RlLCBtYXliZUFwcGVhcmluZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH07XG5cbiAgX3Byb3RvLnBlcmZvcm1FeGl0ID0gZnVuY3Rpb24gcGVyZm9ybUV4aXQoKSB7XG4gICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICB2YXIgZXhpdCA9IHRoaXMucHJvcHMuZXhpdDtcbiAgICB2YXIgdGltZW91dHMgPSB0aGlzLmdldFRpbWVvdXRzKCk7XG4gICAgdmFyIG1heWJlTm9kZSA9IHRoaXMucHJvcHMubm9kZVJlZiA/IHVuZGVmaW5lZCA6IFJlYWN0RE9NLmZpbmRET01Ob2RlKHRoaXMpOyAvLyBubyBleGl0IGFuaW1hdGlvbiBza2lwIHJpZ2h0IHRvIEVYSVRFRFxuXG4gICAgaWYgKCFleGl0IHx8IGNvbmZpZy5kaXNhYmxlZCkge1xuICAgICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgICBzdGF0dXM6IEVYSVRFRFxuICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBfdGhpczMucHJvcHMub25FeGl0ZWQobWF5YmVOb2RlKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucHJvcHMub25FeGl0KG1heWJlTm9kZSk7XG4gICAgdGhpcy5zYWZlU2V0U3RhdGUoe1xuICAgICAgc3RhdHVzOiBFWElUSU5HXG4gICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgX3RoaXMzLnByb3BzLm9uRXhpdGluZyhtYXliZU5vZGUpO1xuXG4gICAgICBfdGhpczMub25UcmFuc2l0aW9uRW5kKHRpbWVvdXRzLmV4aXQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgX3RoaXMzLnNhZmVTZXRTdGF0ZSh7XG4gICAgICAgICAgc3RhdHVzOiBFWElURURcbiAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5wcm9wcy5vbkV4aXRlZChtYXliZU5vZGUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9O1xuXG4gIF9wcm90by5jYW5jZWxOZXh0Q2FsbGJhY2sgPSBmdW5jdGlvbiBjYW5jZWxOZXh0Q2FsbGJhY2soKSB7XG4gICAgaWYgKHRoaXMubmV4dENhbGxiYWNrICE9PSBudWxsKSB7XG4gICAgICB0aGlzLm5leHRDYWxsYmFjay5jYW5jZWwoKTtcbiAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gbnVsbDtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnNhZmVTZXRTdGF0ZSA9IGZ1bmN0aW9uIHNhZmVTZXRTdGF0ZShuZXh0U3RhdGUsIGNhbGxiYWNrKSB7XG4gICAgLy8gVGhpcyBzaG91bGRuJ3QgYmUgbmVjZXNzYXJ5LCBidXQgdGhlcmUgYXJlIHdlaXJkIHJhY2UgY29uZGl0aW9ucyB3aXRoXG4gICAgLy8gc2V0U3RhdGUgY2FsbGJhY2tzIGFuZCB1bm1vdW50aW5nIGluIHRlc3RpbmcsIHNvIGFsd2F5cyBtYWtlIHN1cmUgdGhhdFxuICAgIC8vIHdlIGNhbiBjYW5jZWwgYW55IHBlbmRpbmcgc2V0U3RhdGUgY2FsbGJhY2tzIGFmdGVyIHdlIHVubW91bnQuXG4gICAgY2FsbGJhY2sgPSB0aGlzLnNldE5leHRDYWxsYmFjayhjYWxsYmFjayk7XG4gICAgdGhpcy5zZXRTdGF0ZShuZXh0U3RhdGUsIGNhbGxiYWNrKTtcbiAgfTtcblxuICBfcHJvdG8uc2V0TmV4dENhbGxiYWNrID0gZnVuY3Rpb24gc2V0TmV4dENhbGxiYWNrKGNhbGxiYWNrKSB7XG4gICAgdmFyIF90aGlzNCA9IHRoaXM7XG5cbiAgICB2YXIgYWN0aXZlID0gdHJ1ZTtcblxuICAgIHRoaXMubmV4dENhbGxiYWNrID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICBpZiAoYWN0aXZlKSB7XG4gICAgICAgIGFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICBfdGhpczQubmV4dENhbGxiYWNrID0gbnVsbDtcbiAgICAgICAgY2FsbGJhY2soZXZlbnQpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLm5leHRDYWxsYmFjay5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBhY3RpdmUgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXMubmV4dENhbGxiYWNrO1xuICB9O1xuXG4gIF9wcm90by5vblRyYW5zaXRpb25FbmQgPSBmdW5jdGlvbiBvblRyYW5zaXRpb25FbmQodGltZW91dCwgaGFuZGxlcikge1xuICAgIHRoaXMuc2V0TmV4dENhbGxiYWNrKGhhbmRsZXIpO1xuICAgIHZhciBub2RlID0gdGhpcy5wcm9wcy5ub2RlUmVmID8gdGhpcy5wcm9wcy5ub2RlUmVmLmN1cnJlbnQgOiBSZWFjdERPTS5maW5kRE9NTm9kZSh0aGlzKTtcbiAgICB2YXIgZG9lc05vdEhhdmVUaW1lb3V0T3JMaXN0ZW5lciA9IHRpbWVvdXQgPT0gbnVsbCAmJiAhdGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcjtcblxuICAgIGlmICghbm9kZSB8fCBkb2VzTm90SGF2ZVRpbWVvdXRPckxpc3RlbmVyKSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMubmV4dENhbGxiYWNrLCAwKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcikge1xuICAgICAgdmFyIF9yZWYzID0gdGhpcy5wcm9wcy5ub2RlUmVmID8gW3RoaXMubmV4dENhbGxiYWNrXSA6IFtub2RlLCB0aGlzLm5leHRDYWxsYmFja10sXG4gICAgICAgICAgbWF5YmVOb2RlID0gX3JlZjNbMF0sXG4gICAgICAgICAgbWF5YmVOZXh0Q2FsbGJhY2sgPSBfcmVmM1sxXTtcblxuICAgICAgdGhpcy5wcm9wcy5hZGRFbmRMaXN0ZW5lcihtYXliZU5vZGUsIG1heWJlTmV4dENhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBpZiAodGltZW91dCAhPSBudWxsKSB7XG4gICAgICBzZXRUaW1lb3V0KHRoaXMubmV4dENhbGxiYWNrLCB0aW1lb3V0KTtcbiAgICB9XG4gIH07XG5cbiAgX3Byb3RvLnJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHtcbiAgICB2YXIgc3RhdHVzID0gdGhpcy5zdGF0ZS5zdGF0dXM7XG5cbiAgICBpZiAoc3RhdHVzID09PSBVTk1PVU5URUQpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBfdGhpcyRwcm9wcyA9IHRoaXMucHJvcHMsXG4gICAgICAgIGNoaWxkcmVuID0gX3RoaXMkcHJvcHMuY2hpbGRyZW4sXG4gICAgICAgIF9pbiA9IF90aGlzJHByb3BzLmluLFxuICAgICAgICBfbW91bnRPbkVudGVyID0gX3RoaXMkcHJvcHMubW91bnRPbkVudGVyLFxuICAgICAgICBfdW5tb3VudE9uRXhpdCA9IF90aGlzJHByb3BzLnVubW91bnRPbkV4aXQsXG4gICAgICAgIF9hcHBlYXIgPSBfdGhpcyRwcm9wcy5hcHBlYXIsXG4gICAgICAgIF9lbnRlciA9IF90aGlzJHByb3BzLmVudGVyLFxuICAgICAgICBfZXhpdCA9IF90aGlzJHByb3BzLmV4aXQsXG4gICAgICAgIF90aW1lb3V0ID0gX3RoaXMkcHJvcHMudGltZW91dCxcbiAgICAgICAgX2FkZEVuZExpc3RlbmVyID0gX3RoaXMkcHJvcHMuYWRkRW5kTGlzdGVuZXIsXG4gICAgICAgIF9vbkVudGVyID0gX3RoaXMkcHJvcHMub25FbnRlcixcbiAgICAgICAgX29uRW50ZXJpbmcgPSBfdGhpcyRwcm9wcy5vbkVudGVyaW5nLFxuICAgICAgICBfb25FbnRlcmVkID0gX3RoaXMkcHJvcHMub25FbnRlcmVkLFxuICAgICAgICBfb25FeGl0ID0gX3RoaXMkcHJvcHMub25FeGl0LFxuICAgICAgICBfb25FeGl0aW5nID0gX3RoaXMkcHJvcHMub25FeGl0aW5nLFxuICAgICAgICBfb25FeGl0ZWQgPSBfdGhpcyRwcm9wcy5vbkV4aXRlZCxcbiAgICAgICAgX25vZGVSZWYgPSBfdGhpcyRwcm9wcy5ub2RlUmVmLFxuICAgICAgICBjaGlsZFByb3BzID0gX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UoX3RoaXMkcHJvcHMsIFtcImNoaWxkcmVuXCIsIFwiaW5cIiwgXCJtb3VudE9uRW50ZXJcIiwgXCJ1bm1vdW50T25FeGl0XCIsIFwiYXBwZWFyXCIsIFwiZW50ZXJcIiwgXCJleGl0XCIsIFwidGltZW91dFwiLCBcImFkZEVuZExpc3RlbmVyXCIsIFwib25FbnRlclwiLCBcIm9uRW50ZXJpbmdcIiwgXCJvbkVudGVyZWRcIiwgXCJvbkV4aXRcIiwgXCJvbkV4aXRpbmdcIiwgXCJvbkV4aXRlZFwiLCBcIm5vZGVSZWZcIl0pO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIC8qI19fUFVSRV9fKi9cbiAgICAgIC8vIGFsbG93cyBmb3IgbmVzdGVkIFRyYW5zaXRpb25zXG4gICAgICBSZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zaXRpb25Hcm91cENvbnRleHQuUHJvdmlkZXIsIHtcbiAgICAgICAgdmFsdWU6IG51bGxcbiAgICAgIH0sIHR5cGVvZiBjaGlsZHJlbiA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkcmVuKHN0YXR1cywgY2hpbGRQcm9wcykgOiBSZWFjdC5jbG9uZUVsZW1lbnQoUmVhY3QuQ2hpbGRyZW4ub25seShjaGlsZHJlbiksIGNoaWxkUHJvcHMpKVxuICAgICk7XG4gIH07XG5cbiAgcmV0dXJuIFRyYW5zaXRpb247XG59KFJlYWN0LkNvbXBvbmVudCk7XG5cblRyYW5zaXRpb24uY29udGV4dFR5cGUgPSBUcmFuc2l0aW9uR3JvdXBDb250ZXh0O1xuVHJhbnNpdGlvbi5wcm9wVHlwZXMgPSBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIgPyB7XG4gIC8qKlxuICAgKiBBIFJlYWN0IHJlZmVyZW5jZSB0byBET00gZWxlbWVudCB0aGF0IG5lZWQgdG8gdHJhbnNpdGlvbjpcbiAgICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzUxMTI3MTMwLzQ2NzE5MzJcbiAgICpcbiAgICogICAtIFdoZW4gYG5vZGVSZWZgIHByb3AgaXMgdXNlZCwgYG5vZGVgIGlzIG5vdCBwYXNzZWQgdG8gY2FsbGJhY2sgZnVuY3Rpb25zXG4gICAqICAgICAgKGUuZy4gYG9uRW50ZXJgKSBiZWNhdXNlIHVzZXIgYWxyZWFkeSBoYXMgZGlyZWN0IGFjY2VzcyB0byB0aGUgbm9kZS5cbiAgICogICAtIFdoZW4gY2hhbmdpbmcgYGtleWAgcHJvcCBvZiBgVHJhbnNpdGlvbmAgaW4gYSBgVHJhbnNpdGlvbkdyb3VwYCBhIG5ld1xuICAgKiAgICAgYG5vZGVSZWZgIG5lZWQgdG8gYmUgcHJvdmlkZWQgdG8gYFRyYW5zaXRpb25gIHdpdGggY2hhbmdlZCBga2V5YCBwcm9wXG4gICAqICAgICAoc2VlXG4gICAqICAgICBbdGVzdC9DU1NUcmFuc2l0aW9uLXRlc3QuanNdKGh0dHBzOi8vZ2l0aHViLmNvbS9yZWFjdGpzL3JlYWN0LXRyYW5zaXRpb24tZ3JvdXAvYmxvYi8xMzQzNWY4OTdiM2FiNzFmNmUxOWQ3MjRmMTQ1NTk2ZjU5MTA1ODFjL3Rlc3QvQ1NTVHJhbnNpdGlvbi10ZXN0LmpzI0wzNjItTDQzNykpLlxuICAgKi9cbiAgbm9kZVJlZjogUHJvcFR5cGVzLnNoYXBlKHtcbiAgICBjdXJyZW50OiB0eXBlb2YgRWxlbWVudCA9PT0gJ3VuZGVmaW5lZCcgPyBQcm9wVHlwZXMuYW55IDogUHJvcFR5cGVzLmluc3RhbmNlT2YoRWxlbWVudClcbiAgfSksXG5cbiAgLyoqXG4gICAqIEEgYGZ1bmN0aW9uYCBjaGlsZCBjYW4gYmUgdXNlZCBpbnN0ZWFkIG9mIGEgUmVhY3QgZWxlbWVudC4gVGhpcyBmdW5jdGlvbiBpc1xuICAgKiBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCB0cmFuc2l0aW9uIHN0YXR1cyAoYCdlbnRlcmluZydgLCBgJ2VudGVyZWQnYCxcbiAgICogYCdleGl0aW5nJ2AsIGAnZXhpdGVkJ2ApLCB3aGljaCBjYW4gYmUgdXNlZCB0byBhcHBseSBjb250ZXh0XG4gICAqIHNwZWNpZmljIHByb3BzIHRvIGEgY29tcG9uZW50LlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogPFRyYW5zaXRpb24gaW49e3RoaXMuc3RhdGUuaW59IHRpbWVvdXQ9ezE1MH0+XG4gICAqICAge3N0YXRlID0+IChcbiAgICogICAgIDxNeUNvbXBvbmVudCBjbGFzc05hbWU9e2BmYWRlIGZhZGUtJHtzdGF0ZX1gfSAvPlxuICAgKiAgICl9XG4gICAqIDwvVHJhbnNpdGlvbj5cbiAgICogYGBgXG4gICAqL1xuICBjaGlsZHJlbjogUHJvcFR5cGVzLm9uZU9mVHlwZShbUHJvcFR5cGVzLmZ1bmMuaXNSZXF1aXJlZCwgUHJvcFR5cGVzLmVsZW1lbnQuaXNSZXF1aXJlZF0pLmlzUmVxdWlyZWQsXG5cbiAgLyoqXG4gICAqIFNob3cgdGhlIGNvbXBvbmVudDsgdHJpZ2dlcnMgdGhlIGVudGVyIG9yIGV4aXQgc3RhdGVzXG4gICAqL1xuICBpbjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEJ5IGRlZmF1bHQgdGhlIGNoaWxkIGNvbXBvbmVudCBpcyBtb3VudGVkIGltbWVkaWF0ZWx5IGFsb25nIHdpdGhcbiAgICogdGhlIHBhcmVudCBgVHJhbnNpdGlvbmAgY29tcG9uZW50LiBJZiB5b3Ugd2FudCB0byBcImxhenkgbW91bnRcIiB0aGUgY29tcG9uZW50IG9uIHRoZVxuICAgKiBmaXJzdCBgaW49e3RydWV9YCB5b3UgY2FuIHNldCBgbW91bnRPbkVudGVyYC4gQWZ0ZXIgdGhlIGZpcnN0IGVudGVyIHRyYW5zaXRpb24gdGhlIGNvbXBvbmVudCB3aWxsIHN0YXlcbiAgICogbW91bnRlZCwgZXZlbiBvbiBcImV4aXRlZFwiLCB1bmxlc3MgeW91IGFsc28gc3BlY2lmeSBgdW5tb3VudE9uRXhpdGAuXG4gICAqL1xuICBtb3VudE9uRW50ZXI6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBjaGlsZCBjb21wb25lbnQgc3RheXMgbW91bnRlZCBhZnRlciBpdCByZWFjaGVzIHRoZSBgJ2V4aXRlZCdgIHN0YXRlLlxuICAgKiBTZXQgYHVubW91bnRPbkV4aXRgIGlmIHlvdSdkIHByZWZlciB0byB1bm1vdW50IHRoZSBjb21wb25lbnQgYWZ0ZXIgaXQgZmluaXNoZXMgZXhpdGluZy5cbiAgICovXG4gIHVubW91bnRPbkV4aXQ6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0IHRoZSBjaGlsZCBjb21wb25lbnQgZG9lcyBub3QgcGVyZm9ybSB0aGUgZW50ZXIgdHJhbnNpdGlvbiB3aGVuXG4gICAqIGl0IGZpcnN0IG1vdW50cywgcmVnYXJkbGVzcyBvZiB0aGUgdmFsdWUgb2YgYGluYC4gSWYgeW91IHdhbnQgdGhpc1xuICAgKiBiZWhhdmlvciwgc2V0IGJvdGggYGFwcGVhcmAgYW5kIGBpbmAgdG8gYHRydWVgLlxuICAgKlxuICAgKiA+ICoqTm90ZSoqOiB0aGVyZSBhcmUgbm8gc3BlY2lhbCBhcHBlYXIgc3RhdGVzIGxpa2UgYGFwcGVhcmluZ2AvYGFwcGVhcmVkYCwgdGhpcyBwcm9wXG4gICAqID4gb25seSBhZGRzIGFuIGFkZGl0aW9uYWwgZW50ZXIgdHJhbnNpdGlvbi4gSG93ZXZlciwgaW4gdGhlXG4gICAqID4gYDxDU1NUcmFuc2l0aW9uPmAgY29tcG9uZW50IHRoYXQgZmlyc3QgZW50ZXIgdHJhbnNpdGlvbiBkb2VzIHJlc3VsdCBpblxuICAgKiA+IGFkZGl0aW9uYWwgYC5hcHBlYXItKmAgY2xhc3NlcywgdGhhdCB3YXkgeW91IGNhbiBjaG9vc2UgdG8gc3R5bGUgaXRcbiAgICogPiBkaWZmZXJlbnRseS5cbiAgICovXG4gIGFwcGVhcjogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIEVuYWJsZSBvciBkaXNhYmxlIGVudGVyIHRyYW5zaXRpb25zLlxuICAgKi9cbiAgZW50ZXI6IFByb3BUeXBlcy5ib29sLFxuXG4gIC8qKlxuICAgKiBFbmFibGUgb3IgZGlzYWJsZSBleGl0IHRyYW5zaXRpb25zLlxuICAgKi9cbiAgZXhpdDogUHJvcFR5cGVzLmJvb2wsXG5cbiAgLyoqXG4gICAqIFRoZSBkdXJhdGlvbiBvZiB0aGUgdHJhbnNpdGlvbiwgaW4gbWlsbGlzZWNvbmRzLlxuICAgKiBSZXF1aXJlZCB1bmxlc3MgYGFkZEVuZExpc3RlbmVyYCBpcyBwcm92aWRlZC5cbiAgICpcbiAgICogWW91IG1heSBzcGVjaWZ5IGEgc2luZ2xlIHRpbWVvdXQgZm9yIGFsbCB0cmFuc2l0aW9uczpcbiAgICpcbiAgICogYGBganN4XG4gICAqIHRpbWVvdXQ9ezUwMH1cbiAgICogYGBgXG4gICAqXG4gICAqIG9yIGluZGl2aWR1YWxseTpcbiAgICpcbiAgICogYGBganN4XG4gICAqIHRpbWVvdXQ9e3tcbiAgICogIGFwcGVhcjogNTAwLFxuICAgKiAgZW50ZXI6IDMwMCxcbiAgICogIGV4aXQ6IDUwMCxcbiAgICogfX1cbiAgICogYGBgXG4gICAqXG4gICAqIC0gYGFwcGVhcmAgZGVmYXVsdHMgdG8gdGhlIHZhbHVlIG9mIGBlbnRlcmBcbiAgICogLSBgZW50ZXJgIGRlZmF1bHRzIHRvIGAwYFxuICAgKiAtIGBleGl0YCBkZWZhdWx0cyB0byBgMGBcbiAgICpcbiAgICogQHR5cGUge251bWJlciB8IHsgZW50ZXI/OiBudW1iZXIsIGV4aXQ/OiBudW1iZXIsIGFwcGVhcj86IG51bWJlciB9fVxuICAgKi9cbiAgdGltZW91dDogZnVuY3Rpb24gdGltZW91dChwcm9wcykge1xuICAgIHZhciBwdCA9IHRpbWVvdXRzU2hhcGU7XG4gICAgaWYgKCFwcm9wcy5hZGRFbmRMaXN0ZW5lcikgcHQgPSBwdC5pc1JlcXVpcmVkO1xuXG4gICAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIGFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgICAgYXJnc1tfa2V5IC0gMV0gPSBhcmd1bWVudHNbX2tleV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHB0LmFwcGx5KHZvaWQgMCwgW3Byb3BzXS5jb25jYXQoYXJncykpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBBZGQgYSBjdXN0b20gdHJhbnNpdGlvbiBlbmQgdHJpZ2dlci4gQ2FsbGVkIHdpdGggdGhlIHRyYW5zaXRpb25pbmdcbiAgICogRE9NIG5vZGUgYW5kIGEgYGRvbmVgIGNhbGxiYWNrLiBBbGxvd3MgZm9yIG1vcmUgZmluZSBncmFpbmVkIHRyYW5zaXRpb24gZW5kXG4gICAqIGxvZ2ljLiBUaW1lb3V0cyBhcmUgc3RpbGwgdXNlZCBhcyBhIGZhbGxiYWNrIGlmIHByb3ZpZGVkLlxuICAgKlxuICAgKiAqKk5vdGUqKjogd2hlbiBgbm9kZVJlZmAgcHJvcCBpcyBwYXNzZWQsIGBub2RlYCBpcyBub3QgcGFzc2VkLlxuICAgKlxuICAgKiBgYGBqc3hcbiAgICogYWRkRW5kTGlzdGVuZXI9eyhub2RlLCBkb25lKSA9PiB7XG4gICAqICAgLy8gdXNlIHRoZSBjc3MgdHJhbnNpdGlvbmVuZCBldmVudCB0byBtYXJrIHRoZSBmaW5pc2ggb2YgYSB0cmFuc2l0aW9uXG4gICAqICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKCd0cmFuc2l0aW9uZW5kJywgZG9uZSwgZmFsc2UpO1xuICAgKiB9fVxuICAgKiBgYGBcbiAgICovXG4gIGFkZEVuZExpc3RlbmVyOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYmVmb3JlIHRoZSBcImVudGVyaW5nXCIgc3RhdHVzIGlzIGFwcGxpZWQuIEFuIGV4dHJhIHBhcmFtZXRlclxuICAgKiBgaXNBcHBlYXJpbmdgIGlzIHN1cHBsaWVkIHRvIGluZGljYXRlIGlmIHRoZSBlbnRlciBzdGFnZSBpcyBvY2N1cnJpbmcgb24gdGhlIGluaXRpYWwgbW91bnRcbiAgICpcbiAgICogKipOb3RlKio6IHdoZW4gYG5vZGVSZWZgIHByb3AgaXMgcGFzc2VkLCBgbm9kZWAgaXMgbm90IHBhc3NlZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQsIGlzQXBwZWFyaW5nOiBib29sKSAtPiB2b2lkXG4gICAqL1xuICBvbkVudGVyOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYWZ0ZXIgdGhlIFwiZW50ZXJpbmdcIiBzdGF0dXMgaXMgYXBwbGllZC4gQW4gZXh0cmEgcGFyYW1ldGVyXG4gICAqIGBpc0FwcGVhcmluZ2AgaXMgc3VwcGxpZWQgdG8gaW5kaWNhdGUgaWYgdGhlIGVudGVyIHN0YWdlIGlzIG9jY3VycmluZyBvbiB0aGUgaW5pdGlhbCBtb3VudFxuICAgKlxuICAgKiAqKk5vdGUqKjogd2hlbiBgbm9kZVJlZmAgcHJvcCBpcyBwYXNzZWQsIGBub2RlYCBpcyBub3QgcGFzc2VkLlxuICAgKlxuICAgKiBAdHlwZSBGdW5jdGlvbihub2RlOiBIdG1sRWxlbWVudCwgaXNBcHBlYXJpbmc6IGJvb2wpXG4gICAqL1xuICBvbkVudGVyaW5nOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYWZ0ZXIgdGhlIFwiZW50ZXJlZFwiIHN0YXR1cyBpcyBhcHBsaWVkLiBBbiBleHRyYSBwYXJhbWV0ZXJcbiAgICogYGlzQXBwZWFyaW5nYCBpcyBzdXBwbGllZCB0byBpbmRpY2F0ZSBpZiB0aGUgZW50ZXIgc3RhZ2UgaXMgb2NjdXJyaW5nIG9uIHRoZSBpbml0aWFsIG1vdW50XG4gICAqXG4gICAqICoqTm90ZSoqOiB3aGVuIGBub2RlUmVmYCBwcm9wIGlzIHBhc3NlZCwgYG5vZGVgIGlzIG5vdCBwYXNzZWQuXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50LCBpc0FwcGVhcmluZzogYm9vbCkgLT4gdm9pZFxuICAgKi9cbiAgb25FbnRlcmVkOiBQcm9wVHlwZXMuZnVuYyxcblxuICAvKipcbiAgICogQ2FsbGJhY2sgZmlyZWQgYmVmb3JlIHRoZSBcImV4aXRpbmdcIiBzdGF0dXMgaXMgYXBwbGllZC5cbiAgICpcbiAgICogKipOb3RlKio6IHdoZW4gYG5vZGVSZWZgIHByb3AgaXMgcGFzc2VkLCBgbm9kZWAgaXMgbm90IHBhc3NlZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpIC0+IHZvaWRcbiAgICovXG4gIG9uRXhpdDogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImV4aXRpbmdcIiBzdGF0dXMgaXMgYXBwbGllZC5cbiAgICpcbiAgICogKipOb3RlKio6IHdoZW4gYG5vZGVSZWZgIHByb3AgaXMgcGFzc2VkLCBgbm9kZWAgaXMgbm90IHBhc3NlZC5cbiAgICpcbiAgICogQHR5cGUgRnVuY3Rpb24obm9kZTogSHRtbEVsZW1lbnQpIC0+IHZvaWRcbiAgICovXG4gIG9uRXhpdGluZzogUHJvcFR5cGVzLmZ1bmMsXG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIGZpcmVkIGFmdGVyIHRoZSBcImV4aXRlZFwiIHN0YXR1cyBpcyBhcHBsaWVkLlxuICAgKlxuICAgKiAqKk5vdGUqKjogd2hlbiBgbm9kZVJlZmAgcHJvcCBpcyBwYXNzZWQsIGBub2RlYCBpcyBub3QgcGFzc2VkXG4gICAqXG4gICAqIEB0eXBlIEZ1bmN0aW9uKG5vZGU6IEh0bWxFbGVtZW50KSAtPiB2b2lkXG4gICAqL1xuICBvbkV4aXRlZDogUHJvcFR5cGVzLmZ1bmNcbn0gOiB7fTsgLy8gTmFtZSB0aGUgZnVuY3Rpb24gc28gaXQgaXMgY2xlYXJlciBpbiB0aGUgZG9jdW1lbnRhdGlvblxuXG5mdW5jdGlvbiBub29wKCkge31cblxuVHJhbnNpdGlvbi5kZWZhdWx0UHJvcHMgPSB7XG4gIGluOiBmYWxzZSxcbiAgbW91bnRPbkVudGVyOiBmYWxzZSxcbiAgdW5tb3VudE9uRXhpdDogZmFsc2UsXG4gIGFwcGVhcjogZmFsc2UsXG4gIGVudGVyOiB0cnVlLFxuICBleGl0OiB0cnVlLFxuICBvbkVudGVyOiBub29wLFxuICBvbkVudGVyaW5nOiBub29wLFxuICBvbkVudGVyZWQ6IG5vb3AsXG4gIG9uRXhpdDogbm9vcCxcbiAgb25FeGl0aW5nOiBub29wLFxuICBvbkV4aXRlZDogbm9vcFxufTtcblRyYW5zaXRpb24uVU5NT1VOVEVEID0gVU5NT1VOVEVEO1xuVHJhbnNpdGlvbi5FWElURUQgPSBFWElURUQ7XG5UcmFuc2l0aW9uLkVOVEVSSU5HID0gRU5URVJJTkc7XG5UcmFuc2l0aW9uLkVOVEVSRUQgPSBFTlRFUkVEO1xuVHJhbnNpdGlvbi5FWElUSU5HID0gRVhJVElORztcbmV4cG9ydCBkZWZhdWx0IFRyYW5zaXRpb247IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcblxudmFyIF9mYWRlU3R5bGVzO1xuXG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCB0cmFuc2l0aW9uRW5kIGZyb20gJ2RvbS1oZWxwZXJzL3RyYW5zaXRpb25FbmQnO1xuaW1wb3J0IFJlYWN0LCB7IHVzZUNhbGxiYWNrIH0gZnJvbSAncmVhY3QnO1xuaW1wb3J0IFRyYW5zaXRpb24sIHsgRU5URVJFRCwgRU5URVJJTkcgfSBmcm9tICdyZWFjdC10cmFuc2l0aW9uLWdyb3VwL1RyYW5zaXRpb24nO1xuaW1wb3J0IHRyaWdnZXJCcm93c2VyUmVmbG93IGZyb20gJy4vdHJpZ2dlckJyb3dzZXJSZWZsb3cnO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgaW46IGZhbHNlLFxuICB0aW1lb3V0OiAzMDAsXG4gIG1vdW50T25FbnRlcjogZmFsc2UsXG4gIHVubW91bnRPbkV4aXQ6IGZhbHNlLFxuICBhcHBlYXI6IGZhbHNlXG59O1xudmFyIGZhZGVTdHlsZXMgPSAoX2ZhZGVTdHlsZXMgPSB7fSwgX2ZhZGVTdHlsZXNbRU5URVJJTkddID0gJ3Nob3cnLCBfZmFkZVN0eWxlc1tFTlRFUkVEXSA9ICdzaG93JywgX2ZhZGVTdHlsZXMpO1xudmFyIEZhZGUgPSBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChfcmVmLCByZWYpIHtcbiAgdmFyIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4gPSBfcmVmLmNoaWxkcmVuLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJjbGFzc05hbWVcIiwgXCJjaGlsZHJlblwiXSk7XG5cbiAgdmFyIGhhbmRsZUVudGVyID0gdXNlQ2FsbGJhY2soZnVuY3Rpb24gKG5vZGUpIHtcbiAgICB0cmlnZ2VyQnJvd3NlclJlZmxvdyhub2RlKTtcbiAgICBpZiAocHJvcHMub25FbnRlcikgcHJvcHMub25FbnRlcihub2RlKTtcbiAgfSwgW3Byb3BzXSk7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChUcmFuc2l0aW9uLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgYWRkRW5kTGlzdGVuZXI6IHRyYW5zaXRpb25FbmRcbiAgfSwgcHJvcHMsIHtcbiAgICBvbkVudGVyOiBoYW5kbGVFbnRlclxuICB9KSwgZnVuY3Rpb24gKHN0YXR1cywgaW5uZXJQcm9wcykge1xuICAgIHJldHVybiBSZWFjdC5jbG9uZUVsZW1lbnQoY2hpbGRyZW4sIF9leHRlbmRzKHt9LCBpbm5lclByb3BzLCB7XG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2ZhZGUnLCBjbGFzc05hbWUsIGNoaWxkcmVuLnByb3BzLmNsYXNzTmFtZSwgZmFkZVN0eWxlc1tzdGF0dXNdKVxuICAgIH0pKTtcbiAgfSk7XG59KTtcbkZhZGUuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuRmFkZS5kaXNwbGF5TmFtZSA9ICdGYWRlJztcbmV4cG9ydCBkZWZhdWx0IEZhZGU7IiwiLy8gcmVhZGluZyBhIGRpbWVuc2lvbiBwcm9wIHdpbGwgY2F1c2UgdGhlIGJyb3dzZXIgdG8gcmVjYWxjdWxhdGUsXG4vLyB3aGljaCB3aWxsIGxldCBvdXIgYW5pbWF0aW9ucyB3b3JrXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0cmlnZ2VyQnJvd3NlclJlZmxvdyhub2RlKSB7XG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLWV4cHJlc3Npb25zXG4gIG5vZGUub2Zmc2V0SGVpZ2h0O1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xudmFyIHByb3BUeXBlcyA9IHtcbiAgbGFiZWw6IFByb3BUeXBlcy5zdHJpbmcuaXNSZXF1aXJlZCxcbiAgb25DbGljazogUHJvcFR5cGVzLmZ1bmNcbn07XG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBsYWJlbDogJ0Nsb3NlJ1xufTtcbnZhciBDbG9zZUJ1dHRvbiA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKF9yZWYsIHJlZikge1xuICB2YXIgbGFiZWwgPSBfcmVmLmxhYmVsLFxuICAgICAgb25DbGljayA9IF9yZWYub25DbGljayxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJsYWJlbFwiLCBcIm9uQ2xpY2tcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCBfZXh0ZW5kcyh7XG4gICAgcmVmOiByZWYsXG4gICAgdHlwZTogXCJidXR0b25cIixcbiAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoJ2Nsb3NlJywgY2xhc3NOYW1lKSxcbiAgICBvbkNsaWNrOiBvbkNsaWNrXG4gIH0sIHByb3BzKSwgLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIsIHtcbiAgICBcImFyaWEtaGlkZGVuXCI6IFwidHJ1ZVwiXG4gIH0sIFwiXFx4RDdcIiksIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7XG4gICAgY2xhc3NOYW1lOiBcInNyLW9ubHlcIlxuICB9LCBsYWJlbCkpO1xufSk7XG5DbG9zZUJ1dHRvbi5kaXNwbGF5TmFtZSA9ICdDbG9zZUJ1dHRvbic7XG5DbG9zZUJ1dHRvbi5wcm9wVHlwZXMgPSBwcm9wVHlwZXM7XG5DbG9zZUJ1dHRvbi5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5leHBvcnQgZGVmYXVsdCBDbG9zZUJ1dHRvbjsiLCJ2YXIgckh5cGhlbiA9IC8tKC4pL2c7XG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjYW1lbGl6ZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZy5yZXBsYWNlKHJIeXBoZW4sIGZ1bmN0aW9uIChfLCBjaHIpIHtcbiAgICByZXR1cm4gY2hyLnRvVXBwZXJDYXNlKCk7XG4gIH0pO1xufSIsImltcG9ydCBfZXh0ZW5kcyBmcm9tIFwiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZXh0ZW5kc1wiO1xuaW1wb3J0IF9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RXaXRob3V0UHJvcGVydGllc0xvb3NlXCI7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmltcG9ydCBjYW1lbGl6ZSBmcm9tICdkb20taGVscGVycy9jYW1lbGl6ZSc7XG5pbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuaW1wb3J0IHsgdXNlQm9vdHN0cmFwUHJlZml4IH0gZnJvbSAnLi9UaGVtZVByb3ZpZGVyJztcblxudmFyIHBhc2NhbENhc2UgPSBmdW5jdGlvbiBwYXNjYWxDYXNlKHN0cikge1xuICByZXR1cm4gc3RyWzBdLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZShzdHIpLnNsaWNlKDEpO1xufTtcblxuLy8gVE9ETzogZW1zdHJpY3RlbiAmIGZpeCB0aGUgdHlwaW5nIGhlcmUhIGBjcmVhdGVXaXRoQnNQcmVmaXg8VEVsZW1lbnRUeXBlPi4uLmBcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGNyZWF0ZVdpdGhCc1ByZWZpeChwcmVmaXgsIF90ZW1wKSB7XG4gIHZhciBfcmVmID0gX3RlbXAgPT09IHZvaWQgMCA/IHt9IDogX3RlbXAsXG4gICAgICBfcmVmJGRpc3BsYXlOYW1lID0gX3JlZi5kaXNwbGF5TmFtZSxcbiAgICAgIGRpc3BsYXlOYW1lID0gX3JlZiRkaXNwbGF5TmFtZSA9PT0gdm9pZCAwID8gcGFzY2FsQ2FzZShwcmVmaXgpIDogX3JlZiRkaXNwbGF5TmFtZSxcbiAgICAgIENvbXBvbmVudCA9IF9yZWYuQ29tcG9uZW50LFxuICAgICAgZGVmYXVsdFByb3BzID0gX3JlZi5kZWZhdWx0UHJvcHM7XG5cbiAgdmFyIEJzQ29tcG9uZW50ID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZjIsIHJlZikge1xuICAgIHZhciBjbGFzc05hbWUgPSBfcmVmMi5jbGFzc05hbWUsXG4gICAgICAgIGJzUHJlZml4ID0gX3JlZjIuYnNQcmVmaXgsXG4gICAgICAgIF9yZWYyJGFzID0gX3JlZjIuYXMsXG4gICAgICAgIFRhZyA9IF9yZWYyJGFzID09PSB2b2lkIDAgPyBDb21wb25lbnQgfHwgJ2RpdicgOiBfcmVmMiRhcyxcbiAgICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmMiwgW1wiY2xhc3NOYW1lXCIsIFwiYnNQcmVmaXhcIiwgXCJhc1wiXSk7XG5cbiAgICB2YXIgcmVzb2x2ZWRQcmVmaXggPSB1c2VCb290c3RyYXBQcmVmaXgoYnNQcmVmaXgsIHByZWZpeCk7XG4gICAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRhZywgX2V4dGVuZHMoe1xuICAgICAgcmVmOiByZWYsXG4gICAgICBjbGFzc05hbWU6IGNsYXNzTmFtZXMoY2xhc3NOYW1lLCByZXNvbHZlZFByZWZpeClcbiAgICB9LCBwcm9wcykpO1xuICB9KTtcbiAgQnNDb21wb25lbnQuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuICBCc0NvbXBvbmVudC5kaXNwbGF5TmFtZSA9IGRpc3BsYXlOYW1lO1xuICByZXR1cm4gQnNDb21wb25lbnQ7XG59IiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZVVuY29udHJvbGxlZCB9IGZyb20gJ3VuY29udHJvbGxhYmxlJztcbmltcG9ydCB1c2VFdmVudENhbGxiYWNrIGZyb20gJ0ByZXN0YXJ0L2hvb2tzL3VzZUV2ZW50Q2FsbGJhY2snO1xuaW1wb3J0IHsgdXNlQm9vdHN0cmFwUHJlZml4IH0gZnJvbSAnLi9UaGVtZVByb3ZpZGVyJztcbmltcG9ydCBGYWRlIGZyb20gJy4vRmFkZSc7XG5pbXBvcnQgQ2xvc2VCdXR0b24gZnJvbSAnLi9DbG9zZUJ1dHRvbic7XG5pbXBvcnQgZGl2V2l0aENsYXNzTmFtZSBmcm9tICcuL2RpdldpdGhDbGFzc05hbWUnO1xuaW1wb3J0IGNyZWF0ZVdpdGhCc1ByZWZpeCBmcm9tICcuL2NyZWF0ZVdpdGhCc1ByZWZpeCc7XG5pbXBvcnQgU2FmZUFuY2hvciBmcm9tICcuL1NhZmVBbmNob3InO1xudmFyIERpdlN0eWxlZEFzSDQgPSBkaXZXaXRoQ2xhc3NOYW1lKCdoNCcpO1xuRGl2U3R5bGVkQXNINC5kaXNwbGF5TmFtZSA9ICdEaXZTdHlsZWRBc0g0JztcbnZhciBBbGVydEhlYWRpbmcgPSBjcmVhdGVXaXRoQnNQcmVmaXgoJ2FsZXJ0LWhlYWRpbmcnLCB7XG4gIENvbXBvbmVudDogRGl2U3R5bGVkQXNINFxufSk7XG52YXIgQWxlcnRMaW5rID0gY3JlYXRlV2l0aEJzUHJlZml4KCdhbGVydC1saW5rJywge1xuICBDb21wb25lbnQ6IFNhZmVBbmNob3Jcbn0pO1xudmFyIGRlZmF1bHRQcm9wcyA9IHtcbiAgc2hvdzogdHJ1ZSxcbiAgdHJhbnNpdGlvbjogRmFkZSxcbiAgY2xvc2VMYWJlbDogJ0Nsb3NlIGFsZXJ0J1xufTtcbnZhciBBbGVydCA9IFJlYWN0LmZvcndhcmRSZWYoZnVuY3Rpb24gKHVuY29udHJvbGxlZFByb3BzLCByZWYpIHtcbiAgdmFyIF91c2VVbmNvbnRyb2xsZWQgPSB1c2VVbmNvbnRyb2xsZWQodW5jb250cm9sbGVkUHJvcHMsIHtcbiAgICBzaG93OiAnb25DbG9zZSdcbiAgfSksXG4gICAgICBic1ByZWZpeCA9IF91c2VVbmNvbnRyb2xsZWQuYnNQcmVmaXgsXG4gICAgICBzaG93ID0gX3VzZVVuY29udHJvbGxlZC5zaG93LFxuICAgICAgY2xvc2VMYWJlbCA9IF91c2VVbmNvbnRyb2xsZWQuY2xvc2VMYWJlbCxcbiAgICAgIGNsYXNzTmFtZSA9IF91c2VVbmNvbnRyb2xsZWQuY2xhc3NOYW1lLFxuICAgICAgY2hpbGRyZW4gPSBfdXNlVW5jb250cm9sbGVkLmNoaWxkcmVuLFxuICAgICAgdmFyaWFudCA9IF91c2VVbmNvbnRyb2xsZWQudmFyaWFudCxcbiAgICAgIG9uQ2xvc2UgPSBfdXNlVW5jb250cm9sbGVkLm9uQ2xvc2UsXG4gICAgICBkaXNtaXNzaWJsZSA9IF91c2VVbmNvbnRyb2xsZWQuZGlzbWlzc2libGUsXG4gICAgICB0cmFuc2l0aW9uID0gX3VzZVVuY29udHJvbGxlZC50cmFuc2l0aW9uLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfdXNlVW5jb250cm9sbGVkLCBbXCJic1ByZWZpeFwiLCBcInNob3dcIiwgXCJjbG9zZUxhYmVsXCIsIFwiY2xhc3NOYW1lXCIsIFwiY2hpbGRyZW5cIiwgXCJ2YXJpYW50XCIsIFwib25DbG9zZVwiLCBcImRpc21pc3NpYmxlXCIsIFwidHJhbnNpdGlvblwiXSk7XG5cbiAgdmFyIHByZWZpeCA9IHVzZUJvb3RzdHJhcFByZWZpeChic1ByZWZpeCwgJ2FsZXJ0Jyk7XG4gIHZhciBoYW5kbGVDbG9zZSA9IHVzZUV2ZW50Q2FsbGJhY2soZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAob25DbG9zZSkge1xuICAgICAgb25DbG9zZShmYWxzZSwgZSk7XG4gICAgfVxuICB9KTtcbiAgdmFyIFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uID09PSB0cnVlID8gRmFkZSA6IHRyYW5zaXRpb247XG4gIHZhciBhbGVydCA9IC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIF9leHRlbmRzKHtcbiAgICByb2xlOiBcImFsZXJ0XCJcbiAgfSwgVHJhbnNpdGlvbiA/IHByb3BzIDogdW5kZWZpbmVkLCB7XG4gICAgcmVmOiByZWYsXG4gICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKGNsYXNzTmFtZSwgcHJlZml4LCB2YXJpYW50ICYmIHByZWZpeCArIFwiLVwiICsgdmFyaWFudCwgZGlzbWlzc2libGUgJiYgcHJlZml4ICsgXCItZGlzbWlzc2libGVcIilcbiAgfSksIGRpc21pc3NpYmxlICYmIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KENsb3NlQnV0dG9uLCB7XG4gICAgb25DbGljazogaGFuZGxlQ2xvc2UsXG4gICAgbGFiZWw6IGNsb3NlTGFiZWxcbiAgfSksIGNoaWxkcmVuKTtcbiAgaWYgKCFUcmFuc2l0aW9uKSByZXR1cm4gc2hvdyA/IGFsZXJ0IDogbnVsbDtcbiAgcmV0dXJuIC8qI19fUFVSRV9fKi9SZWFjdC5jcmVhdGVFbGVtZW50KFRyYW5zaXRpb24sIF9leHRlbmRzKHtcbiAgICB1bm1vdW50T25FeGl0OiB0cnVlXG4gIH0sIHByb3BzLCB7XG4gICAgcmVmOiB1bmRlZmluZWQsXG4gICAgaW46IHNob3dcbiAgfSksIGFsZXJ0KTtcbn0pO1xuQWxlcnQuZGlzcGxheU5hbWUgPSAnQWxlcnQnO1xuQWxlcnQuZGVmYXVsdFByb3BzID0gZGVmYXVsdFByb3BzO1xuQWxlcnQuTGluayA9IEFsZXJ0TGluaztcbkFsZXJ0LkhlYWRpbmcgPSBBbGVydEhlYWRpbmc7XG5leHBvcnQgZGVmYXVsdCBBbGVydDsiLCJpbXBvcnQgX2V4dGVuZHMgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2V4dGVuZHNcIjtcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XG5pbXBvcnQgY2xhc3NOYW1lcyBmcm9tICdjbGFzc25hbWVzJztcbmV4cG9ydCBkZWZhdWx0IChmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gIHJldHVybiBSZWFjdC5mb3J3YXJkUmVmKGZ1bmN0aW9uIChwLCByZWYpIHtcbiAgICByZXR1cm4gLyojX19QVVJFX18qL1JlYWN0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgX2V4dGVuZHMoe30sIHAsIHtcbiAgICAgIHJlZjogcmVmLFxuICAgICAgY2xhc3NOYW1lOiBjbGFzc05hbWVzKHAuY2xhc3NOYW1lLCBjbGFzc05hbWUpXG4gICAgfSkpO1xuICB9KTtcbn0pOyIsImltcG9ydCBSZWFjdCBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IEFsZXJ0IH0gZnJvbSBcInJlYWN0LWJvb3RzdHJhcFwiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuXG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcblxuaW1wb3J0IHsgU2FtcGxlLCBSZWNvcmRpbmcgfSBmcm9tIFwicGl0Y2gvcGl0Y2hcIjtcbmltcG9ydCB7IFBpdGNoIH0gZnJvbSBcInBpdGNoL25vdGVzXCI7XG5cbnR5cGUgU3VtbWFyeVByb3BzID0ge1xuICByZWNvcmRpbmc6IFJlY29yZGluZztcbiAgcmVmZXJlbmNlOiBQaXRjaDtcbn07XG5cbmV4cG9ydCBmdW5jdGlvbiBTdW1tYXJ5KHsgcmVjb3JkaW5nLCByZWZlcmVuY2UgfTogU3VtbWFyeVByb3BzKSB7XG4gIGNvbnN0IHJlc3VsdCA9IHJlY29yZGluZ1xuICAgIC5maWx0ZXIoKHM/OiBTYW1wbGUpID0+ICEhcylcbiAgICAubWFwKChzOiBTYW1wbGUpID0+IHMhLmZyZXF1ZW5jeSAtIHJlZmVyZW5jZS5mcmVxdWVuY3kpO1xuICBjb25zdCBzdW0gPSByZXN1bHQucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gIExPRy5pbmZvKFwiU3VtOiAlZlwiLCBzdW0pO1xuXG4gIHJldHVybiAoXG4gICAgPEFsZXJ0IHZhcmlhbnQ9e1wic3VjY2Vzc1wifT5cbiAgICAgIFJlY2VpdmVkIHtyZXN1bHQubGVuZ3RofSBzYW1wbGUocykgYXZlcmFnaW5nIHRvIHtzdW0gLyByZXN1bHQubGVuZ3RofSBmcm9tXG4gICAgICBDPHN1Yj40PC9zdWI+LlxuICAgIDwvQWxlcnQ+XG4gICk7XG59XG4iLCJpbXBvcnQgUmVhY3QsIHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHsgQnV0dG9uIH0gZnJvbSBcInJlYWN0LWJvb3RzdHJhcFwiO1xuaW1wb3J0IHsgZ2V0TG9nZ2VyIH0gZnJvbSBcImxvZ1wiO1xuXG5pbXBvcnQgeyBtbDVQaXRjaERldGVjdGlvbiwgUGl0Y2hHZW5lcmF0b3IsIFJlY29yZGluZyB9IGZyb20gXCJwaXRjaC9waXRjaFwiO1xuaW1wb3J0IHsgUGl0Y2gsIG5vdGUsIG5vdGVUb0ZyZXEgfSBmcm9tIFwicGl0Y2gvbm90ZXNcIjtcblxuaW1wb3J0IHsgUGl0Y2hSZWNvcmRlciB9IGZyb20gXCIuL1BpdGNoUmVjb3JkZXJcIjtcbmltcG9ydCB7IFN1bW1hcnkgfSBmcm9tIFwiLi9TdW1tYXJ5XCI7XG5cbmNvbnN0IExPRyA9IGdldExvZ2dlcigpO1xuY29uc3QgUGl0Y2hEZXRlY3Rpb24gPSAoKSA9PiB7XG4gIGNvbnN0IFtzdGFydGVkLCBzZXRJc1N0YXJ0ZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuXG4gIC8vIEF1ZGlvIGludGVyZmFjZXNcbiAgY29uc3QgW2F1ZGlvQ29udGV4dCwgX10gPSB1c2VTdGF0ZShuZXcgQXVkaW9Db250ZXh0KCkpOyAvLyByZWFkLW9ubHlcbiAgY29uc3QgW3N0cmVhbSwgc2V0U3RyZWFtXSA9IHVzZVN0YXRlPE1lZGlhU3RyZWFtPigpO1xuICBjb25zdCBbcGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IsIHNldFBpdGNoRGV0ZWN0aW9uR2VuZXJhdG9yXSA9IHVzZVN0YXRlPFxuICAgIFBpdGNoR2VuZXJhdG9yXG4gID4oKTtcbiAgY29uc3QgW3JlY29yZGluZywgc2V0UmVjb3JkaW5nXSA9IHVzZVN0YXRlPFJlY29yZGluZz4oKTtcblxuICAvLyBTZXQgdXAgdGhlIG1pY3JvcGhvbmUuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzdGFydGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgTE9HLmluZm8oXCJBY3F1aXJpbmcgbWljcm9waG9uZS5cIik7XG4gICAgbmF2aWdhdG9yLm1lZGlhRGV2aWNlc1xuICAgICAgLmdldFVzZXJNZWRpYSh7XG4gICAgICAgIGF1ZGlvOiB0cnVlLFxuICAgICAgICB2aWRlbzogZmFsc2UsXG4gICAgICB9KVxuICAgICAgLnRoZW4oKG5ld1N0cmVhbSkgPT4ge1xuICAgICAgICBMT0cuZGVidWcoXG4gICAgICAgICAgXCJNaWNyb3Bob25lIGluaXRpYWxpemVkIHdpdGggc3RyZWFtOiAlaiwgYWN0aXZlPywgJXMsIHN0YXRlOiAlcy5cIixcbiAgICAgICAgICBuZXdTdHJlYW0sXG4gICAgICAgICAgbmV3U3RyZWFtLmFjdGl2ZSxcbiAgICAgICAgICBuZXdTdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5yZWFkeVN0YXRlXG4gICAgICAgICk7XG4gICAgICAgIHNldFN0cmVhbShuZXdTdHJlYW0pO1xuICAgICAgfSk7XG4gIH0sIFtzdGFydGVkXSk7XG5cbiAgLy8gQ29uZmlndXJlIHRoZSBhdWRpbyBzdHJlYW0uXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKCFzdGFydGVkIHx8IHN0cmVhbSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgTE9HLmluZm8oXCJTZXR0aW5nIHVwIHRoZSBjb250ZXh0ICVqIGFuZCBzdHJlYW0gJWpcIiwgYXVkaW9Db250ZXh0LCBzdHJlYW0pO1xuICAgIGF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShzdHJlYW0pO1xuXG4gICAgTE9HLmluZm8oXCJJbml0aWFsaXplZCBhdWRpby5cIik7XG4gICAgc2V0UGl0Y2hEZXRlY3Rpb25HZW5lcmF0b3IobWw1UGl0Y2hEZXRlY3Rpb24oYXVkaW9Db250ZXh0LCBzdHJlYW0pKTtcbiAgICBhdWRpb0NvbnRleHQucmVzdW1lKCk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgTE9HLmluZm8oXCJDbGVhbnVwIHRoZSBhdWRpbyBzZXR0aW5nc1wiKTtcblxuICAgICAgTE9HLmRlYnVnKFwiU3RvcCBhbGwgdHJhY2tzIGluIHRoZSBzdHJlYW0gJWouXCIsIHN0cmVhbSk7XG4gICAgICBzdHJlYW0/LmdldFRyYWNrcygpLmZvckVhY2goKHQpID0+IHQuc3RvcCgpKTtcblxuICAgICAgTE9HLmRlYnVnKFwiU3VzcGVuZCBhdWRpbyBjb250ZXh0ICVqLlwiLCBhdWRpb0NvbnRleHQpO1xuICAgICAgYXVkaW9Db250ZXh0LnN1c3BlbmQoKTtcbiAgICB9O1xuICB9LCBbc3RyZWFtLCBzdGFydGVkXSk7XG5cbiAgaWYgKHJlY29yZGluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgcmVmZXJlbmNlUGl0Y2ggPSBub3RlKG5vdGVUb0ZyZXEoNjApKSBhcyBQaXRjaDtcblxuICAgIHJldHVybiA8U3VtbWFyeSByZWNvcmRpbmc9e3JlY29yZGluZ30gcmVmZXJlbmNlPXtyZWZlcmVuY2VQaXRjaH0gLz47XG4gIH0gZWxzZSBpZiAoc3RhcnRlZCAmJiBwaXRjaERldGVjdGlvbkdlbmVyYXRvcikge1xuICAgIHJldHVybiAoXG4gICAgICA8UGl0Y2hSZWNvcmRlclxuICAgICAgICBvbkZpbmlzaD17KHJlc3VsdCkgPT4ge1xuICAgICAgICAgIExPRy5pbmZvKFwiUmVzdWx0LCAlalwiLCByZXN1bHQpO1xuICAgICAgICAgIHNldFJlY29yZGluZyhyZXN1bHQpO1xuICAgICAgICAgIHNldElzU3RhcnRlZChmYWxzZSk7XG4gICAgICAgIH19XG4gICAgICAgIHBpdGNoR2VuZXJhdG9yPXtwaXRjaERldGVjdGlvbkdlbmVyYXRvcn1cbiAgICAgICAgdGltZW91dE1zPXs1MDAwfVxuICAgICAgLz5cbiAgICApO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAoXG4gICAgICA8QnV0dG9uXG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHNldElzU3RhcnRlZCh0cnVlKX1cbiAgICAgICAgdmFyaWFudD1cIm91dGxpbmUtcHJpbWFyeVwiXG4gICAgICAgIHNpemU9XCJsZ1wiXG4gICAgICA+XG4gICAgICAgIEknbSByZWFkeVxuICAgICAgPC9CdXR0b24+XG4gICAgKTtcbiAgfVxufTtcblxuZXhwb3J0IHsgUGl0Y2hEZXRlY3Rpb24gfTtcbiIsImZ1bmN0aW9uIHRvVmFsKG1peCkge1xuXHR2YXIgaywgeSwgc3RyPScnO1xuXG5cdGlmICh0eXBlb2YgbWl4ID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgbWl4ID09PSAnbnVtYmVyJykge1xuXHRcdHN0ciArPSBtaXg7XG5cdH0gZWxzZSBpZiAodHlwZW9mIG1peCA9PT0gJ29iamVjdCcpIHtcblx0XHRpZiAoQXJyYXkuaXNBcnJheShtaXgpKSB7XG5cdFx0XHRmb3IgKGs9MDsgayA8IG1peC5sZW5ndGg7IGsrKykge1xuXHRcdFx0XHRpZiAobWl4W2tdKSB7XG5cdFx0XHRcdFx0aWYgKHkgPSB0b1ZhbChtaXhba10pKSB7XG5cdFx0XHRcdFx0XHRzdHIgJiYgKHN0ciArPSAnICcpO1xuXHRcdFx0XHRcdFx0c3RyICs9IHk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoayBpbiBtaXgpIHtcblx0XHRcdFx0aWYgKG1peFtrXSkge1xuXHRcdFx0XHRcdHN0ciAmJiAoc3RyICs9ICcgJyk7XG5cdFx0XHRcdFx0c3RyICs9IGs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gc3RyO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoKSB7XG5cdHZhciBpPTAsIHRtcCwgeCwgc3RyPScnO1xuXHR3aGlsZSAoaSA8IGFyZ3VtZW50cy5sZW5ndGgpIHtcblx0XHRpZiAodG1wID0gYXJndW1lbnRzW2krK10pIHtcblx0XHRcdGlmICh4ID0gdG9WYWwodG1wKSkge1xuXHRcdFx0XHRzdHIgJiYgKHN0ciArPSAnICcpO1xuXHRcdFx0XHRzdHIgKz0geFxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gc3RyO1xufVxuIiwiaW1wb3J0IF9leHRlbmRzIGZyb20gXCJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9leHRlbmRzXCI7XG5pbXBvcnQgX29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2UgZnJvbSBcIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFdpdGhvdXRQcm9wZXJ0aWVzTG9vc2VcIjtcbmltcG9ydCBjbGFzc05hbWVzIGZyb20gJ2NsYXNzbmFtZXMnO1xuaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHVzZUJvb3RzdHJhcFByZWZpeCB9IGZyb20gJy4vVGhlbWVQcm92aWRlcic7XG52YXIgZGVmYXVsdFByb3BzID0ge1xuICBmbHVpZDogZmFsc2Vcbn07XG52YXIgQ29udGFpbmVyID0gUmVhY3QuZm9yd2FyZFJlZihmdW5jdGlvbiAoX3JlZiwgcmVmKSB7XG4gIHZhciBic1ByZWZpeCA9IF9yZWYuYnNQcmVmaXgsXG4gICAgICBmbHVpZCA9IF9yZWYuZmx1aWQsXG4gICAgICBfcmVmJGFzID0gX3JlZi5hcyxcbiAgICAgIENvbXBvbmVudCA9IF9yZWYkYXMgPT09IHZvaWQgMCA/ICdkaXYnIDogX3JlZiRhcyxcbiAgICAgIGNsYXNzTmFtZSA9IF9yZWYuY2xhc3NOYW1lLFxuICAgICAgcHJvcHMgPSBfb2JqZWN0V2l0aG91dFByb3BlcnRpZXNMb29zZShfcmVmLCBbXCJic1ByZWZpeFwiLCBcImZsdWlkXCIsIFwiYXNcIiwgXCJjbGFzc05hbWVcIl0pO1xuXG4gIHZhciBwcmVmaXggPSB1c2VCb290c3RyYXBQcmVmaXgoYnNQcmVmaXgsICdjb250YWluZXInKTtcbiAgdmFyIHN1ZmZpeCA9IHR5cGVvZiBmbHVpZCA9PT0gJ3N0cmluZycgPyBcIi1cIiArIGZsdWlkIDogJy1mbHVpZCc7XG4gIHJldHVybiAvKiNfX1BVUkVfXyovUmVhY3QuY3JlYXRlRWxlbWVudChDb21wb25lbnQsIF9leHRlbmRzKHtcbiAgICByZWY6IHJlZlxuICB9LCBwcm9wcywge1xuICAgIGNsYXNzTmFtZTogY2xhc3NOYW1lcyhjbGFzc05hbWUsIGZsdWlkID8gXCJcIiArIHByZWZpeCArIHN1ZmZpeCA6IHByZWZpeClcbiAgfSkpO1xufSk7XG5Db250YWluZXIuZGlzcGxheU5hbWUgPSAnQ29udGFpbmVyJztcbkNvbnRhaW5lci5kZWZhdWx0UHJvcHMgPSBkZWZhdWx0UHJvcHM7XG5leHBvcnQgZGVmYXVsdCBDb250YWluZXI7IiwiaW1wb3J0IFJlYWN0IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IFwiLi9BcHAuY3NzXCI7XG5cbmltcG9ydCB7IFBpdGNoRGV0ZWN0aW9uIH0gZnJvbSBcIi4vY29tcG9uZW50cy9QaXRjaERldGVjdGlvblwiO1xuXG5pbXBvcnQgY2xzeCBmcm9tIFwiY2xzeFwiO1xuXG5pbXBvcnQgeyBnZXRMb2dnZXIgfSBmcm9tIFwibG9nXCI7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tIFwicmVhY3QtYm9vdHN0cmFwXCI7XG5jb25zdCBMT0cgPSBnZXRMb2dnZXIoKTtcblxuZXhwb3J0IGNvbnN0IEFwcCA9ICgpID0+IHtcbiAgTE9HLmluZm8oXCJTdGFydGluZyBhcHAuXCIpO1xuICByZXR1cm4gKFxuICAgIDxDb250YWluZXI+XG4gICAgICA8aGVhZGVyIGNsYXNzTmFtZT17Y2xzeChcInRleHQtY2VudGVyXCIsIFwibXQtNVwiKX0+XG4gICAgICAgIDxoMSBjbGFzc05hbWU9e2Nsc3goXCJkaXNwbGF5LTFcIiwgXCJ0aXRsZVwiKX0+dm9jYWxseTwvaDE+XG4gICAgICAgIDxoMj5cbiAgICAgICAgICBzaW5nIEM8c3ViPjQ8L3N1Yj4hXG4gICAgICAgIDwvaDI+XG4gICAgICA8L2hlYWRlcj5cblxuICAgICAgPG1haW4gY2xhc3NOYW1lPXtjbHN4KFwidGV4dC1jZW50ZXJcIiwgXCJweS01XCIpfSByb2xlPVwibWFpblwiPlxuICAgICAgICA8UGl0Y2hEZXRlY3Rpb24gLz5cbiAgICAgIDwvbWFpbj5cblxuICAgICAgPGZvb3RlciBjbGFzc05hbWU9e2Nsc3goXCJweS0zXCIsIFwiYm9yZGVyLXRvcFwiLCBcInRleHQtbXV0ZWRcIil9PlxuICAgICAgICA8Q29udGFpbmVyPlxuICAgICAgICAgIDxwPnZvY2FsbHkuYXBwIDIwMjA8L3A+XG4gICAgICAgIDwvQ29udGFpbmVyPlxuICAgICAgPC9mb290ZXI+XG4gICAgPC9Db250YWluZXI+XG4gICk7XG59O1xuIiwiaW1wb3J0ICogYXMgUmVhY3QgZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgKiBhcyBSZWFjdERPTSBmcm9tIFwicmVhY3QtZG9tXCI7XG5pbXBvcnQgeyBBcHAgfSBmcm9tIFwiLi9BcHBcIjtcblxuUmVhY3RET00ucmVuZGVyKDxBcHA+PC9BcHA+LCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFwcFwiKSk7XG4iXSwic291cmNlUm9vdCI6IiJ9